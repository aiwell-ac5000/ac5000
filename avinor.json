[
    {
        "id": "79aac880e5f35bdf",
        "type": "subflow",
        "name": "Lavenergy Modus",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 80,
                "y": 180,
                "wires": [
                    {
                        "id": "5e5a2d4c6e39347d"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 800,
                "y": 260,
                "wires": [
                    {
                        "id": "faba89ed24ec38da",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "d0166460177942a1",
        "type": "function",
        "z": "79aac880e5f35bdf",
        "name": "Compare Device Time with Sent Time Range",
        "func": "// Compare Device Time with Sent Time Range & Reset Valve Max When It is Not Within Range.\n// Hamed Jalalian Javadpour V0.0.1 Published: 1/19/2023\nif (msg && msg.topic === 'LAVENERGY' && msg.payload.id === flow.get(\"SD_ID\")) {\n    flow.set(\"fra\", msg.payload.val.fra)\n    flow.set(\"til\", msg.payload.val.til)\n}\n\nvar now = new Date().toLocaleTimeString('en-fr', {\n    hour12: false,\n    hour: '2-digit',\n    minute: '2-digit',\n    second: '2-digit',\n    timeZone: 'CET',\n});\n\nif (flow.get(\"fra\") && flow.get(\"til\") && now > flow.get(\"fra\") && now < flow.get(\"til\")) {\n    flow.set(\"LE\", 1)\n    return null;\n}\nelse {\n    flow.set(\"fra\", undefined)\n    flow.set(\"til\", undefined)\n    flow.set(\"LE\", 0)\n    return { payload: flow.get(\"LE\") === 0 ? true : false, id: flow.get(\"LE\") === 0 && flow.get(\"SD_ID\") && typeof flow.get(\"SD_ID\") === 'number' ? flow.get(\"SD_ID\") : \"Id is not defined!\" , topic: flow.get(\"LE\") === 0 ? \"RESET_VALVE_MAX\" : \"\"}\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 260,
        "wires": [
            [
                "faba89ed24ec38da"
            ]
        ]
    },
    {
        "id": "428088bdecc60f0d",
        "type": "inject",
        "z": "79aac880e5f35bdf",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 270,
        "y": 380,
        "wires": [
            [
                "8c94cbd18fe1a3aa"
            ]
        ]
    },
    {
        "id": "faba89ed24ec38da",
        "type": "switch",
        "z": "79aac880e5f35bdf",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "8c94cbd18fe1a3aa",
        "type": "switch",
        "z": "79aac880e5f35bdf",
        "name": "",
        "property": "LE",
        "propertyType": "flow",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 330,
        "y": 320,
        "wires": [
            [
                "d0166460177942a1"
            ]
        ]
    },
    {
        "id": "5e5a2d4c6e39347d",
        "type": "switch",
        "z": "79aac880e5f35bdf",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "SD_ID",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 190,
        "y": 220,
        "wires": [
            [
                "954e2197d255de42"
            ],
            [
                "d0166460177942a1"
            ]
        ]
    },
    {
        "id": "954e2197d255de42",
        "type": "change",
        "z": "79aac880e5f35bdf",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "SD_ID",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "d76e8ee33ccc284d",
        "type": "subflow",
        "name": "Snøsmelt",
        "category": "Applikasjoner",
        "in": [
            {
                "x": 50,
                "y": 30,
                "wires": [
                    {
                        "id": "b9860e88ec37089b"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1200,
                "y": 40,
                "wires": [
                    {
                        "id": "9f12422fa7540eb7",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1320,
                "y": 60,
                "wires": [
                    {
                        "id": "795acbfe57676d37",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1680,
                "y": 40,
                "wires": [
                    {
                        "id": "6db26a7d014f1855",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1680,
                "y": 140,
                "wires": [
                    {
                        "id": "017343e4d179fae5",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "LABEL",
                "type": "str",
                "value": "Snøsmelt",
                "ui": {
                    "label": {
                        "en-US": "Navn"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "FUNCTION",
                "type": "str",
                "value": "singlezone",
                "ui": {
                    "label": {
                        "en-US": "Funksjon"
                    },
                    "type": "select",
                    "opts": {
                        "opts": [
                            {
                                "l": {
                                    "en-US": "Snøsmelt"
                                },
                                "v": "singlezone"
                            },
                            {
                                "l": {
                                    "en-US": "Undervarme"
                                },
                                "v": "undervarme"
                            },
                            {
                                "l": {
                                    "en-US": "0-Sone"
                                },
                                "v": "zerozone"
                            }
                        ]
                    }
                }
            },
            {
                "name": "DISPLAY_VALVE_PRIME",
                "type": "bool",
                "value": "false",
                "ui": {
                    "icon": "font-awesome/fa-eye",
                    "label": {
                        "en-US": "Vis shunt på primærside i dsplay"
                    },
                    "type": "checkbox"
                }
            },
            {
                "name": "DISPLAY_PUMP_PRIME",
                "type": "bool",
                "value": "false",
                "ui": {
                    "icon": "font-awesome/fa-eye",
                    "label": {
                        "en-US": "Vis startsignal på primærside i dsplay"
                    },
                    "type": "checkbox"
                }
            },
            {
                "name": "ENABLE",
                "type": "bool",
                "value": "true",
                "ui": {
                    "label": {
                        "en-US": "Aktivert automatisk etter programmering"
                    },
                    "type": "checkbox"
                }
            },
            {
                "name": "SIDE",
                "type": "str",
                "value": "SECONDARY",
                "ui": {
                    "label": {
                        "en-US": "Styre på"
                    },
                    "type": "select",
                    "opts": {
                        "opts": [
                            {
                                "l": {
                                    "en-US": "Primærside"
                                },
                                "v": "PRIMARY"
                            },
                            {
                                "l": {
                                    "en-US": "Sekundærside"
                                },
                                "v": "SECONDARY"
                            },
                            {
                                "l": {
                                    "en-US": "Begge"
                                },
                                "v": "BOTH"
                            }
                        ]
                    }
                }
            },
            {
                "name": "DRIFTSTEMPERATUR",
                "type": "num",
                "value": "35",
                "ui": {
                    "label": {
                        "en-US": "Ønsket driftstemperatur (Tur)"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "DRIFTSTEMPERATUR_RETUR",
                "type": "num",
                "value": "35",
                "ui": {
                    "label": {
                        "en-US": "Øvre grense retur"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "GROUND_START",
                "type": "num",
                "value": "2",
                "ui": {
                    "label": {
                        "en-US": "Starter ved temp overflate under:"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "GROUND_CHOICE",
                "type": "str",
                "value": "MIN",
                "ui": {
                    "label": {
                        "en-US": "Hvilken overflate-temp skal det styres på?"
                    },
                    "type": "select",
                    "opts": {
                        "opts": [
                            {
                                "l": {
                                    "en-US": "Laveste"
                                },
                                "v": "MIN"
                            },
                            {
                                "l": {
                                    "en-US": "Høyeste"
                                },
                                "v": "MAX"
                            }
                        ]
                    }
                }
            },
            {
                "name": "T25_MAX",
                "type": "num",
                "value": "50",
                "ui": {
                    "label": {
                        "en-US": "Temperaturvakt T25"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "AIR_START",
                "type": "num",
                "value": "5",
                "ui": {
                    "label": {
                        "en-US": "Starter ved temp luft under:"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "AIR_STOP_MAX",
                "type": "num",
                "value": "10",
                "ui": {
                    "label": {
                        "en-US": "Stenger ned ved luft over"
                    },
                    "type": "spinner"
                }
            },
            {
                "name": "AIR_STOP_MIN",
                "type": "num",
                "value": "-25",
                "ui": {
                    "label": {
                        "en-US": "Stenger ned ved luft under"
                    },
                    "type": "spinner"
                }
            },
            {
                "name": "GROUND_SETPOINT_SNOW",
                "type": "num",
                "value": "3",
                "ui": {
                    "label": {
                        "en-US": "Settpunkt overflate (Snø)"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "STANDBY",
                "type": "bool",
                "value": "false",
                "ui": {
                    "label": {
                        "en-US": "Automatisk Standby (grunnvarme i overflate) etter programmering"
                    },
                    "type": "checkbox"
                }
            },
            {
                "name": "GROUND_SETPOINT_STANDBY",
                "type": "num",
                "value": "1",
                "ui": {
                    "label": {
                        "en-US": "Settpunkt overflate (Standby)"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "GROUND_SETPOINT_DRYUP_HIGH",
                "type": "num",
                "value": "3.5",
                "ui": {
                    "label": {
                        "en-US": "Opptørk Settpunkt overflate (Høy)"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "GROUND_SETPOINT_DRYUP_LOW",
                "type": "num",
                "value": "2.5",
                "ui": {
                    "label": {
                        "en-US": "Opptørk Settpunkt overflate (Lav)"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "DRYUP_COUNTER_MAX",
                "type": "num",
                "value": "2",
                "ui": {
                    "label": {
                        "en-US": "Antall sykluser opptørk"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "GROUND_SETPOINT_FROST",
                "type": "num",
                "value": "0.2",
                "ui": {
                    "label": {
                        "en-US": "Settpunkt overflate (Rim) = Luft +"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "GROUND_SETPOINT_SNOW_PROB",
                "type": "num",
                "value": "2",
                "ui": {
                    "label": {
                        "en-US": "Settpunkt overflate (Snø sannsynlig)"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "TIMEOUT_DRYUP",
                "type": "num",
                "value": "8",
                "ui": {
                    "label": {
                        "en-US": "Timeout opptørk (timer)"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "TIMEOUT_FROST",
                "type": "num",
                "value": "6",
                "ui": {
                    "label": {
                        "en-US": "Timeout rim (timer)"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "TIMEOUT_SNOW_PROB",
                "type": "num",
                "value": "6",
                "ui": {
                    "label": {
                        "en-US": "Timeout snø sannsynlig (timer)"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "FROSTSIKRING_BAKKE_AKTIV",
                "type": "bool",
                "value": "true",
                "ui": {
                    "label": {
                        "en-US": "Frostsikring mellom rør"
                    },
                    "type": "checkbox"
                }
            },
            {
                "name": "FROSTSIKRING_BAKKE",
                "type": "num",
                "value": "-20",
                "ui": {
                    "label": {
                        "en-US": "Settpunkt Frostsikring Mellom Rør"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "PUMP_DELAY",
                "type": "num",
                "value": "0",
                "ui": {
                    "label": {
                        "en-US": "Tid mellom pumpe 1 og 2 under oppstart (minutter)"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "START_DELAY",
                "type": "num",
                "value": "2",
                "ui": {
                    "label": {
                        "en-US": "Tid mellom pumpe 2 og regulering oppstart (minutter)"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "VALVE_START",
                "type": "num",
                "value": "0",
                "ui": {
                    "label": {
                        "en-US": "Oppstartsposisjon shunt sekundær"
                    },
                    "type": "spinner",
                    "opts": {
                        "min": 0,
                        "max": 100
                    }
                }
            },
            {
                "name": "SHUNT_MAX_START",
                "type": "num",
                "value": "75",
                "ui": {
                    "label": {
                        "en-US": "Max pådrag under oppstart (%)"
                    },
                    "type": "spinner",
                    "opts": {
                        "min": 0,
                        "max": 100
                    }
                }
            },
            {
                "name": "STARTUP_TIMEOUT",
                "type": "num",
                "value": "60",
                "ui": {
                    "label": {
                        "en-US": "Timeout oppstartsekvens (minutter)"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "SHUNT_MAX",
                "type": "num",
                "value": "100",
                "ui": {
                    "label": {
                        "en-US": "Max pådrag under normal drift (%)"
                    },
                    "type": "spinner",
                    "opts": {
                        "min": 0,
                        "max": 100
                    }
                }
            },
            {
                "name": "SHUNT_MIN",
                "type": "num",
                "value": "0",
                "ui": {
                    "label": {
                        "en-US": "Minimum pådrag shunt sekundær under drift (%)"
                    },
                    "type": "spinner",
                    "opts": {
                        "min": 0,
                        "max": 100
                    }
                }
            },
            {
                "name": "P_RETUR",
                "type": "num",
                "value": "0.2025",
                "ui": {
                    "type": "hide"
                }
            },
            {
                "name": "I_RETUR",
                "type": "num",
                "value": "144",
                "ui": {
                    "type": "hide"
                }
            },
            {
                "name": "D_RETUR",
                "type": "num",
                "value": "0",
                "ui": {
                    "type": "hide"
                }
            },
            {
                "name": "P_TUR",
                "type": "num",
                "value": "0.2025",
                "ui": {
                    "type": "hide"
                }
            },
            {
                "name": "I_TUR",
                "type": "num",
                "value": "144",
                "ui": {
                    "type": "hide"
                }
            },
            {
                "name": "D_TUR",
                "type": "num",
                "value": "0",
                "ui": {
                    "type": "hide"
                }
            },
            {
                "name": "T24_FROST",
                "type": "num",
                "value": "6",
                "ui": {
                    "label": {
                        "en-US": "Frostsikring (T24)"
                    },
                    "type": "spinner",
                    "opts": {
                        "min": 0,
                        "max": 40
                    }
                }
            },
            {
                "name": "T26_START",
                "type": "num",
                "value": "15",
                "ui": {
                    "type": "hide"
                }
            },
            {
                "name": "TIMER_RAISE_SETPOINT",
                "type": "num",
                "value": "1",
                "ui": {
                    "label": {
                        "en-US": "Begrensning, minutter per grad under oppstart."
                    },
                    "type": "spinner"
                }
            },
            {
                "name": "KLARSIGNAL",
                "type": "bool",
                "value": "false",
                "ui": {
                    "label": {
                        "en-US": "Vente på klarsignal?"
                    },
                    "type": "checkbox"
                }
            },
            {
                "name": "POWER_CONTROL",
                "type": "bool",
                "value": "false",
                "ui": {
                    "label": {
                        "en-US": "Styring på effekt"
                    },
                    "type": "checkbox"
                }
            },
            {
                "name": "POWER_CALC",
                "type": "bool",
                "value": "false",
                "ui": {
                    "label": {
                        "en-US": "Beregne effekt"
                    },
                    "type": "checkbox"
                }
            },
            {
                "name": "MAX_POWER_START",
                "type": "num",
                "value": "1000",
                "ui": {
                    "label": {
                        "en-US": "Maks tillatt effekt (kW) ved oppstart"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "POWER_TOTAL",
                "type": "num",
                "value": "2000",
                "ui": {
                    "label": {
                        "en-US": "Totalt tilgjenegelig effekt (kW)"
                    },
                    "type": "spinner"
                }
            },
            {
                "name": "MAX_POWER",
                "type": "num",
                "value": "1000",
                "ui": {
                    "label": {
                        "en-US": "Maks tillatt effekt (kW) ved opphold"
                    },
                    "type": "spinner"
                }
            },
            {
                "name": "MAX_POWER_SNOW",
                "type": "num",
                "value": "2000",
                "ui": {
                    "label": {
                        "en-US": "Maks tillatt effekt (kW) ved detektert snø"
                    },
                    "type": "spinner"
                }
            },
            {
                "name": "PID_CONFIG",
                "type": "json",
                "value": "{\"T24\":{\"setpoint\":6,\"prop_band\":-6,\"t_integral\":999999999999999,\"t_derivative\":0,\"integral_default\":0,\"smooth_factor\":3,\"max_interval\":600},\"T25\":{\"setpoint\":40,\"prop_band\":40,\"t_integral\":1000,\"t_derivative\":0,\"integral_default\":0,\"smooth_factor\":3,\"max_interval\":600},\"T26\":{\"setpoint\":40,\"prop_band\":20,\"t_integral\":14400,\"t_derivative\":0,\"integral_default\":0,\"smooth_factor\":3,\"max_interval\":600},\"POWER\":{\"setpoint\":1000,\"prop_band\":20,\"t_integral\":60,\"t_derivative\":0,\"integral_default\":0,\"smooth_factor\":3,\"max_interval\":600},\"T_GROUND\":{\"setpoint\":3,\"prop_band\":0.5,\"t_integral\":14400,\"t_derivative\":0,\"integral_default\":0,\"smooth_factor\":3,\"max_interval\":600}}"
            },
            {
                "name": "SMOOTH",
                "type": "str",
                "value": "Responsiv",
                "ui": {
                    "label": {
                        "en-US": "Lavpassfilter"
                    },
                    "type": "select",
                    "opts": {
                        "opts": [
                            {
                                "l": {
                                    "en-US": "Treg"
                                },
                                "v": "Treg"
                            },
                            {
                                "l": {
                                    "en-US": "Middels"
                                },
                                "v": "Middels"
                            },
                            {
                                "l": {
                                    "en-US": "Responsiv"
                                },
                                "v": "Responsiv"
                            }
                        ]
                    }
                }
            },
            {
                "name": "ENABLE_CALENDAR",
                "type": "bool",
                "value": "false",
                "ui": {
                    "type": "checkbox"
                }
            },
            {
                "name": "CALENDAR_TRIGGER",
                "type": "num",
                "value": "10",
                "ui": {
                    "type": "spinner"
                }
            },
            {
                "name": "GROUND_SETPOINT_CALENDAR",
                "type": "num",
                "value": "3",
                "ui": {
                    "type": "spinner"
                }
            },
            {
                "name": "VALVE_PRIME_START",
                "type": "num",
                "value": "100"
            },
            {
                "name": "SD_PROTOCOL",
                "type": "str",
                "value": "5",
                "ui": {
                    "label": {
                        "en-US": "SD-Protokoll"
                    },
                    "type": "select",
                    "opts": {
                        "opts": [
                            {
                                "l": {
                                    "en-US": "4"
                                },
                                "v": "4"
                            },
                            {
                                "l": {
                                    "en-US": "5"
                                },
                                "v": "5"
                            }
                        ]
                    }
                }
            }
        ],
        "meta": {},
        "color": "#DDAA99",
        "status": {
            "x": 1080,
            "y": 460,
            "wires": [
                {
                    "id": "13016693f015cf7d",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "14b9c3e701b5e33c",
        "type": "mqtt out",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "",
        "qos": "1",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e649abf8.0e7988",
        "x": 2650,
        "y": 1080,
        "wires": []
    },
    {
        "id": "3093b912c79e049c",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "context",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "state",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 430,
        "y": 180,
        "wires": [
            [
                "017343e4d179fae5",
                "795acbfe57676d37",
                "9f12422fa7540eb7",
                "c40976724d399fe1",
                "db9d049408f6618c",
                "b0697414156d995b",
                "e499822be82b1a59",
                "fdd6392e821ef7e0",
                "2a7c68108906aa32",
                "f6970a5ba4f8f80a",
                "d50abce8c7fd55d4",
                "c56474c9ee321cc3",
                "6db26a7d014f1855",
                "711090dac053eb33",
                "8934324f4daf2c1a",
                "1d987e99c798606e"
            ],
            [
                "a1b7cb6808f63c44",
                "63fed62312b1a17c",
                "d5ae2ed5a42242e6"
            ]
        ]
    },
    {
        "id": "d5ae2ed5a42242e6",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "APP_STATE",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 415,
        "wires": [
            [
                "d40191b63082f39d"
            ]
        ]
    },
    {
        "id": "5cc0d7c15a5b4185",
        "type": "json",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "payload",
        "action": "str",
        "pretty": false,
        "x": 1130,
        "y": 820,
        "wires": [
            [
                "bcbf235e911bde56"
            ]
        ]
    },
    {
        "id": "d101aed4e90c3470",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "Set Status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.state",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 320,
        "wires": [
            [
                "983366c576fb9cb1",
                "24b78b54e58cfbef"
            ]
        ]
    },
    {
        "id": "017343e4d179fae5",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "Valve",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.valve",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1310,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "a1b7cb6808f63c44",
        "type": "rbe",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 150,
        "y": 360,
        "wires": [
            [
                "d101aed4e90c3470",
                "a15179235b21a138"
            ]
        ]
    },
    {
        "id": "a15179235b21a138",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "name": "Changed?",
        "property": "payload.changed",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 230,
        "y": 440,
        "wires": [
            [
                "d5ae2ed5a42242e6"
            ]
        ]
    },
    {
        "id": "13016693f015cf7d",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "function 8",
        "func": "msg.payload = flow.get(\"SD_ID\") + \" \" + msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 920,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "0b89a5e9931a8ca8",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "INIT",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 130,
        "y": 580,
        "wires": [
            [
                "68d2b529f1e6183c",
                "83917713c13b75fb",
                "d7917a909b459ed6"
            ]
        ]
    },
    {
        "id": "883915b12aecbc6e",
        "type": "json",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 850,
        "y": 380,
        "wires": [
            [
                "13016693f015cf7d"
            ]
        ]
    },
    {
        "id": "983366c576fb9cb1",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "istype",
                "v": "string",
                "vt": "string"
            },
            {
                "t": "istype",
                "v": "object",
                "vt": "object"
            },
            {
                "t": "istype",
                "v": "json",
                "vt": "json"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 710,
        "y": 320,
        "wires": [
            [
                "13016693f015cf7d"
            ],
            [
                "883915b12aecbc6e"
            ],
            [
                "13016693f015cf7d"
            ]
        ]
    },
    {
        "id": "68d2b529f1e6183c",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "reset",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 430,
        "y": 600,
        "wires": [
            [
                "4db0edd3a96d8466"
            ]
        ]
    },
    {
        "id": "f89d0f65fa662ccf",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "CRITICAL",
        "qos": "1",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 84,
        "y": 274,
        "wires": [
            [
                "4db0edd3a96d8466"
            ]
        ]
    },
    {
        "id": "2f03f61262c880d1",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "GLOBAL GROUND",
        "func": "if(msg.topic === \"T_GROUND\") {\n    if(Number(msg.payload) != 327.67) {\n        let g = global.get(\"GROUND\");\n        if(g === undefined)\n            global.set(\"GROUND\", Number(msg.payload));\n        else if (g > Number(msg.payload))\n            global.set(\"GROUND\", Number(msg.payload));\n    }    \n}\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\nglobal.set(\"GROUND\",undefined);",
        "finalize": "// Code added here will be run when the\n// node is being stopped or re-deployed",
        "libs": [],
        "x": 250,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "a8b3f77d7a3729dd",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "",
        "qos": "2",
        "datatype": "json",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 1,
        "x": 930,
        "y": 800,
        "wires": [
            [
                "7d488e5529ea0d9f"
            ]
        ]
    },
    {
        "id": "296300b9644c9f1b",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "MQTT Setup",
        "func": "msg.action = 'subscribe';\nlet id = flow.get(\"SD_ID\");\nmsg.topic = [];\nfor (let i = 1; i <= 32; i++) {\n    msg.topic.push(\"sd/update/\" + (id * 100 + i));\n    msg.topic.push(\"modbus/update/\" + (id * 100 + i));\n}\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\nconst reg = new Array(35).fill(0);\nflow.set(\"REG\", reg,'memoryOnly');",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 740,
        "wires": [
            [
                "a8b3f77d7a3729dd"
            ]
        ]
    },
    {
        "id": "3b5938eff3f32d66",
        "type": "inject",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 690,
        "y": 660,
        "wires": [
            [
                "296300b9644c9f1b",
                "d938b58b21a8fecb"
            ]
        ]
    },
    {
        "id": "6a9edee829b03de9",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "Changed external",
        "func": "let id = flow.get(\"SD_ID\");\nmsg.payload = Number(msg.payload);\nvar r = 0;\nif (msg.topic === \"sd/update/\" + (id * 100 + 1)) {\n    r = 1;\n    msg.topic = 'TOTAL';\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 3)) {\n    if (msg.payload === 1 || msg.payload === 2) {\n        msg.topic = 'MAN';\n    }\n    r = 3;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 5)) {\n    msg.topic = \"START\";\n    r = 5;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 16)) {\n    if (msg.payload === 2) {\n        msg.payload = flow.get(\"SD_ID\");\n        msg.topic = 'reset';\n    }\n    r = 16;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 17)) {\n    if (msg.payload === 0)\n        msg.topic = 'ALARM_RST';\n    r = 17;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 25)) {\n    msg.topic = 'SETPOINT';    \n    r = 25;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 26)) {\n    msg.topic = 'GROUND_SETPOINT_STANDBY';\n    r = 26;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 27)) {\n    msg.topic = 'STANDBY';    \n    r = 27;\n}\nif(r != 0) {\n    let reg = flow.get('REG', 'memoryOnly');\n    reg[r] = msg.payload;\n    flow.set('REG', reg, 'memoryOnly');\n}\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1110,
        "y": 1020,
        "wires": [
            [
                "1885e652765fd4f2"
            ]
        ]
    },
    {
        "id": "63fed62312b1a17c",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "type",
                "pt": "msg",
                "to": "payload.context['type']",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.context['reg']",
                "pt": "msg",
                "to": "#:(memoryOnly)::REG",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "payload.context['logg']",
                "pt": "msg",
                "to": "PipesSingleSoneLOGG",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "payload.context['ID']",
                "pt": "msg",
                "to": "SD_ID",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1280,
        "y": 300,
        "wires": [
            [
                "ce80cc41450f3641",
                "ff28278bf83ecc00"
            ]
        ]
    },
    {
        "id": "ff28278bf83ecc00",
        "type": "uib-sender",
        "z": "d76e8ee33ccc284d",
        "url": "user",
        "name": "",
        "topic": "",
        "passthrough": false,
        "return": false,
        "outputs": 0,
        "x": 1810,
        "y": 360,
        "wires": []
    },
    {
        "id": "9f12422fa7540eb7",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "pump1",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.pump1",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "795acbfe57676d37",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "pump2",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.pump2",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "6db26a7d014f1855",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "Valve prime",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.valve_prime",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1350,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "6ae314ccefc4c0c7",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "reset",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 90,
        "y": 720,
        "wires": [
            [
                "32d8d0d73b0aa2be"
            ]
        ]
    },
    {
        "id": "32d8d0d73b0aa2be",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "SD_ID",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 290,
        "y": 680,
        "wires": [
            [
                "d7917a909b459ed6",
                "4db0edd3a96d8466"
            ]
        ]
    },
    {
        "id": "e42614230bb635ac",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "READY_FOR_CONTENT",
        "qos": "2",
        "datatype": "auto",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 150,
        "y": 780,
        "wires": [
            [
                "4db0edd3a96d8466",
                "e023b16cf61405ff"
            ]
        ]
    },
    {
        "id": "9f3908525e467095",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "refresh",
        "func": "msg['_uib'] = {\n    \"reload\": true\n};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1800,
        "y": 480,
        "wires": [
            [
                "ff28278bf83ecc00"
            ]
        ]
    },
    {
        "id": "940dd4142ddbad24",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "MAN",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 150,
        "y": 860,
        "wires": [
            [
                "5ef48f5efaf18e5a"
            ]
        ]
    },
    {
        "id": "5ef48f5efaf18e5a",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "payload.id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "SD_ID",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 310,
        "y": 860,
        "wires": [
            [
                "56233a646ef10e92"
            ]
        ]
    },
    {
        "id": "56233a646ef10e92",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.val",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 860,
        "wires": [
            [
                "46722b558bc056eb"
            ]
        ]
    },
    {
        "id": "2e6ffbd8c8f969e4",
        "type": "link in",
        "z": "d76e8ee33ccc284d",
        "name": "IN",
        "links": [
            "46722b558bc056eb",
            "b4554419ede3fe23",
            "be657fe929954180",
            "f2b5dd8483ab6c91",
            "93a6ee17499fd85f",
            "efd211f56e016e12",
            "3559342f6396e574"
        ],
        "x": 145,
        "y": 220,
        "wires": [
            [
                "ae6ceb27c62969f9"
            ]
        ]
    },
    {
        "id": "46722b558bc056eb",
        "type": "link out",
        "z": "d76e8ee33ccc284d",
        "name": "link out 4",
        "mode": "link",
        "links": [
            "2e6ffbd8c8f969e4",
            "f987f442a13401f3"
        ],
        "x": 665,
        "y": 860,
        "wires": []
    },
    {
        "id": "fed0fd447517d996",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "VALVE",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 130,
        "y": 960,
        "wires": [
            [
                "5ef48f5efaf18e5a"
            ]
        ]
    },
    {
        "id": "0acea02ff5d66f39",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "VALVE_PRIME",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 160,
        "y": 1060,
        "wires": [
            [
                "5ef48f5efaf18e5a"
            ]
        ]
    },
    {
        "id": "cce7da7c03190847",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "PUMP",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 148,
        "y": 1109,
        "wires": [
            [
                "41ccf9196d1f5a25"
            ]
        ]
    },
    {
        "id": "41ccf9196d1f5a25",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "payload.id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "SD_ID",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 310,
        "y": 1120,
        "wires": [
            [
                "0315dd3f95f41a41"
            ]
        ]
    },
    {
        "id": "0315dd3f95f41a41",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "payload.side",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "primær",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "sekundær",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 470,
        "y": 1120,
        "wires": [
            [
                "cf1fcd89ac25ec85"
            ],
            [
                "b1e357b289bdaebd"
            ]
        ]
    },
    {
        "id": "cf1fcd89ac25ec85",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "PUMP1",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "PUMP1",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.val",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 1100,
        "wires": [
            [
                "46722b558bc056eb"
            ]
        ]
    },
    {
        "id": "b1e357b289bdaebd",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "PUMP2",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "PUMP2",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.val",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 626,
        "y": 1148,
        "wires": [
            [
                "46722b558bc056eb"
            ]
        ]
    },
    {
        "id": "5cc092972d7c5ed3",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "SHUTDOWN",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 640,
        "wires": [
            [
                "32d8d0d73b0aa2be"
            ]
        ]
    },
    {
        "id": "a56bf958ef43e5f8",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "TIMED",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 130,
        "y": 1200,
        "wires": [
            [
                "ace3b8bbffb2f9b4"
            ]
        ]
    },
    {
        "id": "3f8ecbb9bba22a65",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "START",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 137,
        "y": 1243,
        "wires": [
            [
                "ace3b8bbffb2f9b4"
            ]
        ]
    },
    {
        "id": "ace3b8bbffb2f9b4",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "payload.id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "SD_ID",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 290,
        "y": 1240,
        "wires": [
            [
                "3b2e06c971ce6c5f"
            ]
        ]
    },
    {
        "id": "3b2e06c971ce6c5f",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.val",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 1240,
        "wires": [
            [
                "46722b558bc056eb"
            ]
        ]
    },
    {
        "id": "f2b5dd8483ab6c91",
        "type": "link out",
        "z": "d76e8ee33ccc284d",
        "name": "link out 5",
        "mode": "link",
        "links": [
            "2e6ffbd8c8f969e4"
        ],
        "x": 1655,
        "y": 940,
        "wires": []
    },
    {
        "id": "1885e652765fd4f2",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "MAN",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "TOTAL",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "START",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "reset",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "ALARM_RST",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "STANDBY",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "GROUND_SETPOINT_STANDBY",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "SETPOINT",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 8,
        "x": 1190,
        "y": 920,
        "wires": [
            [
                "ce349717734fdcf2"
            ],
            [
                "c9f854ca3706c93d"
            ],
            [
                "0dcb2696de4b52b5"
            ],
            [
                "7bc454eecbfd3064"
            ],
            [],
            [
                "47c6092235159741"
            ],
            [
                "1c26848682515c32"
            ],
            [
                "ef78976771b0eb56"
            ]
        ]
    },
    {
        "id": "ce349717734fdcf2",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "function 18",
        "func": "if (msg.payload === 1)\n    msg.payload = false;\nelse if (msg.payload === 2) msg.payload = true;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1290,
        "y": 780,
        "wires": [
            [
                "f2b5dd8483ab6c91"
            ]
        ]
    },
    {
        "id": "c9f854ca3706c93d",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "SET_DURATION",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1370,
        "y": 900,
        "wires": [
            [
                "f2b5dd8483ab6c91"
            ]
        ]
    },
    {
        "id": "70bef6e8bbccc072",
        "type": "inject",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "props": [
            {
                "p": "reset",
                "v": "true",
                "vt": "bool"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1050,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "b4554419ede3fe23",
        "type": "link out",
        "z": "d76e8ee33ccc284d",
        "name": "link out 6",
        "mode": "link",
        "links": [
            "2e6ffbd8c8f969e4"
        ],
        "x": 3285,
        "y": 60,
        "wires": []
    },
    {
        "id": "1ada31a8eb77bada",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "PID_VALVE",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3170,
        "y": 240,
        "wires": [
            [
                "b4554419ede3fe23"
            ]
        ]
    },
    {
        "id": "0dcb2696de4b52b5",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "func": "if (msg.payload === 1)\n    msg.topic = \"START\";\nif (msg.payload > 1)\n    msg.topic = \"TIMED\";\nif (msg.payload === 0)\n    msg.topic = \"SHUTDOWN\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1380,
        "y": 1000,
        "wires": [
            [
                "f2b5dd8483ab6c91"
            ]
        ]
    },
    {
        "id": "ae6ceb27c62969f9",
        "type": "rbe",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 170,
        "y": 80,
        "wires": [
            [
                "4db0edd3a96d8466"
            ]
        ]
    },
    {
        "id": "a6b3316227e207e2",
        "type": "link out",
        "z": "d76e8ee33ccc284d",
        "name": "PID_IN",
        "mode": "link",
        "links": [
            "39b60cb919b52bf4"
        ],
        "x": 455,
        "y": 20,
        "wires": []
    },
    {
        "id": "c40976724d399fe1",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "PID_ENABLE",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.pid",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2020,
        "y": 340,
        "wires": [
            [
                "fff19dd7e86b5b1e"
            ]
        ]
    },
    {
        "id": "fff19dd7e86b5b1e",
        "type": "rbe",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 2230,
        "y": 340,
        "wires": [
            [
                "6906821cef4cb9f3",
                "e30208f00a2a59e9"
            ]
        ]
    },
    {
        "id": "7bc454eecbfd3064",
        "type": "mqtt out",
        "z": "d76e8ee33ccc284d",
        "name": "reset",
        "topic": "",
        "qos": "1",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e649abf8.0e7988",
        "x": 1670,
        "y": 820,
        "wires": []
    },
    {
        "id": "47c6092235159741",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "function 30",
        "func": "if (msg.payload === 1) {\n    //msg.topic = 'STANDBY';\n    msg.payload = false;\n}\nelse if (msg.payload === 2) {\n    //msg.topic = 'STANDBY';\n    msg.payload = true;\n}\nelse msg.payload = false;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 1240,
        "wires": [
            [
                "f2b5dd8483ab6c91"
            ]
        ]
    },
    {
        "id": "1c26848682515c32",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "function 31",
        "func": "msg.payload = Number(msg.payload) / 100;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1550,
        "y": 1240,
        "wires": [
            [
                "f2b5dd8483ab6c91"
            ]
        ]
    },
    {
        "id": "c3538ae0a77366b7",
        "type": "link out",
        "z": "d76e8ee33ccc284d",
        "name": "reset",
        "mode": "link",
        "links": [
            "b849627287c553a4",
            "926404c554d7879d",
            "c84d26f6ae465f41",
            "693e3d7590bda2b8",
            "41e21bd2178c857d"
        ],
        "x": 1215,
        "y": 640,
        "wires": []
    },
    {
        "id": "a915ba8d974860ef",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "ENABLE",
        "qos": "2",
        "datatype": "json",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 120,
        "y": 920,
        "wires": [
            [
                "5ef48f5efaf18e5a"
            ]
        ]
    },
    {
        "id": "7cd1d193d6b0d5f8",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "STANDBY",
        "qos": "2",
        "datatype": "json",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 394,
        "y": 1028,
        "wires": [
            [
                "5ef48f5efaf18e5a"
            ]
        ]
    },
    {
        "id": "1c8d57f2bc504563",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "GROUND_SETPOINT_STANDBY",
        "qos": "2",
        "datatype": "json",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 360,
        "y": 1080,
        "wires": [
            [
                "5ef48f5efaf18e5a"
            ]
        ]
    },
    {
        "id": "8b172401aa059e06",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "SETPOINT",
        "qos": "2",
        "datatype": "json",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 419,
        "y": 914,
        "wires": [
            [
                "5ef48f5efaf18e5a"
            ]
        ]
    },
    {
        "id": "d7917a909b459ed6",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "reset",
        "func": "return {reset: true};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1070,
        "y": 600,
        "wires": [
            [
                "c3538ae0a77366b7",
                "9f3908525e467095",
                "a1b7cb6808f63c44",
                "ae6ceb27c62969f9",
                "36af64bc4198a40d",
                "6c4033a86efc0d16"
            ]
        ]
    },
    {
        "id": "1b4f98a1570fff97",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "LAVENERGY",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 190,
        "y": 1320,
        "wires": [
            [
                "4e4320780b7ac5da",
                "e29c986defd56cb5"
            ]
        ]
    },
    {
        "id": "4617a8e58ec7c2ca",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "payload.id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "SD_ID",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 470,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "4e4320780b7ac5da",
        "type": "subflow:79aac880e5f35bdf",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "name": "",
        "x": 430,
        "y": 800,
        "wires": [
            [
                "46722b558bc056eb"
            ]
        ]
    },
    {
        "id": "c71a03adc308117a",
        "type": "inject",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "SD_ID",
        "payload": "SD_ID",
        "payloadType": "flow",
        "x": 210,
        "y": 820,
        "wires": [
            [
                "4e4320780b7ac5da"
            ]
        ]
    },
    {
        "id": "d909f9ec469f712e",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "function 51",
        "func": "let id = flow.get(\"SD_ID\");\nconsole.log(id + ': ' + msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1090,
        "y": 20,
        "wires": [
            []
        ]
    },
    {
        "id": "24b78b54e58cfbef",
        "type": "json",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "payload",
        "action": "str",
        "pretty": false,
        "x": 730,
        "y": 20,
        "wires": [
            [
                "36af64bc4198a40d"
            ]
        ]
    },
    {
        "id": "36af64bc4198a40d",
        "type": "rbe",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 890,
        "y": 20,
        "wires": [
            [
                "d909f9ec469f712e"
            ]
        ]
    },
    {
        "id": "db9d049408f6618c",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "pid_setpoint",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.pid_setpoint",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "SETPOINT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1990,
        "y": 440,
        "wires": [
            [
                "6c4033a86efc0d16"
            ]
        ]
    },
    {
        "id": "6c4033a86efc0d16",
        "type": "rbe",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 2244,
        "y": 465,
        "wires": [
            [
                "2ca1e22e32565244"
            ]
        ]
    },
    {
        "id": "f987f442a13401f3",
        "type": "link in",
        "z": "d76e8ee33ccc284d",
        "name": "refresh",
        "links": [
            "46722b558bc056eb"
        ],
        "x": 1815,
        "y": 600,
        "wires": [
            [
                "9f3908525e467095"
            ]
        ]
    },
    {
        "id": "079334e4fea418ea",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "Changed Internal",
        "func": "let id = flow.get(\"SD_ID\");\nmsg.payload = Number(msg.payload);\nvar r = 0;\n\nvar index = msg.topic.split('/');\nif(isNaN(Number(index[2])) === false) {\n    r = Number(index[2]) - id * 100;\n    let reg = flow.get('REG', 'memoryOnly');\n    reg[r] = msg.payload;\n    flow.set('REG', reg, 'memoryOnly');\n\n}  \nmsg.payload = {context: {}};\nmsg.topic === \"state\";\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 830,
        "y": 1060,
        "wires": [
            [
                "63fed62312b1a17c"
            ]
        ]
    },
    {
        "id": "dd4e1e2e9f9855b8",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "SETPOINT_RETUR",
        "qos": "2",
        "datatype": "json",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 516,
        "y": 957,
        "wires": [
            [
                "5ef48f5efaf18e5a"
            ]
        ]
    },
    {
        "id": "b0697414156d995b",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "setpoint_retur",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.setpoint_retur",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "SETPOINT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2000,
        "y": 540,
        "wires": [
            [
                "6d01c9f4a2c998d2"
            ]
        ]
    },
    {
        "id": "6d01c9f4a2c998d2",
        "type": "rbe",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 2230,
        "y": 540,
        "wires": [
            [
                "2163a15d83ae2a83"
            ]
        ]
    },
    {
        "id": "4db0edd3a96d8466",
        "type": "awstm",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "test": "",
        "simclock": false,
        "machine": "single",
        "xstateDefinition": "// Available variables/objects/functions:\n// xstate\n// - .Machine\n// - .interpret\n// - .assign\n// - .send\n// - .sendParent\n// - .spawn\n// - .raise\n// - .actions\n//\n// Common\n// - setInterval, setTimeout, clearInterval, clearTimeout\n// - node.send, node.warn, node.log, node.error\n// - context.get, context.set\n// - flow.get, flow.set\n// - env.get\n// - util\n\nconst { assign, Machine, spawn, sendParent, send, actions, State } = xstate;\nconst { raise, cancel } = actions;\nif (global.get(\"SD_ID\") === undefined) global.set(\"SD_ID\", { latest: 1 });\n\nconst coolingMachine = Machine({\n  id: 'cooler',\n  initial: 'cooling',\n  context: {\n    valve: 0, // default\n    valve_min: 0,\n    duration: 1,\n    startup: true\n  },\n  states: {\n    cooling: {\n      on: {\n        '*': { target: 'finished', cond: (ctx, evt) => ctx.valve <= ctx.valve_min, actions: assign({ valve: (ctx, evt) => ctx.valve_min }) },\n      },\n      entry: assign({ valve: (ctx, evt) => ctx.valve - 0.017 }),\n      //entry: ()=> node.send({ topic: 'PONG'}),\n      exit: sendParent((context, event) => ({\n        //...context,\n        payload: context.valve,\n        type: 'valve'\n      })),\n\n      after: {\n        1000: { target: 'cooling' }\n      }\n    },\n    finished: {}\n  },\n});\n\nif (Boolean(env.get('KLARSIGNAL')) === true)\n  flow.set('KLARSIGNAL', false);\nelse flow.set('KLARSIGNAL', true);\n\nif (flow.get(\"TOTAL_DURATION\") === undefined)\n  flow.set(\"TOTAL_DURATION\", 0);\n\nconst runtime = Machine({\n  id: 'runtime',\n  context: () => (\n    {\n      start: Date.now(),\n      now: Date.now(),\n      duration: 0, // minutter\n      total: flow.get(\"TOTAL_DURATION\"),\n      previous: Date.now(),\n    }),\n  initial: 'active',\n  states: {\n    active: {\n      entry: [assign({\n        duration: (ctx, evt) => {\n          //node.send({topic: 'time', payload: ctx});\n          let now = Date.now();\n          if ((now - ctx.start) === 0)\n            return 0;\n          return Math.floor((now - ctx.start) / 1000 / 60);\n        },\n        total: (ctx, evt) => {\n          let passed = Date.now() - ctx.now;//ctx.now is now old\n          if (passed < 0)\n            return ctx.total;\n          let total = flow.get(\"TOTAL_DURATION\") + passed / 1000 / 60 / 60;\n          flow.set(\"TOTAL_DURATION\", total);\n          //node.send({ topic: 'TOTAL_DURATION', payload: total });\n          return total;\n        },\n        previous: (ctx, evt) => ctx.now,\n        now: (ctx, evt) => Date.now(),\n      }),\n      sendParent((context, event) => ({\n        //...context,\n        payload: { total: flow.get(\"TOTAL_DURATION\"), running: context.duration },\n        type: 'TOTAL_DURATION'\n      }))],\n      after: {\n        60000: 'active'\n      },\n    },\n  }\n});\n\nif (flow.get(\"SD_ID\") === undefined) {\n  flow.set(\"SD_ID\", global.get(\"SD_ID\").latest);\n  global.set(\"SD_ID\", {\n    ...global.get(\"SD_ID\"),\n    latest: global.get(\"SD_ID\").latest + 1,\n  }, \"file\");\n}\nconst ID = flow.get(\"SD_ID\");\n\n// First define names guards, actions, ...\n\n/**\n * Guards\n */\n\n//TODO TEST\nconst guardHeatON = (ctx, _evt) => {\n  //if (ctx.startup === true)\n  //return true;\n  if (ctx.frostsikring_bakke === true && ctx.between_pipes === \"error\" && ctx.ground < ctx.between_pipes_setpoint)\n    return true;\n  if ((ctx.ground === undefined || ctx.ground === \"error\") && ctx.ignore_ground === false)\n    return false;\n  if (ctx.frostsikring_bakke === true && ctx.between_pipes < ctx.between_pipes_setpoint)\n    return true;\n  if (ctx.standby === true) {\n    if ((ctx.ignore_ground === false && ctx.ground < ctx.standby_ground_setpoint) || (ctx.ignore_ground === true && global.get(\"GROUND\") != undefined && global.get(\"GROUND\") < ctx.standby_ground_setpoint))\n      return true;\n  }\n  if (ctx.ignore_ground === false && ctx.ground < ctx.ground_setpoint)\n    return true;\n  if (ctx.ignore_ground === true && global.get(\"GROUND\") != undefined && global.get(\"GROUND\") < ctx.ground_setpoint)\n    return true;\n  else return false;\n};\n\n//TODO TEST\nconst guardHeatOFF = (ctx, _evt) => {\n  if (ctx.ignore_ground === false && (ctx.ground === undefined || ctx.ground === \"error\"))\n    return true;\n  if (ctx.standby === true) {\n    if ((ctx.ignore_ground === false && ctx.ground > ctx.standby_ground_setpoint) || (ctx.ignore_ground === true && global.get(\"GROUND\") != undefined && global.get(\"GROUND\") > ctx.standby_ground_setpoint))\n      return true;\n  }\n  if (ctx.ignore_ground === false && ctx.ground > ctx.ground_setpoint)\n    return true;\n  if (ctx.ignore_ground === true && global.get(\"GROUND\") != undefined && global.get(\"GROUND\") > ctx.ground_setpoint)\n    return true;\n  else return false;\n};\n\nconst guardStart = (ctx, _evt) => {\n  if (ctx.T24 === undefined || ctx.T25 === undefined)\n    return false;\n  if (ctx.type === 'zerozone')\n    return Object.keys(ctx.n_zones).length > 0;\n  if (ctx.frostsikring_bakke === true && ctx.between_pipes === \"error\" && ctx.ground < -10)\n    return true;\n  if (ctx.ground === undefined || ctx.air === undefined || ctx.ground === \"error\" || (ctx.air === \"error\" && ctx.ignore_air === false))\n    return false;\n  if (ctx.standby && ctx.air < ctx.air_stop_max && ctx.air > ctx.air_stop_min) //standby\n    return true;\n  if (ctx.use_calendar && ctx.countdown != undefined && ctx.countdown <= ctx.calendar_trigger) //kalender\n    return true;\n  if (ctx.frostsikring_bakke === true && ctx.between_pipes != undefined && ctx.between_pipes < ctx.between_pipes_setpoint)\n    return true;\n  if (ctx.timed > 0) //\n    return true;\n  if (ctx.air >= ctx.air_stop_max || ctx.air <= ctx.air_stop_min)\n    return false;\n  if (ctx.snow_prob_api === true)\n    return true;\n  if ((ctx.snow || ctx.frost || ctx.snow_prob || (ctx.last_enable && ctx.last >= ctx.last_start)) && ((ctx.ignore_ground === false && ctx.ground < ctx.ground_start) || (ctx.ignore_ground === true && global.get(\"GROUND\") != undefined && global.get(\"GROUND\") < ctx.ground_start)) && (ctx.air < ctx.air_start || ctx.ignore_air === true))//startup\n    return true;\n  else return false;\n};\n\nconst guardStop = (ctx, evt) => {\n  if (ctx.type === 'zerozone')\n    return Object.keys(ctx.n_zones).length <= 0;\n  //if true, log criteria air air_stop_max air_stop_min timed\n  if ((ctx.air >= ctx.air_stop_max || ctx.air <= ctx.air_stop_min) && ctx.timed < 1)\n    console.log(\"Stop criteria: air: \" + ctx.air + \" air_stop_max: \" + ctx.air_stop_max + \" air_stop_min: \" + ctx.air_stop_min + \" timed: \" + ctx.timed);\n  return (ctx.air >= ctx.air_stop_max || ctx.air <= ctx.air_stop_min) && ctx.timed < 1;\n  //return false;\n}\n\n/**\n * Actions\n */\n\nconst setValvePID = assign({\n  valve_prime: (ctx, evt) => {\n    if (ctx.side === 'SECONDARY')\n      return ctx.valve_prime;\n    if(ctx.lower_limit === ctx.upper_limit)\n      return env.get('VALVE_PRIME_START');\n    if (ctx.side === 'BOTH' && (ctx.T25 < 10 || ctx.T24 < ctx.T24_frost + 5))\n      //return ctx.valve_prime <= 5 ? 5 : ctx.valve_prime;\n      return env.get('VALVE_PRIME_START');\n    if (evt.payload < ctx.valve_min)\n      return ctx.valve_min;\n    //if (evt.payload < ctx.valve_prime + ctx.valve_min)\n      //return ctx.valve_prime - 1 <= ctx.valve_min ? ctx.valve_min : ctx.valve_prime - 1;\n    else return evt.payload;\n  },\n  valve: (ctx, evt) => {\n    if (ctx.side === 'PRIMARY')\n      return ctx.valve;\n    //BOTH\n    if (ctx.side === 'BOTH' && ctx.lower_limit != ctx.upper_limit && (ctx.T25 >= 10 && ctx.T24 >= ctx.T24_frost + 5))\n      //return ctx.valve <= 5 ? 5 : ctx.valve;\n      return ctx.valve + 0.1 >= 100 ? 100 : ctx.valve + 0.1;\n    //return 44;\n    if (evt.payload < ctx.valve_min)\n      return ctx.valve_min;\n    //return 43;\n    else return evt.payload;\n  }\n});\n\nconst setValve = assign({\n  valve: (context, event) => {\n    console.log(\"Setting valve: \" + event.payload);\n    // If the payload is greater than 100, return 100.\n    if (event.payload > 100)\n      return 100;\n    // If the payload is less than 0, return 0.\n    if (event.payload < 0)\n      return 0;\n    // Otherwise, return the payload.\n    else return event.payload;\n  }\n});\n\n//const allowed_delta = 1 / 60;\n\nif (flow.get(\"ENV_DRIFTSTEMPERATUR\") != undefined)\n  if (flow.get(\"ENV_DRIFTSTEMPERATUR\") != env.get(\"DRIFTSTEMPERATUR\"))\n    flow.set(\"SETPOINT\", env.get(\"DRIFTSTEMPERATUR\"));\n\nif (flow.get(\"ENV_DRIFTSTEMPERATUR_RETUR\") != undefined)\n  if (flow.get(\"ENV_DRIFTSTEMPERATUR_RETUR\") != env.get(\"DRIFTSTEMPERATUR_RETUR\"))\n    flow.set(\"SETPOINT_RETUR\", env.get(\"DRIFTSTEMPERATUR_RETUR\"));\n\nif (flow.get(\"ENV_GROUND_SETPOINT_STANDBY\") != undefined)\n  if (flow.get(\"ENV_GROUND_SETPOINT_STANDBY\") != env.get(\"GROUND_SETPOINT_STANDBY\"))\n    flow.set(\"GROUND_SETPOINT_STANDBY\", env.get(\"GROUND_SETPOINT_STANDBY\"));\n\nif (flow.get(\"ENV_STANDBY\") != undefined)\n  if (flow.get(\"ENV_STANDBY\") != env.get(\"STANDBY\"))\n    flow.set(\"STANDBY\", env.get(\"STANDBY\"));\n\nif (flow.get(\"SETPOINT\") === undefined)\n  flow.set(\"SETPOINT\", env.get(\"DRIFTSTEMPERATUR\"));\n\nif (flow.get(\"SETPOINT_RETUR\") === undefined)\n  flow.set(\"SETPOINT_RETUR\", env.get(\"DRIFTSTEMPERATUR_RETUR\"));\n\nif (flow.get(\"GROUND_SETPOINT_STANDBY\") === undefined)\n  flow.set(\"GROUND_SETPOINT_STANDBY\", env.get(\"GROUND_SETPOINT_STANDBY\"));\n\nif (flow.get(\"STANDBY\") === undefined)\n  flow.set(\"STANDBY\", env.get(\"STANDBY\"));\n\n//flow.set(\"ENABLE\", env.get(\"ENABLE\"));\n\nif (flow.get(\"ENABLE\") === undefined)\n  flow.set(\"ENABLE\", env.get(\"ENABLE\"));\n\nif (flow.get(\"MAX_POWER\") === undefined)\n  flow.set(\"MAX_POWER\", env.get(\"MAX_POWER\"));\n\nif (flow.get(\"MAX_POWER_SNOW\") === undefined)\n  flow.set(\"MAX_POWER_SNOW\", env.get(\"MAX_POWER_SNOW\"));\n\nif (flow.get(\"POWER_CONTROL\") === undefined)\n  flow.set(\"POWER_CONTROL\", env.get(\"POWER_CONTROL\"));\n//set PRESSURE_LIMIT\nif (flow.get(\"PRESSURE_LIMIT\") === undefined)\n  flow.set(\"PRESSURE_LIMIT\", 0.9);\n\nif (flow.get(\"CALENDAR_TRIGGER\") === undefined)\n  flow.set(\"CALENDAR_TRIGGER\", env.get(\"CALENDAR_TRIGGER\"));\n\nif (flow.get(\"ENABLE_CALENDAR\") === undefined)\n  flow.set(\"ENABLE_CALENDAR\", env.get(\"ENABLE_CALENDAR\"));\n\nif (flow.get(\"GROUND_SETPOINT_CALENDAR\") === undefined)\n  flow.set(\"GROUND_SETPOINT_CALENDAR\", env.get(\"GROUND_SETPOINT_CALENDAR\"));\n\n\n//Old ENV\nflow.set(\"ENV_GROUND_SETPOINT_STANDBY\", env.get(\"GROUND_SETPOINT_STANDBY\"));\nflow.set(\"ENV_DRIFTSTEMPERATUR\", env.get(\"DRIFTSTEMPERATUR\"));\nflow.set(\"ENV_DRIFTSTEMPERATUR_RETUR\", env.get(\"DRIFTSTEMPERATUR_RETUR\"));\nflow.set(\"ENV_STANDBY\", env.get(\"STANDBY\"));\n\n//LAST_START\nif (flow.get(\"LAST_START\") === undefined)\n  flow.set(\"LAST_START\", 100);\n\n//LAST_STOP\nif (flow.get(\"LAST_STOP\") === undefined)\n  flow.set(\"LAST_STOP\", 0);\n//LAST_ENABLE\nif (flow.get(\"LAST_ENABLE\") === undefined)\n  flow.set(\"LAST_ENABLE\", false);\n\nconst setEnable = assign({\n  enabled: (context, event) => {\n    flow.set(\"ENABLE\", event.payload);\n    return event.payload;\n  }\n});\n\nconst setTIMEOUT_DRYUP = assign({\n  TIMEOUT_DRYUP: (context, event) => event.payload\n});\nconst setTIMEOUT_FROST = assign({\n  TIMEOUT_FROST: (context, event) => event.payload\n});\nconst setTIMEOUT_SNOW_PROB = assign({\n  TIMEOUT_SNOW_PROB: (context, event) => event.payload\n});\n\nconst setGROUND_SETPOINT_SNOW = assign({\n  ground_pid_setpoint: (ctx, evt) => ctx.snow || ctx.timed > 1 ? evt.payload : ctx.ground_pid_setpoint,\n  ground_setpoint: (context, event) => event.payload\n});\n\nconst setSETPOINT = assign({\n  pid_setpoint: (ctx, evt) => Number(evt.payload),\n  setpoint: (context, event) => {\n    flow.set(\"SETPOINT\", Number(event.payload));\n    return Number(event.payload)\n  }\n});\nconst setSETPOINT_RETUR = assign({\n  setpoint_retur: (context, event) => {\n    flow.set(\"SETPOINT_RETUR\", Number(event.payload));\n    return Number(event.payload)\n  }\n});\n\nconst setSTANDBY = assign({\n  standby: (context, event) => {\n    flow.set(\"STANDBY\", event.payload);\n    return event.payload;\n  }\n});\n\nconst setAIR_START = assign({\n  air_start: (_context, event) => event.payload\n});\n\nconst setGROUND_START = assign({\n  ground_start: (_context, event) => event.payload\n});\n\nconst setGROUND_SETPOINT_STANDBY = assign({\n  ground_pid_setpoint: (ctx, evt) => !(ctx.snow || ctx.timed > 1 || (ctx.use_calendar && ctx.countdown != undefined && ctx.countdown <= ctx.calendar_trigger)) && ctx.standby ? evt.payload : ctx.ground_pid_setpoint,\n  standby_ground_setpoint: (_context, event) => {\n    flow.set(\"GROUND_SETPOINT_STANDBY\", Number(event.payload));\n    return Number(event.payload);\n  }\n});\n\nconst setGROUND_SETPOINT_CALENDAR = assign({\n  ground_pid_setpoint: (ctx, evt) => !(ctx.snow || ctx.timed > 1) && ctx.use_calendar && ctx.countdown != undefined && ctx.countdown <= ctx.calendar_trigger ? evt.payload : ctx.ground_pid_setpoint,\n  ground_setpoint_calendar: (_context, event) => {\n    flow.set(\"GROUND_SETPOINT_CALENDAR\", Number(event.payload));\n    return Number(event.payload);\n  }\n});\n\nconst setGROUND_SETPOINT_FROST = assign({\n  ground_setpoint_frost: (_context, event) => event.payload\n});\n\nconst setGROUND_SETPOINT_SNOW_PROB = assign({\n  ground_setpoint_snow_prob: (_context, event) => event.payload\n});\n\nconst setFROSTSIKRING_BAKKE = assign({\n  between_pipes_setpoint: (_context, event) => event.payload\n});\n\nconst setSHUNT_MIN = assign({\n  valve_min: (_context, event) => event.payload\n});\n\nconst setMan = assign({\n  manual: (context, event) => event.payload\n});\n\nconst setSnow = assign({\n  snow: (ctx, evt) => {\n    if (ctx.snow_local === true || ctx.snow_api === true || ctx.snow_SD || evt.payload === true)\n      return true;\n    else return false;\n  }\n});\n\nconst setSnowProb = assign({\n  snow_prob: (ctx, evt) => {\n    if (ctx.snow_prob_local === true || ctx.snow_prob_api === true || ctx.snow_prob_SD || evt.payload === true)\n      return true;\n    else return false;\n  }\n});\n\nconst setFrost = assign({\n  frost: (context, event) => event.payload\n});\n\nconst setT26 = assign({\n  T26: (context, event) => event.payload\n});\n\nconst setT25 = assign({\n  T25: (context, event) => event.payload\n});\n\nconst setGround = assign({\n  ground: (context, event) => event.payload\n});\n\nconst setBetween = assign({\n  between_pipes: (context, event) => event.payload\n});\n\nconst setAIR_SENSOR = assign({\n  air: (ctx, evt) => {\n    if (isNaN(Number(evt.payload)) === false && Number(evt.payload) != 327.67)\n      return ctx.air_windchilled != undefined && ctx.air_windchilled != 'error' && ctx.air_windchilled < Number(evt.payload) ? ctx.air_windchilled : Number(evt.payload);\n    //API backup\n    return ctx.air_api != undefined && ctx.air_api != 327.67 && ctx.air_api != 'error' ? ctx.air_api : 'error';\n  },\n  air_sensor: (ctx, evt) => isNaN(Number(evt.payload)) ? undefined : (Number(evt.payload) === 327.67 ? \"error\" : Number(evt.payload))\n});\n\nconst setAIR_API = assign({\n  air_api: (ctx, evt) => isNaN(Number(evt.payload.air_temperature)) ? undefined : Number(evt.payload.air_temperature),\n  air: (ctx, evt) => {\n    if ((ctx.air_sensor === undefined || ctx.air_sensor === 'error') && (ctx.air_windchilled === undefined || ctx.air_windchilled === 'error'))\n      return isNaN(Number(evt.payload.air_temperature)) ? undefined : Number(evt.payload.air_temperature);\n    //leave as is\n    return ctx.air;\n  }\n});\n\n/**\n * Activities\n */\nif (flow.get(\"T24_FROST\") === undefined)\n  flow.set(\"T24_FROST\", env.get(\"T24_FROST\"));\n\nif (flow.get('LAVENERGY') === undefined)\n  flow.set('LAVENERGY', false);\n\nif (flow.get(\"FROSTSIKRING_BAKKE\") === undefined)\n  flow.set(\"FROSTSIKRING_BAKKE\", env.get(\"FROSTSIKRING_BAKKE\"));\n//GROUND_SETPOINT_SNOW\nif (flow.get(\"GROUND_SETPOINT_SNOW\") === undefined)\n  flow.set(\"GROUND_SETPOINT_SNOW\", env.get(\"GROUND_SETPOINT_SNOW\"));\n\nif (flow.get('ENERGYSAVER') === undefined)\n  flow.set('ENERGYSAVER', {\n    value: 75,\n    fra: '0',\n    til: '5',\n    dager: {\n      mandag: false,\n      tirsdag: false,\n      onsdag: false,\n      torsdag: false,\n      fredag: false,\n      lørdag: false,\n      søndag: false,\n    },\n    enable: false\n  });\n\n/***************************\n * Main machine definition * \n ***************************/\nreturn {\n  machine: {\n    id: 'parent',\n    context: () => ({\n      ID: ID,\n      type: env.get('FUNCTION'),\n      side: env.get('SIDE') || 'SECONDARY',\n      klarsignal: flow.get('KLARSIGNAL'),\n      lavenergy: flow.get('LAVENERGY'),\n      energy_saver: flow.get('ENERGYSAVER'),\n      capacity_power: env.get('CAPACITY_POWER'),\n      valve_prime: 0,\n      valve: 0,\n      pump1: false,\n      pump2: false,\n      manual: false,\n      enabled: flow.get(\"ENABLE\"),\n      air: undefined,\n      air_sensor: undefined,\n      air_windchilled: undefined,\n      ground: undefined,\n      T26: undefined,\n      T27: undefined,\n      T25: undefined,\n      T24: undefined,\n      T23: undefined,\n      snow: false,\n      frost: false,\n      snow_prob: false,\n      lower_limit: Number(env.get(\"SHUNT_MIN\")),\n      upper_limit: 100,\n      setpoint: flow.get(\"SETPOINT\"),\n      setpoint_retur: flow.get(\"SETPOINT_RETUR\"),\n      pid_setpoint: flow.get(\"SETPOINT\"),\n      pid_setpoint_retur: flow.get(\"SETPOINT_RETUR\"),\n      ground_setpoint: flow.get(\"GROUND_SETPOINT_SNOW\"),\n      ground_pid_setpoint: env.get(\"GROUND_SETPOINT_SNOW\"),\n      dryup_ground_setpoint_low: env.get(\"GROUND_SETPOINT_DRYUP_LOW\"),\n      dryup_ground_setpoint_high: env.get(\"GROUND_SETPOINT_DRYUP_HIGH\"),\n      air_start: env.get(\"AIR_START\"),\n      ground_start: env.get(\"GROUND_START\"),\n      standby: flow.get(\"STANDBY\"),\n      standby_ground_setpoint: flow.get(\"GROUND_SETPOINT_STANDBY\"),\n      ground_setpoint_frost: env.get(\"GROUND_SETPOINT_FROST\"),\n      ground_setpoint_snow_prob: env.get(\"GROUND_SETPOINT_SNOW_PROB\"),\n      between_pipes: undefined,\n      between_pipes_setpoint: flow.get(\"FROSTSIKRING_BAKKE\"),\n      frostsikring_bakke: env.get(\"FROSTSIKRING_BAKKE_AKTIV\"),\n      timed: 0,\n      valve_min: env.get(\"SHUNT_MIN\"),\n      valve_max: env.get(\"SHUNT_MAX\"),\n      valve_max_start: env.get(\"SHUNT_MAX_START\"),\n      valve_max_timer: 100,\n      TIMEOUT_DRYUP: env.get(\"TIMEOUT_DRYUP\"),\n      TIMEOUT_FROST: env.get(\"TIMEOUT_FROST\"),\n      TIMEOUT_SNOW_PROB: env.get(\"TIMEOUT_SNOW_PROB\"),\n      mainzone_id: flow.get(\"MAINZONE_ID\"),\n      error: 0,\n      ignore_air: false,\n      ignore_ground: false,\n      startup: false,\n      valve_start: env.get(\"VALVE_START\"),\n      pump_delay: env.get(\"PUMP_DELAY\"),\n      start_delay: env.get(\"START_DELAY\"),\n      STARTUP_TIMEOUT: env.get(\"STARTUP_TIMEOUT\"),\n      total_duration: Number(flow.get(\"TOTAL_DURATION\").toFixed(2)),\n      running_duration: 0,\n      reason: 0,\n      pid: false,\n      pid_start: false,\n      label: env.get(\"LABEL\"),\n      p_start: env.get(\"P_RETUR\"),\n      p: env.get(\"P\"),\n      snow_api: false,\n      snow_local: false,\n      snow_SD: false,\n      snow_prob_api: false,\n      snow_prob_local: false,\n      snow_prob_SD: false,\n      air_stop_max: env.get(\"AIR_STOP_MAX\"),\n      air_stop_min: env.get(\"AIR_STOP_MIN\"),\n      DISPLAY_VALVE_PRIME: env.get(\"DISPLAY_VALVE_PRIME\"),\n      DISPLAY_PUMP_PRIME: env.get(\"DISPLAY_PUMP_PRIME\"),\n      T25_prev: undefined,\n      T25_prev_time: undefined,\n      T25_delta: undefined,\n      //allowed_delta: allowed_delta,\n      T26_start: env.get(\"T26_START\"),\n      pidstart_setpoint: env.get(\"T26_START\"),\n      TIMER_RAISE_SETPOINT: env.get('TIMER_RAISE_SETPOINT'),\n      air_api: undefined,\n      trykk: {},\n      lowest_pressure: undefined,\n      pressure_limit: flow.get(\"PRESSURE_LIMIT\"),\n      dryup_counter: 0,\n      dryup_counter_max: env.get(\"DRYUP_COUNTER_MAX\"),\n      T25_max: env.get(\"T25_MAX\"),\n      last: undefined,\n      last_start: flow.get(\"LAST_START\"),\n      last_stop: flow.get(\"LAST_STOP\"),\n      last_enable: flow.get(\"LAST_ENABLE\"),\n      T24_frost: flow.get(\"T24_FROST\"),\n      power_setpoint: flow.get('POWER_CONTROL') === true ? flow.get(\"MAX_POWER\") : 100000,\n      power_setpoint_snow: flow.get('POWER_CONTROL') === true ? flow.get(\"MAX_POWER_SNOW\") : 100000,\n      power_pid_setpoint: env.get(\"MAX_POWER_START\"),\n      power_setpoint_start: env.get(\"MAX_POWER_START\"),\n      power_total: env.get(\"POWER_TOTAL\"),\n      power_control: flow.get(\"POWER_CONTROL\"),\n      power: undefined,\n      shutdown: false,\n      wind_speed_avg: 0,\n      //Calendar\n      countdown: undefined,\n      use_calendar: flow.get(\"ENABLE_CALENDAR\"),\n      calendar_trigger: flow.get(\"CALENDAR_TRIGGER\"),\n      ground_setpoint_calendar: flow.get(\"GROUND_SETPOINT_CALENDAR\"),\n      SD_PROTOCOL: env.get(\"SD_PROTOCOL\"),\n      n_zones: {},\n    }),\n    initial: 'disabled',\n    on: {\n      SUBZONE: { \n        actions: assign({ \n          n_zones: (ctx, evt) => {\n            const newZones = { ...ctx.n_zones };\n            if (evt.payload.state) {\n              newZones[evt.payload.ID] = true;\n            } else {\n              delete newZones[evt.payload.ID];\n            }\n            return newZones;\n          } \n        }) \n      },\n      TEST_ALARM: { actions: assign({ error: 6 }) },\n      RESET_ALARM: { actions: assign({ error: 0 }) },\n      CALENDAR: { actions: assign({ countdown: (ctx, evt) => evt.payload }) },\n      CALENDAR_TRIGGER: { actions: [(_ctx, evt) => flow.set(\"CALENDAR_TRIGGER\", evt.payload), assign({ calendar_trigger: (_ctx, evt) => evt.payload })] },\n      USE_CALENDAR: { actions: [(_ctx, evt) => flow.set(\"ENABLE_CALENDAR\", evt.payload), assign({ use_calendar: (_ctx, evt) => evt.payload })] },\n      GROUND_SETPOINT_CALENDAR: { actions: 'setGROUND_SETPOINT_CALENDAR' },\n      POWER: { actions: assign({ power: (ctx, evt) => Number(evt.payload) }) },\n      POWER_SETPOINT: { actions: [(ctx, evt) => flow.set(\"MAX_POWER\", Number(evt.payload)), assign({ power_setpoint: (ctx, evt) => Number(evt.payload) })] },\n      POWER_SETPOINT_SNOW: { actions: [(ctx, evt) => flow.set(\"MAX_POWER_SNOW\", Number(evt.payload)), assign({ power_setpoint_snow: (ctx, evt) => Number(evt.payload) })] },\n      POWER_CONTROL: { actions: [(ctx, evt) => flow.set(\"POWER_CONTROL\", Boolean(evt.payload)), assign({ power_control: (ctx, evt) => Boolean(evt.payload) })] },\n      LAST: { actions: assign({ last: (ctx, evt) => isNaN(Number(evt.payload)) ? ctx.last : Number(evt.payload) }) },\n      LAST_START: { actions: [(ctx, evt) => flow.set('LAST_START', isNaN(Number(evt.payload)) ? ctx.last_start : Number(evt.payload)), assign({ last_start: (ctx, evt) => isNaN(Number(evt.payload)) ? ctx.last_start : Number(evt.payload) })] },\n      LAST_STOP: { actions: [(ctx, evt) => flow.set('LAST_STOP', isNaN(Number(evt.payload)) ? ctx.last_stop : Number(evt.payload)), assign({ last_stop: (ctx, evt) => isNaN(Number(evt.payload)) ? ctx.last_stop : Number(evt.payload) })] },\n      LAST_ENABLE: { actions: [(ctx, evt) => flow.set('LAST_ENABLE', typeof Boolean(evt.payload) === 'boolean' ? Boolean(evt.payload) : ctx.last_enable), assign({ last_enable: (ctx, evt) => typeof Boolean(evt.payload) === 'boolean' ? Boolean(evt.payload) : ctx.last_enable })] },\n      ENABLE: { actions: 'setEnable' },\n      TRYKK: {\n        actions: assign({\n          lowest_pressure: (ctx, evt) => (typeof evt.payload === 'object' && 'ai' in evt.payload && 'val' in evt.payload && 'label' in evt.payload && (ctx.lowest_pressure === undefined || ctx.lowest_pressure > evt.payload.val)) ? evt.payload.val : ctx.lowest_pressure,\n          trykk: (ctx, evt) => (typeof evt.payload === 'object' && 'ai' in evt.payload && 'val' in evt.payload && 'label' in evt.payload) ? { ...ctx.trykk, [evt.payload.ai]: evt.payload } : ctx.trykk\n        })\n      },\n      KLAR: { actions: assign({ klarsignal: (ctx, evt) => Boolean(evt.payload) }) },\n      CRITICAL: 'critical',\n      LAVENERGY: { actions: [(ctx, evt) => flow.set('ENERGYSAVER', evt.payload), assign({ energy_saver: (ctx, evt) => evt.payload })] },\n      PRESSURE_LIMIT: { actions: [(ctx, evt) => flow.set('PRESSURE_LIMIT', Number(evt.payload)), assign({ pressure_limit: (ctx, evt) => evt.payload })] },\n      VALVE_MAX: { actions: assign({ upper_limit: (ctx, evt) => Number(evt.payload) }) },\n      T26: {\n        actions: assign({\n          T26: (ctx, evt) => isNaN(Number(evt.payload)) ? undefined : (Number(evt.payload) === 327.67 ? \"error\" : Number(evt.payload)),\n          power: (ctx, evt) => env.get('POWER_CALC') === true && isNaN(Number(ctx.T25)) === false && isNaN(Number(ctx.T26)) === false ? Number((21.4 * 1.053 * 3.54 * (ctx.T25 - Number(evt.payload))).toFixed(2)) : ctx.power\n        })\n      },\n      T25: {\n        actions: assign({\n          T25: (ctx, evt) => isNaN(Number(evt.payload)) ? undefined : (Number(evt.payload) === 327.67 ? \"error\" : Number(evt.payload)),\n          T25_prev: (ctx, evt) => ctx.T25,\n          T25_prev_time: (ctx, evt) => {\n            return Date.now();\n          },\n          T25_delta: (ctx, evt) => {\n            if (ctx.T25_prev_time === undefined || ctx.T25_prev === undefined)\n              return ctx.T25_delta;\n            return (ctx.T25_prev - ctx.T25) / (Date.now() - ctx.T25_prev_time);\n          }\n        })\n      },\n      T27: { actions: assign({ T27: (ctx, evt) => isNaN(Number(evt.payload)) ? undefined : (Number(evt.payload) === 327.67 ? \"error\" : Number(evt.payload)) }) },\n      T24: { actions: assign({ T24: (ctx, evt) => isNaN(Number(evt.payload)) ? undefined : (Number(evt.payload) === 327.67 ? \"error\" : Number(evt.payload)) }) },\n      T23: { actions: assign({ T23: (ctx, evt) => isNaN(Number(evt.payload)) ? undefined : (Number(evt.payload) === 327.67 ? \"error\" : Number(evt.payload)) }) },\n      T24_FROST: { actions: [(_ctx, evt) => flow.set(\"T24_FROST\", Number(evt.payload)), assign({ T24_frost: (ctx, evt) => Number(evt.payload) })] },\n      T25_FROST: { actions: [(_ctx, evt) => flow.set(\"FROSTSIKRING_BAKKE\", Number(evt.payload)), assign({ between_pipes_setpoint: (ctx, evt) => Number(evt.payload) })] },\n      //SNOW: { actions: 'setSnow' },\n      SNOW_API: { actions: [assign({ snow_api: (ctx, evt) => evt.payload }), 'setSnow'] },\n      SNOW_LOCAL: { actions: [assign({ snow_local: (ctx, evt) => evt.payload }), 'setSnow'] },\n      SNOW_SD: { actions: [assign({ snow_SD: (ctx, evt) => evt.payload }), 'setSnow'] },\n      SNOW_PROB_API: { actions: [assign({ snow_prob_api: (ctx, evt) => evt.payload }), 'setSnowProb'] },\n      SNOW_PROB_LOCAL: { actions: [assign({ snow_prob_local: (ctx, evt) => evt.payload }), 'setSnowProb'] },\n      SNOW_PROB_SD: { actions: [assign({ snow_prob_SD: (ctx, evt) => evt.payload }), 'setSnowProb'] },\n      FROST: { actions: 'setFrost' },\n      //SNOW_PROB: { actions: 'setSnowProb' },\n      //T_AIR: { actions: assign({ air: (ctx, evt) => evt.payload === 327.67 ? (ctx.air_api === undefined ? \"error\" : ctx.air_api) : evt.payload }) },\n      T_AIR: { actions: 'setAIR_SENSOR' },\n      AIR_TEMPERATURE_API: { actions: 'setAIR_API' },\n      WIND_SPEED_AVG: { actions: assign({ wind_speed_avg: (ctx, evt) => evt.payload }) },\n      WIND_CHILLED: { actions: assign({ air_windchilled: (ctx, evt) => evt.payload }) },\n      //AIR_TEMPERATURE_API: { actions: assign({ air_api: (ctx, evt) => isNaN(Number(evt.payload.air_temperature)) ? undefined : Number(evt.payload.air_temperature), air: (ctx, evt) => (ctx.air === undefined || ctx.air === 'error') ? (isNaN(Number(evt.payload.air_temperature)) ? undefined : Number(evt.payload.air_temperature)) : ctx.air }) },\n      T_GROUND: { actions: assign({ ground: (ctx, evt) => evt.payload === 327.67 ? \"error\" : Number(evt.payload) }) },\n      BETWEEN_PIPES: { actions: assign({ between_pipes: (ctx, evt) => evt.payload === 327.67 ? \"error\" : Number(evt.payload) }) },\n      GROUND_SETPOINT_SNOW: { actions: [(_, evt) => flow.set(\"GROUND_SETPOINT_SNOW\", Number(evt.payload)), 'setGROUND_SETPOINT_SNOW'] },\n      SETPOINT: { actions: 'setSETPOINT' },\n      SETPOINT_RETUR: { actions: 'setSETPOINT_RETUR' },\n      AIR_START: { actions: 'setAIR_START' },\n      GROUND_START: { actions: 'setGROUND_START' },\n      STANDBY: { actions: 'setSTANDBY' },\n      GROUND_SETPOINT_STANDBY: { actions: 'setGROUND_SETPOINT_STANDBY' },\n      GROUND_SETPOINT_FROST: { actions: 'setGROUND_SETPOINT_FROST' },\n      GROUND_SETPOINT_SNOW_PROB: { actions: 'setGROUND_SETPOINT_SNOW_PROB' },\n      //FROSTSIKRING_BAKKE: { actions: 'setFROSTSIKRING_BAKKE' },\n      SHUNT_MIN: { actions: 'setSHUNT_MIN' },\n      TIMEOUT_DRYUP: { actions: 'setTIMEOUT_DRYUP' },\n      TIMEOUT_FROST: { actions: 'setTIMEOUT_FROST' },\n      TIMEOUT_SNOW_PROB: { actions: 'setTIMEOUT_SNOW_PROB' },\n      VALVE_MAX_TIMER: { actions: assign({ valve_max_timer: (ctx, evt) => evt.payload }) },\n      SET_DURATION: {\n        actions: assign({\n          total_duration: (ctx, evt) => {\n            flow.set(\"TOTAL_DURATION\", evt.payload);\n            return evt.payload;\n          }\n        })\n      }\n      //MAINZONE_ID: { actions: assign({ mainzone_id: 0})}\n    },\n    states: {\n      disabled: {\n        //entry: assign({ valve: 0, pump1: false, pump2: false, valve_prime: 0 }),\n        always: { target: 'enabled', cond: (ctx, evt) => ctx.enabled === true },\n        initial: 'closing',\n        states: {\n          closing: {\n            always: { target: 'closed', cond: (ctx, evt) => (ctx.valve <= 0 && ctx.valve_prime <= 0) || (ctx.valve <= 0 && env.get('DISPLAY_VALVE_PRIME') === false) },\n            after: { 1000: { target: 'closing', actions: assign({ valve: (ctx, _) => ctx.valve - 0.017 <= 0 ? 0 : ctx.valve - 0.017, valve_prime: (ctx, _) => ctx.valve_prime - 0.017 <= 0 ? 0 : ctx.valve_prime - 0.017 }) } }\n          },\n          closed: {\n            entry: assign({ valve: 0, pump1: false, pump2: false, valve_prime: 0 }),\n          },\n        },\n      },\n      enabled: {\n        //exit: assign({ valve: 0, pump1: false, pump2: false, valve_prime: 0 }),\n        always: [\n          { target: '#lavt_trykk', cond: (ctx, evt) => ctx.lowest_pressure != undefined && ctx.lowest_pressure <= ctx.pressure_limit && ctx.manual === false, actions: assign({ error: 7 }) },\n          { target: '#critical', cond: (ctx, evt) => ctx.T25 === \"error\" && ctx.manual === false, actions: assign({ error: 3 }) },\n          { target: '#critical', cond: (ctx, evt) => ctx.T24 === \"error\" && ctx.manual === false, actions: assign({ error: 2 }) },\n          { target: '#overheat', cond: (ctx, evt) => ctx.T25 >= env.get(\"T25_MAX\") && ctx.manual === false, actions: assign({ error: 1 }) },\n          { target: '#critical', cond: (ctx, evt) => ctx.T24 < 1 && ctx.manual === false, actions: assign({ error: 4 }) },\n          { target: '#ground_error', cond: (ctx, evt) => ctx.ground === \"error\" && ctx.manual === false, actions: assign({ error: 5 }) },\n          { target: '#air_error', cond: (ctx, evt) => ctx.air === \"error\" && ctx.ignore_air === false && ctx.manual === false, actions: assign({ error: 6 }) },\n          { target: 'disabled', cond: (ctx, evt) => ctx.enabled === false && ctx.manual === false },\n        ],\n        //type: 'parallel',\n        initial: 'auto',\n        states: {\n          auto: {\n            always: { target: 'manual', cond: (ctx, evt) => ctx.manual === true },\n            initial: 'off',\n            states: {\n              frost_protection: {\n                entry: assign({ valve: 0, pump2: false, pump_delay: 2, pid: false, pid_start: false, start_delay: (ctx, evt) => 2, valve_start: (ctx, evt) => ctx.valve_start - 1 }),\n                after: {\n                  'FROST_DELAY': { target: 'on' }\n                }\n              },\n              off: {\n                id: 'off',\n                always: { target: 'on', cond: 'guardStart' },\n                entry: assign({\n                  error: 0,\n                  valve: 0, pump1: false, pump2: false, valve_prime: 0, valve_start: (ctx, evt) => {\n                    console.log(ctx.ID + \" Off\");\n                    return env.get(\"VALVE_START\");\n                  }, timed: 0, pid: false, pid_start: false\n                }),\n              },\n              on: {\n                initial: 'startup',\n                exit: [\n                  //send({ type: 'STOP'}, { to: 'timer'}), \n                  //stop('child'),\n                  //()=> node.send({ topic: 'THIS', payload: this }),\n                  /*send((context, event) => ({\n                    //...context,\n                    payload: true,\n                    type: 'STOP'\n                  }, { to: 'timer'})),*/\n                  assign({ running_duration: 0, valve_start: () => env.get(\"VALVE_START\"), timed: 0, pid: false, pid_start: false })],\n                invoke: {\n                  id: 'timer',\n                  src: runtime,\n                },\n                entry: assign({\n                  //running_duration: 0,\n                  power_pid_setpoint: env.get(\"MAX_POWER_START\"),\n                  //valve_prime: 100,\n                  startup: false, reason: (ctx, evt) => {\n                    if (ctx.type === 'zerozone') {\n                      console.log(ctx.ID + \" Oppstart nullsone\");\n                      return 0;\n                    }\n                    if (ctx.use_calendar && ctx.countdown != undefined && ctx.countdown <= ctx.calendar_trigger) {\n                      console.log(ctx.ID + \" Oppstart kalender\");\n                      return 11;\n                    }\n                    if (ctx.timed > 1) {\n                      console.log(ctx.ID + \" Oppstart på tid\");\n                      return 4;\n                    }\n                    if (ctx.timed > 0) {\n                      console.log(ctx.ID + \" Oppstart sekvens\");\n                      return 5;\n                    }\n                    if (ctx.snow_local === true) {\n                      console.log(ctx.ID + \" Oppstart snø lokal\");\n                      return 1;\n                    }\n                    if (ctx.frost === true) {\n                      console.log(ctx.ID + \" Oppstart rim\");\n                      return 2;\n                    }\n                    if (ctx.snow_prob_local === true) {\n                      console.log(ctx.ID + \" Oppstart snø sannsynlig lokal\");\n                      return 3;\n                    }\n                    if (ctx.standby === true) {\n                      console.log(ctx.ID + \" Oppstart på Standby\");\n                      return 6;\n                    }\n                    if (ctx.snow_api === true) {\n                      console.log(ctx.ID + \" Oppstart snø værdata\");\n                      return 7;\n                    }\n                    if (ctx.snow_prob_api === true) {\n                      console.log(ctx.ID + \" Oppstart snø sannsynlig værdata\");\n                      return 8;\n                    }\n                    if (ctx.last >= ctx.last_start && ctx.last_enable === true) {\n                      console.log(ctx.ID + \" Oppstart på snølast\");\n                      return 9;\n                    }\n                    if (ctx.frostsikring_bakke === true && ctx.between_pipes < ctx.between_pipes_setpoint) {\n                      console.log(ctx.ID + \" Oppstart på frostsikring mellom rør\");\n                      return 10;\n                    }\n                    else return ctx.reason;\n                  }\n                }),\n                always: [\n                  { target: 'frost_protection', cond: (ctx, evt) => ctx.T24 < ctx.T24_frost },\n                ],\n                on: {\n                  SHUTDOWN: { target: '.shutdown', actions: [(ctx, evt) => node.send({ topic: 'SHUTDOWN', payload: ctx }), assign({ timed: 0 })] },\n                  TOTAL_DURATION: {\n                    actions: assign({\n                      running_duration: (ctx, evt) => evt.payload.running, total_duration: (ctx, evt) => {\n                        //node.send({topic: 'time', payload: evt.payload});\n                        //node.send({ topic: 'time', payload: evt });\n                        return Number(evt.payload.total.toFixed(2));\n                      }\n                    })\n                  }\n                },\n                states: {\n                  shutdown: {\n                    id: 'shutdown',\n                    //exit: assign({ shutdown: false }),                   \n                    always: [\n                      { target: '#after_startup', cond: 'guardStart' },\n                      { target: '#off', cond: (ctx, evt) => ctx.valve <= 1 && ctx.T25 < ctx.setpoint, actions: (ctx, evt) => node.send({ topic: 'shutdown', payload: ctx }) },\n                    ],\n                    initial: 'init',\n                    states: {\n                      init: {\n                        //always: { target: 'closing', cond: (ctx, evt) => ctx.valve <= 1 && ctx.T25 < ctx.setpoint },\n                        after: {\n                          1: { target: 'closing' }\n                        }\n                      },\n                      closing: {\n                        entry: assign({ valve_prime: (ctx, evt) => { console.log(ctx.ID + \": Stenger ned\"); return ctx.valve_prime; }, pump1: false, pump2: true, pid: false, pid_start: false }),\n                        invoke: {\n                          src: coolingMachine,\n                          data: {\n                            valve: (context, event) => context.valve,\n                          },\n                        },\n                        on: {\n                          'valve': { actions: assign({ valve: (ctx, evt) => evt.payload <= 0 ? 0 : evt.payload, valve_prime: (ctx, evt) => evt.valve_prime - 0.017 <= 0 ? 0 : ctx.valve_prime - 0.017 }) }\n                        },\n                      },\n                    }\n                  },\n                  startup: {\n                    id: 'startup',\n                    initial: 'pump_1_start',\n                    entry: assign({\n                      ground_pid_setpoint: (ctx, _evt) => {\n                        if (ctx.use_calendar && ctx.countdown != undefined && ctx.countdown <= ctx.calendar_trigger)\n                          return ctx.ground_setpoint_calendar;\n                        if (ctx.snow === true || ctx.timed > 1)\n                          return ctx.ground_setpoint;\n                        else if (ctx.timed > 0)\n                          return ctx.dryup_ground_setpoint_high;\n                        else if (ctx.snow_prob === true)\n                          return ctx.ground_setpoint_snow_prob;\n                        else if (ctx.frost === true)\n                          return ctx.ground_setpoint_frost + ctx.air;\n                        else if (ctx.standby === true)\n                          return ctx.standby_ground_setpoint;\n                        else return ctx.ground_setpoint;\n                      }\n                    }),\n                    always: [\n                      { target: '#shutdown', cond: 'guardStop' },\n                      { target: '#shutdown', cond: (ctx,_evt)=> ctx.reason === 6 && ctx.standby === false },\n                    ],\n                    states: {                      \n                      pump_1_start: {\n                        entry: assign({ pump1: true, pump2: false, pid_start: false, pid: false, valve: 0 }),\n                        after: {\n                          PUMP_DELAY: [\n                            { target: 'venter_klarsignal' },\n                            //{ target: 'fast_paadrag', actions: assign({ pump2: true, pump1: true }), cond: (ctx, evt) => ctx.side === 'PRIMARY' },\n                            //{ target: 'open_primary_valve', actions: assign({ pump2: true, pump1: true }), cond: (ctx, evt) => ctx.side === 'SECONDARY' || ctx.side === 'BOTH' }\n                          ]\n                          //10000: { target: 'pump_2_start' }\n                        }\n                      },\n                      venter_klarsignal: {\n                        always: { target: 'pump_2_start', cond: (ctx, evt) => ctx.klarsignal === true },\n                      },\n                      pump_2_start: {\n                        always: { target: '#off', cond: (ctx, evt) => ctx.klarsignal === false },\n                        entry: assign({ pump2: true, pump1: true, pid_start: false, pid: false, valve: 0 }),\n                        after: {\n                          1000: [\n                            { target: 'fast_paadrag', cond: (ctx, evt) => ctx.side === 'PRIMARY' },\n                            { target: 'open_primary_valve', cond: (ctx, evt) => ctx.side === 'SECONDARY' || ctx.side === 'BOTH' }\n                          ]\n                        },\n                      },\n                      open_primary_valve: {\n                        entry: assign({ valve_prime: (ctx, _evt) => ctx.valve_prime + 0.5 >= env.get('VALVE_PRIME_START') || env.get('DISPLAY_VALVE_PRIME') === false ? env.get('VALVE_PRIME_START') : ctx.valve_prime + 0.5 }),\n                        always: [{ target: 'fast_paadrag', cond: (ctx, evt) => ctx.valve_prime === env.get('VALVE_PRIME_START') },\n                          { target: '#off', cond: (ctx, evt) => ctx.klarsignal === false }\n                        ],\n                        after: {\n                          1000: { target: 'open_primary_valve' }\n                        }\n                      },\n                      fast_paadrag: {\n                        id: 'fast_paadrag',\n                        always: [{ target: '#regulate_startup', cond: (ctx, evt) => ctx.power != undefined && (ctx.power - 100) >= ctx.power_setpoint_start },\n                          { target: '#off', cond: (ctx, evt) => ctx.klarsignal === false }\n                        ],\n                        entry: assign({ pid: true, lower_limit: (ctx, evt) => Math.min(ctx.valve_start, ctx.valve_max_timer), upper_limit: (ctx, _evt) => Math.min(ctx.valve_start, ctx.valve_max_timer) }),\n                        exit: assign({ pid: true, lower_limit: (ctx, evt) => ctx.valve_min, upper_limit: (ctx, _evt) => Math.min(ctx.valve_max_start, ctx.valve_max_timer) }),\n                        on: {\n                          PID_VALVE: { actions: 'setValvePID' },\n                          VALVE_MAX_TIMER: { actions: assign({ lower_limit: (ctx, evt) => Math.min(ctx.valve_start, evt.payload), upper_limit: (ctx, evt) => Math.min(ctx.valve_start, evt.payload) }) },\n                        },\n                        after: {\n                          START_DELAY: {\n                            target: '#regulate_startup', actions: assign({\n                              ground_pid_setpoint: (ctx, _evt) => {\n                                if (ctx.snow === true || ctx.timed > 1)\n                                  return ctx.ground_setpoint;\n                                else if (ctx.timed > 0)\n                                  return ctx.dryup_ground_setpoint_high;\n                                else if (ctx.snow_prob === true)\n                                  return ctx.ground_setpoint_snow_prob;\n                                else if (ctx.frost === true)\n                                  return ctx.ground_setpoint_frost + ctx.air;\n                                else if (ctx.use_calendar && ctx.countdown != undefined && ctx.countdown <= ctx.calendar_trigger)\n                                  return ctx.ground_setpoint_calendar;\n                                else if (ctx.standby === true)\n                                  return ctx.standby_ground_setpoint;\n                                else return ctx.ground_setpoint;\n                              },\n                              pid_setpoint: (ctx, evt) => {\n                                return ctx.T25 + 1;\n                              },\n\n                            })\n                          }\n                        }\n                      },\n                      regulate: {\n                        id: 'regulate_startup',\n                        entry: assign({\n                          power_pid_setpoint: (ctx, evt) => ctx.power_setpoint_start, pid: true, lower_limit: (ctx, evt) => ctx.valve_min, upper_limit: (ctx, evt) => Math.min(ctx.valve_max_start, ctx.valve_max_timer), TIMER_RAISE_SETPOINT: (ctx, evt) => env.get('TIMER_RAISE_SETPOINT')\n                        }),\n                        exit: assign({\n                          upper_limit: (ctx, evt) => Math.min(ctx.valve_max, ctx.valve_max_timer),\n                          pid_setpoint: (ctx, evt) => {\n                            return ctx.setpoint;\n                          }\n                        }),\n                        always: [\n                          { target: '#off', cond: (ctx, evt) => ctx.klarsignal === false },\n                          { target: 'done', cond: (ctx, evt) => ctx.ground > ctx.ground_setpoint && ctx.timed > 1, actions: assign({ valve: 0 }) },\n                          //{ target: 'done', cond: (ctx, evt) => ctx.ground > ctx.standby_ground_setpoint && ctx.standby === true, actions: assign({ valve: 0 }) },\n                          //{ target: 'done', cond: (ctx, evt) => ctx.T25 >= ctx.setpoint },\n                          //{actions: assign({ground_pid_setpoint: (ctx,_)=> ctx.ground_setpoint_calendar}), cond: (ctx, evt) => ctx.use_calendar && ctx.countdown != undefined && ctx.countdown <= ctx.calendar_trigger},\n                          //{ target: 'done', cond: (ctx, evt) => ctx.T26 != undefined && ctx.T26 >= env.get('T26_START') }\n                        ],//env.get('T26_START')\n                        on: {\n                          PID_VALVE: { actions: ['setValvePID', assign({ground_pid_setpoint: (ctx,_)=> ctx.use_calendar && ctx.countdown != undefined && ctx.countdown <= ctx.calendar_trigger ? ctx.ground_setpoint_calendar : ctx.ground_pid_setpoint})] },\n                          VALVE_MAX_TIMER: { actions: assign({ upper_limit: (ctx, evt) => Math.min(ctx.valve_max_start, evt.payload) }) },\n                        },\n                        after: {\n                          STARTUP_TIMEOUT: { target: 'done' },\n                          //10: 'done',                         \n                        },\n                        initial: 'rising',\n                        states: {\n                          rising: {\n                            after: {\n                              TIMER_RAISE_SETPOINT: {\n                                target: 'rising', cond: (ctx, evt) => ctx.pid_setpoint < ctx.setpoint, actions: assign({\n                                  ground_pid_setpoint: (ctx, _evt) => {\n                                    if (ctx.use_calendar && ctx.countdown != undefined && ctx.countdown <= ctx.calendar_trigger)\n                                      return ctx.ground_setpoint_calendar;\n                                    if (ctx.snow === true || ctx.timed > 1)\n                                      return ctx.ground_setpoint;\n                                    else if (ctx.timed > 0)\n                                      return ctx.dryup_ground_setpoint_high;\n                                    else if (ctx.snow_prob === true)\n                                      return ctx.ground_setpoint_snow_prob;\n                                    else if (ctx.frost === true)\n                                      return ctx.ground_setpoint_frost + ctx.air;\n                                    else if (ctx.standby === true)\n                                      return ctx.standby_ground_setpoint;\n                                    else return ctx.ground_setpoint;\n                                  },\n                                  pid_setpoint: (ctx, evt) => {\n                                    return ctx.pid_setpoint + 1;\n                                  }\n                                })\n                              }\n                            }\n\n                          }\n                        },\n                      },\n                      done: {\n                        type: 'final',\n                      }\n                    },\n                    onDone: [\n                      { target: '#after_startup', actions: assign({ pid_setpoint: (ctx, evt) => ctx.setpoint, valve_prime: (ctx, _) => ctx.side === 'SECONDARY' ? 100 : ctx.valve_prime, pump1: true, pump2: true, pid: true, lower_limit: (ctx, evt) => ctx.valve_min, upper_limit: (ctx, evt) => Math.min(ctx.valve_max, ctx.valve_max_timer) })},\n                    ]\n                  },\n                  init: {\n                    id: 'after_startup',\n                    entry: assign({ pid_setpoint: (ctx, evt) => ctx.setpoint, valve_prime: (ctx, _) => ctx.side === 'SECONDARY' ? 100 : ctx.valve_prime, pump1: true, pump2: true, pid: true, lower_limit: (ctx, evt) => ctx.valve_min, upper_limit: (ctx, evt) => Math.min(ctx.valve_max, ctx.valve_max_timer) }),\n                    always: [\n                      { target: '#off', cond: (ctx, evt) => ctx.klarsignal === false },\n                      { target: '0-Sone', cond: (ctx, evt) => ctx.type === 'zerozone' },\n                      { target: 'timed', cond: (ctx, evt) => ctx.timed > 1 },\n                      { target: 'kalender', cond: (ctx, evt) => ctx.use_calendar && ctx.countdown != undefined && ctx.countdown <= ctx.calendar_trigger },\n                      { target: 'snow', cond: (ctx, evt) => (ctx.snow === true && ctx.air < ctx.air_start) || ctx.snow_api === true },\n                      { target: 'frost', cond: (ctx, evt) => ctx.frost === true && ctx.ground <= ctx.ground_start && ctx.air < ctx.air_start },\n                      { target: 'snow_prob', cond: (ctx, evt) => (ctx.snow_prob === true && ctx.air < ctx.air_start) || ctx.snow_prob_api === true },\n                      { target: 'frost_between_pipes', cond: (ctx, evt) => ctx.frostsikring_bakke === true && ctx.between_pipes < ctx.between_pipes_setpoint },\n                      { target: 'standby', cond: (ctx, evt) => ctx.standby === true },\n                      { target: 'last', cond: (ctx, evt) => ctx.last >= ctx.last_start && ctx.last_enable === true },\n                      { target: 'dryup' },//default                    \n                    ]\n                  },\n                  '0-Sone': {\n                    entry: assign({ gpid: true, pump1: true, pump2: true, pid_setpoint: (ctx, _evt) => ctx.setpoint, power_pid_setpoint: (ctx, evt) => flow.get('POWER_CONTROL') === true ? flow.get(\"MAX_POWER\") : 100000 }),\n\n                    always: [\n                      { target: '#off', cond: (ctx, evt) => ctx.klarsignal === false },\n                      { target: 'shutdown', cond: 'guardStop' },\n                    ],\n                    on: {\n                      POWER_SETPOINT: { actions: [(ctx, evt) => flow.set(\"MAX_POWER\", Number(evt.payload)), assign({ power_setpoint: (ctx, evt) => Number(evt.payload), power_pid_setpoint: (ctx, evt) => flow.get('POWER_CONTROL') === true ? Number(evt.payload) : 100000 })] },\n                      PID_VALVE: { actions: 'setValvePID' },\n                      VALVE_MAX_TIMER: { actions: assign({ upper_limit: (ctx, evt) => Math.min(ctx.valve_max, evt.payload) }) },\n                    },\n\n                  },\n                  kalender: {\n                    always: [\n                      { target: '#off', cond: (ctx, evt) => ctx.klarsignal === false },\n                      { target: 'timed', cond: (ctx, _evt) => ctx.timed > 1 },\n                      { target: 'dryup', cond: (ctx, _evt) => ctx.timed > 0 },\n                      { target: 'shutdown', cond: 'guardStop' },\n                      { target: 'shutdown', cond: (ctx, evt) => !ctx.use_calendar || (ctx.use_calendar && ctx.countdown != undefined && ctx.countdown > ctx.calendar_trigger) },\n                    ],\n                    entry: assign({ ground_pid_setpoint: (ctx, _evt) => ctx.ground_setpoint_calendar, pid: true, pump1: true, pump2: true, pid_setpoint: (ctx, _evt) => ctx.setpoint, power_pid_setpoint: (ctx, evt) => flow.get('POWER_CONTROL') === true ? flow.get(\"MAX_POWER\") : 100000 }),\n                    on: {\n                      POWER_SETPOINT: { actions: [(ctx, evt) => flow.set(\"MAX_POWER\", Number(evt.payload)), assign({ power_setpoint: (ctx, evt) => Number(evt.payload), power_pid_setpoint: (ctx, evt) => flow.get('POWER_CONTROL') === true ? Number(evt.payload) : 100000 })] },\n                      PID_VALVE: { actions: 'setValvePID' },\n                      VALVE_MAX_TIMER: { actions: assign({ upper_limit: (ctx, evt) => Math.min(ctx.valve_max, evt.payload) }) },\n                    },\n                  },\n                  standby: {\n                    id: 'standby',\n                    always: [\n                      { target: '#off', cond: (ctx, evt) => ctx.klarsignal === false },\n                      { target: 'timed', cond: (ctx, _evt) => ctx.timed > 1 },\n                      { target: 'dryup', cond: (ctx, _evt) => ctx.timed > 0 },\n                      { target: 'kalender', cond: (ctx, _evt) => ctx.use_calendar && ctx.countdown != undefined && ctx.countdown <= ctx.calendar_trigger },\n                      { target: 'shutdown', cond: 'guardStop' },\n                      { target: 'snow', cond: (ctx, evt) => (ctx.snow === true && ctx.air < ctx.air_start) || ctx.snow_api === true },\n                      { target: 'snow_prob', cond: (ctx, evt) => (ctx.snow_prob === true && ctx.air < ctx.air_start) || ctx.snow_prob_api === true },\n                      { target: 'shutdown', cond: (ctx, evt) => ctx.standby === false },\n                    ],\n                    entry: assign({ ground_pid_setpoint: (ctx, _evt) => ctx.standby_ground_setpoint, pid: true, pump1: true, pump2: true, pid_setpoint: (ctx, _evt) => ctx.setpoint, power_pid_setpoint: (ctx, evt) => flow.get('POWER_CONTROL') === true ? flow.get(\"MAX_POWER\") : 100000 }),\n                    on: {\n                      POWER_SETPOINT: { actions: [(ctx, evt) => flow.set(\"MAX_POWER\", Number(evt.payload)), assign({ power_setpoint: (ctx, evt) => Number(evt.payload), power_pid_setpoint: (ctx, evt) => flow.get('POWER_CONTROL') === true ? Number(evt.payload) : 100000 })] },\n                      PID_VALVE: { actions: 'setValvePID' },\n                      VALVE_MAX_TIMER: { actions: assign({ upper_limit: (ctx, evt) => Math.min(ctx.valve_max, evt.payload) }) },\n                      GROUND_SETPOINT_STANDBY: { actions: [assign({ ground_pid_setpoint: (_ctx, evt) => Number(evt.payload) }), 'setGROUND_SETPOINT_STANDBY'] },\n                    },\n                  },\n                  timed: {\n                    id: 'timed',\n                    entry: assign({ pump1: true, pump2: true, upper_limit: (ctx, evt) => ctx.valve_max, power_pid_setpoint: (ctx, evt) => flow.get('POWER_CONTROL') === true ? flow.get(\"MAX_POWER_SNOW\") : 100000, ground_pid_setpoint: (ctx, _evt) => ctx.ground_setpoint, pid: true, pid_setpoint: (ctx, evt) => ctx.setpoint, }),\n                    always: [{ target: 'shutdown', cond: (ctx, evt) => ctx.timed === 0 },\n                      { target: '#off', cond: (ctx, evt) => ctx.klarsignal === false },\n                    ],\n                    exit: assign({ timed: 0 }),\n                    after: {\n                      TIMED: { target: 'shutdown' }\n                    },\n                    on: {\n                      POWER_SETPOINT_SNOW: { actions: [(ctx, evt) => flow.set(\"MAX_POWER_SNOW\", Number(evt.payload)), assign({ power_setpoint_snow: (ctx, evt) => Number(evt.payload), power_pid_setpoint: (ctx, evt) => flow.get('POWER_CONTROL') === true ? Number(evt.payload) : 100000 })] },\n                      PID_VALVE: { actions: 'setValvePID' },\n                    },\n                  },\n                  snow: {\n                    id: 'snow',\n                    entry: assign({ pid: true, pid_setpoint: (ctx, evt) => ctx.setpoint, ground_pid_setpoint: (ctx, _evt) => ctx.ground_setpoint, pump1: true, pump2: true, TIMER_RAISE_SETPOINT: 1, power_pid_setpoint: (ctx, evt) => flow.get('POWER_CONTROL') === true ? flow.get(\"MAX_POWER_SNOW\") : 100000 }),\n                    always: [\n                      { target: '#off', cond: (ctx, evt) => ctx.klarsignal === false },\n                      { target: 'timed', cond: (ctx, evt) => ctx.timed > 1 },\n                      { target: '#shutdown', cond: 'guardStop' },\n                      { target: 'dryup', cond: (ctx, evt) => ctx.snow === false }],\n                    on: {\n                      POWER_SETPOINT_SNOW: { actions: [(ctx, evt) => flow.set(\"MAX_POWER_SNOW\", Number(evt.payload)), assign({ power_setpoint_snow: (ctx, evt) => Number(evt.payload), power_pid_setpoint: (ctx, evt) => flow.get('POWER_CONTROL') === true ? Number(evt.payload) : 100000 })] },\n                      PID_VALVE: { actions: 'setValvePID' },\n                      VALVE_MAX_TIMER: { actions: assign({ upper_limit: (ctx, evt) => Math.min(ctx.valve_max, evt.payload) }) },\n                    },\n                  },\n                  dryup: {\n                    id: 'dryup',\n                    entry: assign({ timed: 0, ground_pid_setpoint: (ctx, _evt) => ctx.dryup_ground_setpoint_high, pump1: true, pump2: true, dryup_counter: 0, power_pid_setpoint: (ctx, evt) => flow.get('POWER_CONTROL') === true ? flow.get(\"MAX_POWER_SNOW\") : 100000 }),\n                    exit: assign({ dryup_counter: 0 }),\n                    always: [\n                      { target: '#off', cond: (ctx, evt) => ctx.klarsignal === false },\n                      { target: 'timed', cond: (ctx, evt) => ctx.timed > 1 },\n                      { target: '#shutdown', cond: 'guardStop' },\n                      { target: 'snow', cond: (ctx, evt) => ctx.snow === true },\n                      //{ target: 'snow_prob', cond: (ctx, evt) => ctx.snow_prob === true },\n                      { target: '#shutdown', cond: (ctx, evt) => ctx.dryup_counter >= ctx.dryup_counter_max },\n                      //{ target: 'standby', cond: (ctx, evt) => ctx.standby === true },\n                    ],\n                    after: {\n                      DRYUP: [{ target: '#shutdown', cond: (ctx, evt) => ctx.standby === false },\n                      { target: '#standby', cond: (ctx, evt) => ctx.standby === true },\n                      ]\n                    },\n                    initial: 'heating',\n                    on: {\n                      POWER_SETPOINT_SNOW: { actions: [(ctx, evt) => flow.set(\"MAX_POWER_SNOW\", Number(evt.payload)), assign({ power_setpoint_snow: (ctx, evt) => Number(evt.payload), power_pid_setpoint: (ctx, evt) => flow.get('POWER_CONTROL') === true ? Number(evt.payload) : 100000 })] },\n                    },\n                    states: {\n                      heating: {\n                        always: { target: 'cooling', cond: (ctx, evt) => ctx.ground > ctx.dryup_ground_setpoint_high },\n                        entry: assign({ pid: true, pid_setpoint: (ctx, evt) => ctx.setpoint }),\n                        on: {\n                          PID_VALVE: { actions: 'setValvePID' },\n                          VALVE_MAX_TIMER: { actions: assign({ upper_limit: (ctx, evt) => Math.min(ctx.valve_max, evt.payload) }) },\n                        },\n                      },\n                      cooling: {\n                        always: { target: 'heating', cond: (ctx, evt) => ctx.ground <= ctx.dryup_ground_setpoint_low },\n                        entry: assign({ pid: false, dryup_counter: (ctx, evt) => ctx.dryup_counter + 1 }),\n                        invoke: {\n                          src: coolingMachine,\n                          data: {\n                            valve: (context, event) => context.valve,\n                            valve_min: (context, event) => context.valve_min,\n                          },\n                        },\n                        on: {\n                          'valve': { actions: assign({ valve: (ctx, evt) => evt.payload <= ctx.vale_min ? ctx.valve_min : evt.payload }) },\n                        },\n                      }\n                    },\n                  },\n                  last: {\n                    id: 'last',\n                    entry: assign({ pump1: true, pump2: true, power_pid_setpoint: (ctx, evt) => flow.get('POWER_CONTROL') === true ? flow.get(\"MAX_POWER_SNOW\") : 100000 }),\n                    always: [\n                      { target: '#off', cond: (ctx, evt) => ctx.klarsignal === false },\n                      { target: 'timed', cond: (ctx, evt) => ctx.timed > 1 },\n                      { target: 'snow', cond: (ctx, evt) => ctx.snow === true },\n                      { target: 'standby', cond: (ctx, evt) => ctx.standby === true },\n                      { target: '#shutdown', cond: 'guardStop' },\n                      { target: 'shutdown', cond: (ctx, evt) => ctx.last <= ctx.last_stop || ctx.last_enable === false }\n                    ],\n                    initial: 'heating',\n                    on: {\n                      POWER_SETPOINT_SNOW: { actions: [(ctx, evt) => flow.set(\"MAX_POWER_SNOW\", Number(evt.payload)), assign({ power_setpoint_snow: (ctx, evt) => Number(evt.payload), power_pid_setpoint: (ctx, evt) => flow.get('POWER_CONTROL') === true ? Number(evt.payload) : 100000 })] },\n                    },\n                    states: {\n                      heating: {\n                        always: { target: 'cooling', cond: (ctx, evt) => ctx.ground > ctx.ground_setpoint_frost + ctx.air },\n                        entry: assign({ pid: true, pid_setpoint: (ctx, evt) => ctx.setpoint }),\n                        on: {\n                          PID_VALVE: { actions: 'setValvePID' },\n                          VALVE_MAX_TIMER: { actions: assign({ upper_limit: (ctx, evt) => Math.min(ctx.valve_max, evt.payload) }) },\n                        },\n                      },\n                      cooling: {\n                        always: { target: 'heating', cond: (ctx, evt) => ctx.ground <= ctx.ground_setpoint_frost + ctx.air },\n                        entry: assign({ pid: false }),\n                        invoke: {\n                          src: coolingMachine,\n                          data: {\n                            valve: (context, event) => context.valve,\n                            valve_min: (context, event) => context.valve_min,\n                          },\n                        },\n                        on: {\n                          'valve': { actions: assign({ valve: (ctx, evt) => evt.payload <= ctx.vale_min ? ctx.valve_min : evt.payload }) },\n                        },\n                      },\n                    },\n                  },\n                  frost: {\n                    id: 'frost',\n                    entry: assign({ pump1: true, pump2: true, power_pid_setpoint: (ctx, evt) => flow.get('POWER_CONTROL') === true ? flow.get(\"MAX_POWER\") : 100000, ground_pid_setpoint: (ctx, _evt) => ctx.ground_setpoint_frost + ctx.air, pid: true }),\n                    always: [\n                      { target: '#off', cond: (ctx, evt) => ctx.klarsignal === false },\n                      { target: 'timed', cond: (ctx, evt) => ctx.timed > 1 },\n                      { target: 'snow', cond: (ctx, evt) => (ctx.snow === true && ctx.air < ctx.air_start) || ctx.snow_api === true },\n                      { target: 'standby', cond: (ctx, evt) => ctx.standby === true },\n                      { target: '#shutdown', cond: 'guardStop' },\n                      { target: 'shutdown', cond: (ctx, evt) => ctx.frost === false }\n                    ],\n                    on: {\n                      POWER_SETPOINT: { actions: [(ctx, evt) => flow.set(\"MAX_POWER\", Number(evt.payload)), assign({ power_setpoint: (ctx, evt) => Number(evt.payload), power_pid_setpoint: (ctx, evt) => flow.get('POWER_CONTROL') === true ? Number(evt.payload) : 100000 })] },\n                      PID_VALVE: { actions: 'setValvePID' },\n                      VALVE_MAX_TIMER: { actions: assign({ upper_limit: (ctx, evt) => Math.min(ctx.valve_max, evt.payload) }) },\n                    },\n                    after: {\n                      FROST: { target: 'shutdown' }\n                    },\n                  },\n                  frost_between_pipes: {\n                    id: 'frost_between_pipes',\n                    entry: assign({ pump1: true, pump2: true, power_pid_setpoint: (ctx, evt) => flow.get('POWER_CONTROL') === true ? flow.get(\"MAX_POWER\") : 100000 }),\n                    always: [\n                      { target: '#off', cond: (ctx, evt) => ctx.klarsignal === false },\n                      { target: 'timed', cond: (ctx, evt) => ctx.timed > 1 },\n                      { target: 'snow', cond: (ctx, evt) => ctx.snow === true },\n                      { target: 'standby', cond: (ctx, evt) => ctx.standby === true },\n                      { target: 'shutdown', cond: (ctx, evt) => ctx.between_pipes > ctx.between_pipes_setpoint }\n\n                    ],\n                    entry: assign({ pid: true }),\n                    on: {\n                      PID_VALVE: { actions: 'setValvePID' },\n                      POWER_SETPOINT: { actions: [(ctx, evt) => flow.set(\"MAX_POWER\", Number(evt.payload)), assign({ power_setpoint: (ctx, evt) => Number(evt.payload), power_pid_setpoint: (ctx, evt) => flow.get('POWER_CONTROL') === true ? Number(evt.payload) : 100000 })] },\n                      VALVE_MAX_TIMER: { actions: assign({ upper_limit: (ctx, evt) => Math.min(ctx.valve_max, evt.payload) }) },\n                    },\n                  },\n                  snow_prob: {\n                    id: 'snow_prob',\n                    entry: assign({ ground_pid_setpoint: (ctx, _evt) => ctx.ground_setpoint_snow_prob, pid: true, pid_setpoint: (ctx, evt) => ctx.setpoint, pump1: true, pump2: true, TIMER_RAISE_SETPOINT: () => env.get('TIMER_RAISE_SETPOINT'), power_pid_setpoint: (ctx, evt) => flow.get('POWER_CONTROL') === true ? flow.get(\"MAX_POWER\") : 100000 }),\n                    always: [\n                      { target: '#off', cond: (ctx, evt) => ctx.klarsignal === false },\n                      { target: 'timed', cond: (ctx, evt) => ctx.timed > 1 },\n                      { target: 'snow', cond: (ctx, evt) => (ctx.snow === true && ctx.air < ctx.air_start) || ctx.snow_api === true },\n                      //{ target: 'standby', cond: (ctx, evt) => ctx.standby === true },\n                      { target: 'shutdown', cond: 'guardStop' },\n                      { target: 'shutdown', cond: (ctx, evt) => ctx.snow_prob === false }\n                    ],\n                    on: {\n                      POWER_SETPOINT: { actions: [(ctx, evt) => flow.set(\"MAX_POWER\", Number(evt.payload)), assign({ power_setpoint: (ctx, evt) => Number(evt.payload), power_pid_setpoint: (ctx, evt) => flow.get('POWER_CONTROL') === true ? Number(evt.payload) : 100000 })] },\n                      PID_VALVE: { actions: 'setValvePID' },\n                      VALVE_MAX_TIMER: { actions: assign({ upper_limit: (ctx, evt) => Math.min(ctx.valve_max, evt.payload) }) },\n                    },\n                    after: {\n                      SNOW_PROB: { target: 'shutdown' }\n                    }\n                  },\n                },\n              },\n            },\n          },\n          manual: {\n            id: 'manual',\n            always: { target: 'auto', cond: (ctx, evt) => ctx.manual === false },\n            entry: [(ctx, _) => console.log(ctx.ID + \" Satt i manuell\"), assign({ pid: false, pid_start: false })],\n            on: {\n              VALVE: { actions: 'setValve' },\n              VALVE_PRIME: { actions: assign({ valve_prime: (ctx, evt) => evt.payload }) },\n              PUMP1: { actions: assign({ pump1: (ctx, evt) => evt.payload }) },\n              PUMP2: { actions: assign({ pump2: (ctx, evt) => evt.payload }) },\n            },\n          },\n        },\n        on: {\n          MAN: { actions: 'setMan' },\n          START: { actions: assign({ timed: 1 }) },\n          TIMED: { actions: assign({ timed: (ctx, evt) => evt.payload }) },\n        }\n      },\n      critical: {\n        id: 'critical',\n        entry: assign({ valve: 0, timed: 0, pump1: false, pump2: false }),\n        states: {\n          lavt_trykk: {\n            id: 'lavt_trykk',\n            always: [{ target: '#off', cond: (ctx, evt) => ctx.lowest_pressure != undefined && ctx.lowest_pressure > ctx.pressure_limit, actions: assign({ error: 0 }) },\n            { target: '#manual', cond: (ctx, evt) => ctx.manual === true }\n            ]\n          },\n          glykol_for_varm: {\n            id: 'overheat',\n            always: [{ target: '#off', cond: (ctx, evt) => ctx.T25 != undefined && ctx.T25 != 'error' && ctx.T25 < env.get('T25_MAX') },\n            { target: '#manual', cond: (ctx, evt) => ctx.manual === true }\n            ]\n          }\n        },\n        on: {\n          MAN: { actions: 'setMan' },\n        }\n      },\n      warning: {\n        id: 'warning',\n        entry: assign({ valve: 0, timed: 0, pump1: false, pump2: false }),\n        states: {\n          ground_error: {\n            id: 'ground_error',\n            always: { target: '#off', cond: (ctx, evt) => ctx.ground != \"error\", actions: assign({ error: 0 }) },\n            //exit: assign({ ignore_ground: true })\n          },\n          air_error: {\n            id: 'air_error',\n            always: { target: '#off', cond: (ctx, evt) => ctx.air != \"error\", actions: assign({ error: 0 }) },\n            //exit: assign({ ignore_air: true })\n          }\n        },\n        on: {\n          SUPPRESS_WARNING: 'enabled'\n        }\n      }\n    }\n  },\n  // Configuration containing guards, actions, activities, ...\n  // see above\n  config: {\n    guards: { guardHeatON, guardStart, guardHeatOFF, guardStop },\n    actions: { setAIR_API, setGROUND_SETPOINT_CALENDAR, setAIR_SENSOR, setT25, setTIMEOUT_DRYUP, setSTANDBY, setSETPOINT, setSETPOINT_RETUR, setTIMEOUT_FROST, setValvePID, setTIMEOUT_SNOW_PROB, setSHUNT_MIN, setFROSTSIKRING_BAKKE, setGROUND_SETPOINT_SNOW_PROB, setGROUND_SETPOINT_FROST, setGROUND_SETPOINT_STANDBY, setGROUND_START, setAIR_START, setValve, setEnable, setSnow, setFrost, setBetween, setGround, setSnowProb, setT26, setMan, setGROUND_SETPOINT_SNOW },\n    services: { runtime },\n    activities: {},\n    delays: {\n      'TIMER_RAISE_SETPOINT': (context, event) => {\n        return context.TIMER_RAISE_SETPOINT * 60 * 1000;\n      },\n      'TIMED': (context, event) => {\n        return context.timed * 60 * 60 * 1000;\n      },\n      'STARTUP_TIMEOUT': (context, event) => {\n        return context.STARTUP_TIMEOUT * 60 * 1000;\n      },\n      'FROST_DELAY': (context, event) => {\n        return 5 * 60 * 1000;\n      },\n      'PUMP_DELAY': (context, _event) => {\n        return context.pump_delay * 60 * 1000;//minutes\n      },\n      'START_DELAY': (context, _event) => {\n        return context.start_delay * 60 * 1000;//minutes\n      },\n      'DRYUP': (context, event) => {\n        return context.TIMEOUT_DRYUP * 60 * 60 * 1000;//hours\n      },\n      'FROST': (context, event) => {\n        return context.TIMEOUT_FROST * 60 * 60 * 1000;//hours\n      },\n      'SNOW_PROB': (context, event) => {\n        return context.TIMEOUT_SNOW_PROB * 60 * 60 * 1000;//hours\n      },\n    }\n  },\n  // Define listeners (can be an array of functions)\n  //    Functions get called on every state/context update\n};",
        "noerr": 0,
        "x": 390,
        "y": 80,
        "wires": [
            [
                "3093b912c79e049c"
            ],
            []
        ]
    },
    {
        "id": "e499822be82b1a59",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "MIN_limit",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.lower_limit",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "MIN_limit",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2000,
        "y": 240,
        "wires": [
            [
                "313e3b19f79dce85"
            ]
        ]
    },
    {
        "id": "fdd6392e821ef7e0",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "MAX_limit",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.upper_limit",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "MAX_limit",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2020,
        "y": 280,
        "wires": [
            [
                "313e3b19f79dce85"
            ]
        ]
    },
    {
        "id": "313e3b19f79dce85",
        "type": "rbe",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 2210,
        "y": 280,
        "wires": [
            [
                "75b1f47d21fa34cd"
            ]
        ]
    },
    {
        "id": "e023b16cf61405ff",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "reset",
        "func": "return {reset: true};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 639,
        "y": 530,
        "wires": [
            [
                "a1b7cb6808f63c44"
            ]
        ]
    },
    {
        "id": "2a7c68108906aa32",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "ALARM",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.error",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1120,
        "y": 720,
        "wires": [
            [
                "777359cbea2e118d"
            ]
        ]
    },
    {
        "id": "0760c6bad25a2de2",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "Sett alarm",
        "func": "let id = flow.get('SD_ID');\nglobal.set('ALARM', {\n    ...global.get('ALARM'),\n    [id]: msg.payload\n});\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1530,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "9eba066024d2dac3",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1370,
        "y": 640,
        "wires": [
            [
                "0760c6bad25a2de2"
            ],
            [
                "59858964231b1024"
            ]
        ]
    },
    {
        "id": "59858964231b1024",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "Clear alarm",
        "func": "let id = flow.get('SD_ID');\nlet alarm = global.get('ALARM');\ndelete alarm[id];\nglobal.set('ALARM', alarm);",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1530,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "af56deab57c6872a",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "sd/update",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 890,
        "y": 960,
        "wires": [
            [
                "6a9edee829b03de9"
            ],
            [
                "079334e4fea418ea"
            ]
        ]
    },
    {
        "id": "bcbf235e911bde56",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "STATE",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1860,
        "y": 1120,
        "wires": [
            [
                "f9ca4b657873cfd0",
                "b6f994bd192a29ef"
            ]
        ]
    },
    {
        "id": "f9ca4b657873cfd0",
        "type": "delay",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 2050,
        "y": 1060,
        "wires": [
            [
                "b6f994bd192a29ef"
            ]
        ]
    },
    {
        "id": "b6f994bd192a29ef",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "STATE",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2220,
        "y": 1120,
        "wires": [
            [
                "c122be716c96c101"
            ]
        ]
    },
    {
        "id": "625f9d2c7e225309",
        "type": "injectx",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "VALVE_MAX_TIMER",
        "x": 720,
        "y": 1380,
        "wires": [
            [
                "9d95bcef9f12cc7f"
            ]
        ]
    },
    {
        "id": "2874dfc750153c7f",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "LAVENERGYSTATE",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 210,
        "y": 1440,
        "wires": [
            [
                "c68b1fc5377b00fc"
            ]
        ]
    },
    {
        "id": "c68b1fc5377b00fc",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "LAVENERGY",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "LAVENERGY",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 1440,
        "wires": [
            [
                "5ef48f5efaf18e5a"
            ]
        ]
    },
    {
        "id": "385175f2e9df113e",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "CLEARCRON",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 290,
        "y": 1600,
        "wires": [
            [
                "f657ac3c035c8466"
            ]
        ]
    },
    {
        "id": "f657ac3c035c8466",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "payload.id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "SD_ID",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 446,
        "y": 1632,
        "wires": [
            [
                "9a402ea82cb7c1eb"
            ]
        ]
    },
    {
        "id": "9a402ea82cb7c1eb",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "payload.val",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 1520,
        "wires": [
            [
                "e29c986defd56cb5",
                "a69f34d2cc074db8"
            ]
        ]
    },
    {
        "id": "e29c986defd56cb5",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msgID",
                "pt": "flow",
                "to": "_msgid",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "energysaver",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 1280,
        "wires": [
            [
                "625f9d2c7e225309"
            ]
        ]
    },
    {
        "id": "9d95bcef9f12cc7f",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "_msgid",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "msgID",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 910,
        "y": 1280,
        "wires": [
            [
                "16d534af3aa3e9f2"
            ]
        ]
    },
    {
        "id": "be657fe929954180",
        "type": "link out",
        "z": "d76e8ee33ccc284d",
        "name": "link out 18",
        "mode": "link",
        "links": [
            "2e6ffbd8c8f969e4"
        ],
        "x": 1085,
        "y": 1200,
        "wires": []
    },
    {
        "id": "0c79ea867ac1215d",
        "type": "trigger",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "op1": "",
        "op2": "100",
        "op1type": "pay",
        "op2type": "num",
        "duration": "70",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 2,
        "x": 990,
        "y": 1440,
        "wires": [
            [],
            [
                "a69f34d2cc074db8"
            ]
        ]
    },
    {
        "id": "a69f34d2cc074db8",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "VALVE_MAX_TIMER",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "100",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1160,
        "y": 1480,
        "wires": [
            [
                "be657fe929954180"
            ]
        ]
    },
    {
        "id": "f01e6bafca5642ce",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "Save SingleSone Logg to flow",
        "func": "//if (msg.topic === 'SingleSoneLOGG')\n    flow.set(\"PipesSingleSoneLOGG\", msg.payload)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2430,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "d2170abff75ac598",
        "type": "subflow:3c5166e4c8bbb8a7",
        "z": "d76e8ee33ccc284d",
        "name": "Logg SingleSone",
        "env": [
            {
                "name": "Filter",
                "value": "Oppstart|stenger|manuell",
                "type": "str"
            }
        ],
        "x": 2110,
        "y": 980,
        "wires": [
            [
                "f01e6bafca5642ce"
            ]
        ]
    },
    {
        "id": "da9b88045aca9a25",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "REQSINGLESONELOGG",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1830,
        "y": 920,
        "wires": [
            [
                "edf53cd56babe389"
            ]
        ]
    },
    {
        "id": "edf53cd56babe389",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "For me?",
        "property": "payload.id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "SD_ID",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2060,
        "y": 913,
        "wires": [
            [
                "d2170abff75ac598"
            ]
        ]
    },
    {
        "id": "fc50d233f330e501",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "PRESSURE_LIMIT",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 145,
        "y": 1011,
        "wires": [
            [
                "5ef48f5efaf18e5a"
            ]
        ]
    },
    {
        "id": "6906821cef4cb9f3",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "function 88",
        "func": "if (msg.payload === true) {\n    //msg.topic = \"ENABLE\";\n    msg.payload = 1;\n}\nelse {\n    //msg.topic = \"DISABLE\";\n    msg.payload = 0;\n}\nmsg.topic = \"enable\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2390,
        "y": 420,
        "wires": [
            [
                "75b1f47d21fa34cd"
            ]
        ]
    },
    {
        "id": "75b1f47d21fa34cd",
        "type": "PID Multi",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "enable": "0",
        "disabled_op": "0",
        "configtype": "env",
        "controllers": "PID_CONFIG",
        "x": 2720,
        "y": 360,
        "wires": [
            [
                "98324a00a4ed255b"
            ]
        ]
    },
    {
        "id": "39b60cb919b52bf4",
        "type": "link in",
        "z": "d76e8ee33ccc284d",
        "name": "PID",
        "links": [
            "a6b3316227e207e2"
        ],
        "x": 2645,
        "y": 740,
        "wires": [
            [
                "1c1a2913c0c4591f"
            ]
        ]
    },
    {
        "id": "1c1a2913c0c4591f",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "T26",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "T25",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "POWER",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "T_GROUND",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "T24",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "T27",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 6,
        "x": 2560,
        "y": 540,
        "wires": [
            [
                "75b1f47d21fa34cd"
            ],
            [
                "75b1f47d21fa34cd"
            ],
            [
                "75b1f47d21fa34cd"
            ],
            [
                "dd29cea27e6d78d9"
            ],
            [
                "29391a223ef942bc"
            ],
            [
                "75b1f47d21fa34cd"
            ]
        ]
    },
    {
        "id": "2163a15d83ae2a83",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "Setpoint T26",
        "func": "msg.payload = {topic: 'T26', setpoint: msg.payload};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2390,
        "y": 540,
        "wires": [
            [
                "75b1f47d21fa34cd"
            ]
        ]
    },
    {
        "id": "2ca1e22e32565244",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "Setpoint T25",
        "func": "msg.payload = {topic: 'T25', setpoint: msg.payload};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2400,
        "y": 474,
        "wires": [
            [
                "75b1f47d21fa34cd"
            ]
        ]
    },
    {
        "id": "16d534af3aa3e9f2",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "istype",
                "v": "number",
                "vt": "number"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 950,
        "y": 1340,
        "wires": [
            [
                "0c79ea867ac1215d",
                "7d205a0dd387bc91",
                "be657fe929954180"
            ]
        ]
    },
    {
        "id": "2e173d4473cc4590",
        "type": "inject",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "LAVENERGY",
        "payload": "energysaver",
        "payloadType": "flow",
        "x": 190,
        "y": 1380,
        "wires": [
            [
                "e29c986defd56cb5"
            ]
        ]
    },
    {
        "id": "83917713c13b75fb",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "energysaver",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 1520,
        "wires": [
            [
                "e29c986defd56cb5"
            ]
        ]
    },
    {
        "id": "b849627287c553a4",
        "type": "link in",
        "z": "d76e8ee33ccc284d",
        "name": "link in 24",
        "links": [
            "c3538ae0a77366b7"
        ],
        "x": 885,
        "y": 1600,
        "wires": [
            [
                "0c79ea867ac1215d"
            ]
        ]
    },
    {
        "id": "7d205a0dd387bc91",
        "type": "trigger",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "op1": "",
        "op2": "100",
        "op1type": "pay",
        "op2type": "str",
        "duration": "70",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 2,
        "x": 1130,
        "y": 1560,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "f6970a5ba4f8f80a",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "T24_frost",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.T24_frost",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "SETPOINT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1984,
        "y": 615,
        "wires": [
            [
                "2f28ea49a4710455"
            ]
        ]
    },
    {
        "id": "cd7517d5870406bb",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "Setpoint T24",
        "func": "msg.payload = {topic: 'T24', setpoint: msg.payload};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2370,
        "y": 620,
        "wires": [
            [
                "75b1f47d21fa34cd"
            ]
        ]
    },
    {
        "id": "2f28ea49a4710455",
        "type": "rbe",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 2264,
        "y": 688,
        "wires": [
            [
                "cd7517d5870406bb"
            ]
        ]
    },
    {
        "id": "cf3cf5c3dc3273ca",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "T24_FROST",
        "qos": "2",
        "datatype": "json",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 130,
        "y": 1160,
        "wires": [
            [
                "5ef48f5efaf18e5a"
            ]
        ]
    },
    {
        "id": "02a0f27df94cd906",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "POWER_SETPOINT",
        "qos": "2",
        "datatype": "json",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 120,
        "y": 1280,
        "wires": [
            [
                "5ef48f5efaf18e5a"
            ]
        ]
    },
    {
        "id": "d50abce8c7fd55d4",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "power_pid_setpoint",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.power_pid_setpoint",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "SETPOINT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1990,
        "y": 680,
        "wires": [
            [
                "f8ae3ca39bada98d"
            ]
        ]
    },
    {
        "id": "f8ae3ca39bada98d",
        "type": "rbe",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 2230,
        "y": 740,
        "wires": [
            [
                "cea4a56f40821c62"
            ]
        ]
    },
    {
        "id": "cea4a56f40821c62",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "Setpoint Power",
        "func": "msg.payload = {topic: 'POWER', setpoint: msg.payload};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2420,
        "y": 740,
        "wires": [
            [
                "75b1f47d21fa34cd"
            ]
        ]
    },
    {
        "id": "306d85762c4ba268",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "POWER_CONTROL",
        "qos": "2",
        "datatype": "json",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 141,
        "y": 1527,
        "wires": [
            [
                "5ef48f5efaf18e5a"
            ]
        ]
    },
    {
        "id": "d40191b63082f39d",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "Modify",
        "func": "if(msg.payload.context['total_duration'] != undefined)\n    msg.payload.context['total_duration'] = Math.floor(msg.payload.context['total_duration']);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 570,
        "y": 420,
        "wires": [
            [
                "a114f4aa130c3ccd"
            ]
        ]
    },
    {
        "id": "5fbb18d6efa1ef19",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "POWER_SETPOINT_SNOW",
        "qos": "2",
        "datatype": "json",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 165,
        "y": 1641,
        "wires": [
            [
                "5ef48f5efaf18e5a"
            ]
        ]
    },
    {
        "id": "a114f4aa130c3ccd",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "set topic",
        "func": "let id = flow.get(\"SD_ID\");\nmsg.topic = \"APP_STATE/\" + id;\nmsg.payload = {context: msg.payload.context, state: msg.payload.state};\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 900,
        "y": 700,
        "wires": [
            [
                "5cc0d7c15a5b4185",
                "b0c72ff65ae2481b"
            ]
        ]
    },
    {
        "id": "f1e3e37602982c85",
        "type": "smooth",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "payload",
        "action": "low",
        "count": "250",
        "round": "2",
        "mult": "single",
        "reduce": false,
        "x": 3020,
        "y": 320,
        "wires": [
            [
                "1ada31a8eb77bada"
            ]
        ]
    },
    {
        "id": "c122be716c96c101",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "INIT",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2450,
        "y": 1100,
        "wires": [
            [
                "14b9c3e701b5e33c"
            ]
        ]
    },
    {
        "id": "c56474c9ee321cc3",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "ground_pid_setpoint",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.ground_pid_setpoint",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "SETPOINT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2020,
        "y": 200,
        "wires": [
            [
                "607b9ba48b10571b"
            ]
        ]
    },
    {
        "id": "301d718b76417f0d",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "Setpoint T_GROUND",
        "func": "msg.payload = {topic: 'T_GROUND', setpoint: msg.payload};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2400,
        "y": 220,
        "wires": [
            [
                "75b1f47d21fa34cd"
            ]
        ]
    },
    {
        "id": "607b9ba48b10571b",
        "type": "rbe",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 2210,
        "y": 160,
        "wires": [
            [
                "301d718b76417f0d"
            ]
        ]
    },
    {
        "id": "98324a00a4ed255b",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "SMOOTH",
        "propertyType": "env",
        "rules": [
            {
                "t": "eq",
                "v": "Treg",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Middels",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Responsiv",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 3,
        "x": 2830,
        "y": 240,
        "wires": [
            [
                "f1e3e37602982c85"
            ],
            [
                "10b7d10a0856c94c"
            ],
            [
                "1ada31a8eb77bada"
            ]
        ]
    },
    {
        "id": "10b7d10a0856c94c",
        "type": "smooth",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "payload",
        "action": "low",
        "count": "50",
        "round": "2",
        "mult": "single",
        "reduce": false,
        "x": 3060,
        "y": 380,
        "wires": [
            [
                "1ada31a8eb77bada"
            ]
        ]
    },
    {
        "id": "29391a223ef942bc",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "SIDE",
        "propertyType": "env",
        "rules": [
            {
                "t": "eq",
                "v": "SECONDARY",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "BOTH",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 2810,
        "y": 680,
        "wires": [
            [
                "75b1f47d21fa34cd"
            ],
            [
                "75b1f47d21fa34cd"
            ]
        ]
    },
    {
        "id": "17cc533b1700a262",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "T25_FROST",
        "qos": "2",
        "datatype": "json",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 484,
        "y": 1178,
        "wires": [
            [
                "5ef48f5efaf18e5a"
            ]
        ]
    },
    {
        "id": "dd8a2cac531b71b4",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "GROUND_SETPOINT_SNOW",
        "qos": "2",
        "datatype": "json",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 811,
        "y": 1217,
        "wires": [
            [
                "5ef48f5efaf18e5a"
            ]
        ]
    },
    {
        "id": "ef78976771b0eb56",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "function 111",
        "func": "msg.payload = Number((Number(msg.payload)/100).toFixed(2));\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1410,
        "y": 1040,
        "wires": [
            [
                "f2b5dd8483ab6c91"
            ]
        ]
    },
    {
        "id": "777359cbea2e118d",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "Number",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "istype",
                "v": "number",
                "vt": "number"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1260,
        "y": 680,
        "wires": [
            [
                "9eba066024d2dac3"
            ]
        ]
    },
    {
        "id": "b0c72ff65ae2481b",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "function 112",
        "func": "let val = msg.payload.context;\nval['state'] = msg.payload.state;\nflow.set('TYPE', msg.payload.context.type);\nmsg.payload = val;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1650,
        "y": 740,
        "wires": [
            [
                "ab4b4cb3015b6567"
            ]
        ]
    },
    {
        "id": "ab4b4cb3015b6567",
        "type": "split",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "topic",
        "x": 1810,
        "y": 720,
        "wires": [
            [
                "905f3c2cf438fe09"
            ]
        ]
    },
    {
        "id": "74d77b9ea6ba044e",
        "type": "rbe",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 1930,
        "y": 880,
        "wires": [
            [
                "42b6cbdbd62b68b1"
            ]
        ]
    },
    {
        "id": "926404c554d7879d",
        "type": "link in",
        "z": "d76e8ee33ccc284d",
        "name": "link in 28",
        "links": [
            "c3538ae0a77366b7"
        ],
        "x": 1785,
        "y": 880,
        "wires": [
            [
                "74d77b9ea6ba044e"
            ]
        ]
    },
    {
        "id": "42b6cbdbd62b68b1",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "name": "function 113",
        "func": "let val = msg.payload;\nmsg.payload = {'ID': flow.get('SD_ID'), 'type': env.get('FUNCTION')};\nmsg.payload[msg.topic] = val;\nmsg.payload = {'APP_STATE': msg.payload};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2510,
        "y": 840,
        "wires": [
            [
                "64ec58f509bcf51e"
            ]
        ]
    },
    {
        "id": "711090dac053eb33",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "name": "error code",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.error",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2390,
        "y": 860,
        "wires": [
            [
                "9edc572d452780db"
            ]
        ]
    },
    {
        "id": "9edc572d452780db",
        "type": "rbe",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 2570,
        "y": 880,
        "wires": [
            [
                "797725c2a3868656"
            ]
        ]
    },
    {
        "id": "797725c2a3868656",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "name": "function 114",
        "func": "msg.payload = {'ALARM': {\"ID\": flow.get(\"SD_ID\"), \"code\": msg.payload}};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2750,
        "y": 900,
        "wires": [
            [
                "64ec58f509bcf51e"
            ]
        ]
    },
    {
        "id": "64ec58f509bcf51e",
        "type": "mqtt out",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "name": "",
        "topic": "v1/devices/me/telemetry",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1cf00ad4a64d0402",
        "x": 2830,
        "y": 980,
        "wires": []
    },
    {
        "id": "26c54ecb4eb78758",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "Power",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.power",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "POWER",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2090,
        "y": 120,
        "wires": [
            [
                "6e33f71aa3b958a3"
            ]
        ]
    },
    {
        "id": "8934324f4daf2c1a",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "POWER_CALC",
        "propertyType": "env",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1890,
        "y": 100,
        "wires": [
            [
                "26c54ecb4eb78758"
            ]
        ]
    },
    {
        "id": "6e33f71aa3b958a3",
        "type": "delay",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 2470,
        "y": 140,
        "wires": [
            [
                "75b1f47d21fa34cd"
            ]
        ]
    },
    {
        "id": "df5627812ff27835",
        "type": "link call",
        "z": "d76e8ee33ccc284d",
        "name": "Filter",
        "links": [
            "bf4ca77c29c77f1c"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 490,
        "y": 500,
        "wires": [
            [
                "a6b3316227e207e2",
                "ae6ceb27c62969f9",
                "2f03f61262c880d1"
            ]
        ]
    },
    {
        "id": "730db4671f7c31a2",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "g": "522420d5c80a2e65",
        "name": "",
        "property": "GROUND_CHOICE",
        "propertyType": "env",
        "rules": [
            {
                "t": "eq",
                "v": "MIN",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "MAX",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 3370,
        "y": 600,
        "wires": [
            [
                "5e7bd9e4f3edb769"
            ],
            [
                "04bc84613bef83fc"
            ]
        ]
    },
    {
        "id": "5e7bd9e4f3edb769",
        "type": "smooth",
        "z": "d76e8ee33ccc284d",
        "g": "522420d5c80a2e65",
        "name": "MIN",
        "property": "payload",
        "action": "min",
        "count": "10",
        "round": "1",
        "mult": "multi",
        "reduce": false,
        "x": 3530,
        "y": 580,
        "wires": [
            [
                "777d4de1fba020aa"
            ]
        ]
    },
    {
        "id": "04bc84613bef83fc",
        "type": "smooth",
        "z": "d76e8ee33ccc284d",
        "g": "522420d5c80a2e65",
        "name": "MAX",
        "property": "payload",
        "action": "max",
        "count": "10",
        "round": "1",
        "mult": "multi",
        "reduce": false,
        "x": 3530,
        "y": 640,
        "wires": [
            [
                "777d4de1fba020aa"
            ]
        ]
    },
    {
        "id": "27c341664628ff0f",
        "type": "smooth",
        "z": "d76e8ee33ccc284d",
        "g": "522420d5c80a2e65",
        "name": "",
        "property": "payload",
        "action": "low",
        "count": "10",
        "round": "2",
        "mult": "multi",
        "reduce": false,
        "x": 3860,
        "y": 660,
        "wires": [
            [
                "bc135db5c88862f2"
            ]
        ]
    },
    {
        "id": "bf4ca77c29c77f1c",
        "type": "link in",
        "z": "d76e8ee33ccc284d",
        "g": "522420d5c80a2e65",
        "name": "link in 33",
        "links": [],
        "x": 3275,
        "y": 580,
        "wires": [
            [
                "730db4671f7c31a2"
            ]
        ]
    },
    {
        "id": "bc135db5c88862f2",
        "type": "link out",
        "z": "d76e8ee33ccc284d",
        "g": "522420d5c80a2e65",
        "name": "link out 33",
        "mode": "return",
        "links": [],
        "x": 3965,
        "y": 600,
        "wires": []
    },
    {
        "id": "b9860e88ec37089b",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "T_AIR",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "T_GROUND",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "BETWEEN_PIPES",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "GET_PARENT_ID",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 5,
        "x": 90,
        "y": 500,
        "wires": [
            [
                "df5627812ff27835"
            ],
            [
                "df5627812ff27835"
            ],
            [
                "df5627812ff27835"
            ],
            [
                "a6fe46aceb952583"
            ],
            [
                "ae6ceb27c62969f9",
                "a6b3316227e207e2"
            ]
        ]
    },
    {
        "id": "88fdd0741c98849e",
        "type": "split",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "topic",
        "property": "payload.context",
        "x": 3290,
        "y": 840,
        "wires": [
            [
                "0e73ce2b7b5e7f7d"
            ]
        ]
    },
    {
        "id": "fc6df4022f49522e",
        "type": "rbe",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload.context",
        "topi": "topic",
        "x": 3010,
        "y": 540,
        "wires": [
            [
                "ff28278bf83ecc00"
            ]
        ]
    },
    {
        "id": "c84d26f6ae465f41",
        "type": "link in",
        "z": "d76e8ee33ccc284d",
        "name": "link in 37",
        "links": [
            "c3538ae0a77366b7"
        ],
        "x": 2985,
        "y": 660,
        "wires": [
            [
                "fc6df4022f49522e"
            ]
        ]
    },
    {
        "id": "0e73ce2b7b5e7f7d",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "name": "function 153",
        "func": "msg.type = 'ground_singel';\nlet val = msg.payload.context;\nmsg.payload.context = {'ID': flow.get('SD_ID')};\nmsg.payload.context[msg.topic] = val; \nreturn msg;\n//return {topic: msg.topic, payload: msg.payload, _event: msg._event, parts: msg.parts};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3530,
        "y": 800,
        "wires": [
            [
                "1a2d538312b5eb77"
            ]
        ]
    },
    {
        "id": "1a2d538312b5eb77",
        "type": "link out",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "name": "link out 40",
        "mode": "return",
        "links": [],
        "x": 3815,
        "y": 820,
        "wires": []
    },
    {
        "id": "ce80cc41450f3641",
        "type": "link call",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "name": "",
        "links": [
            "b74b10a30fa0ee24"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1500,
        "y": 420,
        "wires": [
            [
                "fc6df4022f49522e"
            ]
        ]
    },
    {
        "id": "b74b10a30fa0ee24",
        "type": "link in",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "name": "context",
        "links": [],
        "x": 3095,
        "y": 860,
        "wires": [
            [
                "88fdd0741c98849e"
            ]
        ]
    },
    {
        "id": "bba9d6f4b493893f",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "g": "1d4793c27e98be06",
        "name": "",
        "topic": "",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 1,
        "x": 1770,
        "y": 1440,
        "wires": [
            [
                "32b9c79bf07b111d"
            ]
        ]
    },
    {
        "id": "32b9c79bf07b111d",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "g": "1d4793c27e98be06",
        "name": "function 156",
        "func": "msg.topic = msg.topic.split('/')[1];\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1950,
        "y": 1480,
        "wires": [
            [
                "93a6ee17499fd85f"
            ]
        ]
    },
    {
        "id": "886f829995a8fcf4",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "g": "1d4793c27e98be06",
        "name": "MQTT Setup",
        "func": "msg.action = 'subscribe';\nlet id = flow.get(\"SD_ID\");\nmsg.topic = [];\nmsg.topic.push(id + '/#');\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\nconst reg = new Array(35).fill(0);\nflow.set(\"REG\", reg,'memoryOnly');",
        "finalize": "",
        "libs": [],
        "x": 1710,
        "y": 1620,
        "wires": [
            [
                "bba9d6f4b493893f"
            ]
        ]
    },
    {
        "id": "42f33d777f40f0e6",
        "type": "inject",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "g": "1d4793c27e98be06",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1710,
        "y": 1540,
        "wires": [
            [
                "886f829995a8fcf4"
            ]
        ]
    },
    {
        "id": "93a6ee17499fd85f",
        "type": "link out",
        "z": "d76e8ee33ccc284d",
        "g": "1d4793c27e98be06",
        "name": "link out 43",
        "mode": "link",
        "links": [
            "2e6ffbd8c8f969e4"
        ],
        "x": 2095,
        "y": 1460,
        "wires": []
    },
    {
        "id": "693e3d7590bda2b8",
        "type": "link in",
        "z": "d76e8ee33ccc284d",
        "name": "link in 39",
        "links": [
            "c3538ae0a77366b7"
        ],
        "x": 2405,
        "y": 940,
        "wires": [
            [
                "9edc572d452780db"
            ]
        ]
    },
    {
        "id": "faa1df347a959d03",
        "type": "inject",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "props": [
            {
                "p": "reset",
                "v": "true",
                "vt": "bool"
            }
        ],
        "repeat": "600",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2530,
        "y": 1220,
        "wires": [
            [
                "9edc572d452780db"
            ]
        ]
    },
    {
        "id": "d938b58b21a8fecb",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "MQTT Setup",
        "func": "msg.topic = [];\nmsg.action = 'subscribe';\nmsg.topic.push(\"GROUND_SETPOINT_CALENDAR\");\nmsg.topic.push(\"USE_CALENDAR\");\nmsg.topic.push(\"CALENDAR_TRIGGER\");\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\nconst reg = new Array(35).fill(0);\nflow.set(\"REG\", reg,'memoryOnly');",
        "finalize": "",
        "libs": [],
        "x": 672,
        "y": 798,
        "wires": [
            [
                "3646b27fe7efba47"
            ]
        ]
    },
    {
        "id": "3646b27fe7efba47",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "",
        "qos": "2",
        "datatype": "json",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 1,
        "x": 790,
        "y": 840,
        "wires": [
            [
                "5ef48f5efaf18e5a"
            ]
        ]
    },
    {
        "id": "ce9aefc46a7c4488",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "MQTT Setup",
        "func": "msg.action = 'subscribe';\nmsg.topic = [];\nmsg.topic.push(\"TEST_ALARM\");\nmsg.topic.push(\"RESET_ALARM\");\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 750,
        "y": 1700,
        "wires": [
            [
                "698e36e4fb3dcda6"
            ]
        ]
    },
    {
        "id": "cee331089b3fae6e",
        "type": "inject",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "props": [
            {
                "p": "reset",
                "v": "true",
                "vt": "bool"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 710,
        "y": 1580,
        "wires": [
            [
                "ce9aefc46a7c4488"
            ]
        ]
    },
    {
        "id": "698e36e4fb3dcda6",
        "type": "mqtt in",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 1,
        "x": 730,
        "y": 1780,
        "wires": [
            [
                "3eec1814df559ea7",
                "52eeeb64ba80f65d"
            ]
        ]
    },
    {
        "id": "3eec1814df559ea7",
        "type": "debug",
        "z": "d76e8ee33ccc284d",
        "name": "debug 140",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 1760,
        "wires": []
    },
    {
        "id": "efd211f56e016e12",
        "type": "link out",
        "z": "d76e8ee33ccc284d",
        "name": "link out 44",
        "mode": "link",
        "links": [
            "2e6ffbd8c8f969e4"
        ],
        "x": 1125,
        "y": 1700,
        "wires": []
    },
    {
        "id": "52eeeb64ba80f65d",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "SD_ID",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 972,
        "y": 1688,
        "wires": [
            [
                "efd211f56e016e12"
            ]
        ]
    },
    {
        "id": "905f3c2cf438fe09",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "valve",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "pump",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "state",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "snow",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 5,
        "x": 1810,
        "y": 800,
        "wires": [
            [
                "5c954c663d7d7735"
            ],
            [
                "5c954c663d7d7735"
            ],
            [
                "5c954c663d7d7735"
            ],
            [
                "5c954c663d7d7735"
            ],
            [
                "74d77b9ea6ba044e"
            ]
        ]
    },
    {
        "id": "e69494379770ee15",
        "type": "delay",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "pauseType": "queue",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 2250,
        "y": 780,
        "wires": [
            [
                "42b6cbdbd62b68b1"
            ]
        ]
    },
    {
        "id": "5c954c663d7d7735",
        "type": "trigger",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "op1": "",
        "op2": "0",
        "op1type": "pay",
        "op2type": "str",
        "duration": "-5",
        "extend": false,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "topic",
        "topic": "topic",
        "outputs": 1,
        "x": 2040,
        "y": 820,
        "wires": [
            [
                "e69494379770ee15"
            ]
        ]
    },
    {
        "id": "6c8c412d29b37d8d",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "name": "",
        "func": "let name = env.get('LABEL');\nmsg.payload = {'ID': flow.get('SD_ID'), 'type': flow.get('TYPE')};\nmsg.payload['name'] = name + \" #SD_ID \" + flow.get('SD_ID');\nmsg.payload = {'APP_ATTR': msg.payload};\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3580,
        "y": 1160,
        "wires": [
            [
                "24bf6e6c0d2a3264"
            ]
        ]
    },
    {
        "id": "24bf6e6c0d2a3264",
        "type": "mqtt out",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "name": "",
        "topic": "v1/devices/me/attributes",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1cf00ad4a64d0402",
        "x": 3896,
        "y": 1118,
        "wires": []
    },
    {
        "id": "2f55edf2fa75f5d1",
        "type": "inject",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "600",
        "crontab": "",
        "once": true,
        "onceDelay": "3",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 3270,
        "y": 1320,
        "wires": [
            [
                "6c8c412d29b37d8d"
            ]
        ]
    },
    {
        "id": "e30208f00a2a59e9",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2710,
        "y": 140,
        "wires": [
            [
                "d9f79e011f7d92ae"
            ]
        ]
    },
    {
        "id": "d9f79e011f7d92ae",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "reset",
        "func": "return {reset: true, payload: 0};",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2861,
        "y": 141,
        "wires": [
            [
                "f1e3e37602982c85",
                "10b7d10a0856c94c"
            ]
        ]
    },
    {
        "id": "1d987e99c798606e",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "name": "pressure_limit",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.pressure_limit",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "pressure_limit",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1840,
        "y": 1240,
        "wires": [
            [
                "7f54d1e8d2fca682"
            ]
        ]
    },
    {
        "id": "7f54d1e8d2fca682",
        "type": "rbe",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 2062.857177734375,
        "y": 1244.2857666015625,
        "wires": [
            [
                "23b53ab4c8b3cb40"
            ]
        ]
    },
    {
        "id": "41e21bd2178c857d",
        "type": "link in",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "name": "link in 43",
        "links": [
            "c3538ae0a77366b7"
        ],
        "x": 1929.2857666015625,
        "y": 1307.142822265625,
        "wires": [
            [
                "7f54d1e8d2fca682"
            ]
        ]
    },
    {
        "id": "23b53ab4c8b3cb40",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "name": "",
        "func": "let val = msg.payload;\nmsg.payload = {'ID': flow.get('SD_ID'), 'type': flow.get('TYPE')};\nmsg.payload[msg.topic] = val;\nmsg.payload = {'APP_ATTR': msg.payload};\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2280,
        "y": 1340,
        "wires": [
            [
                "c8fe121bebc92bdb"
            ]
        ]
    },
    {
        "id": "c8fe121bebc92bdb",
        "type": "mqtt out",
        "z": "d76e8ee33ccc284d",
        "d": true,
        "name": "",
        "topic": "v1/devices/me/attributes",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1cf00ad4a64d0402",
        "x": 2596,
        "y": 1298,
        "wires": []
    },
    {
        "id": "777d4de1fba020aa",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "g": "522420d5c80a2e65",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "327.67",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 3710,
        "y": 620,
        "wires": [
            [
                "bc135db5c88862f2"
            ],
            [
                "27c341664628ff0f"
            ]
        ]
    },
    {
        "id": "19e2c00080024f08",
        "type": "inject",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "props": [
            {
                "p": "reset",
                "v": "true",
                "vt": "bool"
            }
        ],
        "repeat": "3600",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1830,
        "y": 1040,
        "wires": [
            [
                "74d77b9ea6ba044e"
            ]
        ]
    },
    {
        "id": "dd29cea27e6d78d9",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "FUNCTION",
        "propertyType": "env",
        "rules": [
            {
                "t": "neq",
                "v": "zerozone",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2718,
        "y": 567,
        "wires": [
            [
                "75b1f47d21fa34cd"
            ]
        ]
    },
    {
        "id": "a6fe46aceb952583",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "function 3",
        "func": "msg.topic = 'MAINZONE_ID';\nmsg.payload = flow.get('SD_ID');\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1860,
        "y": 40,
        "wires": [
            [
                "e58d49eebc91e104"
            ]
        ]
    },
    {
        "id": "e58d49eebc91e104",
        "type": "mqtt out",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "",
        "qos": "2",
        "retain": "true",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e649abf8.0e7988",
        "x": 2018,
        "y": 38,
        "wires": []
    },
    {
        "id": "7d488e5529ea0d9f",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "FUNCTION",
        "propertyType": "env",
        "rules": [
            {
                "t": "eq",
                "v": "zerozone",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 930,
        "y": 900,
        "wires": [
            [
                "a1985e8619238f98"
            ],
            [
                "af56deab57c6872a"
            ]
        ]
    },
    {
        "id": "a1985e8619238f98",
        "type": "link out",
        "z": "d76e8ee33ccc284d",
        "name": "link out 1",
        "mode": "link",
        "links": [
            "ee30cc90fa8a36b4"
        ],
        "x": 1045,
        "y": 880,
        "wires": []
    },
    {
        "id": "ee30cc90fa8a36b4",
        "type": "link in",
        "z": "d76e8ee33ccc284d",
        "name": "0-sone",
        "links": [
            "a1985e8619238f98"
        ],
        "x": 1585,
        "y": 1780,
        "wires": [
            [
                "849bd572b1488e26"
            ]
        ]
    },
    {
        "id": "3559342f6396e574",
        "type": "link out",
        "z": "d76e8ee33ccc284d",
        "name": "link out 7",
        "mode": "link",
        "links": [
            "2e6ffbd8c8f969e4"
        ],
        "x": 2625,
        "y": 1940,
        "wires": []
    },
    {
        "id": "69bea2a7db29ed03",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "TOTAL",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "MAN",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "TIMED",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "reset",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "RESET_ALARM",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "STANDBY",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "GROUND_SETPOINT_STANDBY",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "VALVE",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "PUMP2",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "SETPOINT",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "SHUNT_MIN",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 11,
        "x": 2060,
        "y": 1900,
        "wires": [
            [
                "6e058017a6a3fd63"
            ],
            [
                "b798af79933482fa"
            ],
            [
                "e60081cf58a77afd"
            ],
            [
                "d9ca400afc462a8e"
            ],
            [
                "d9ca400afc462a8e"
            ],
            [
                "60e427627f1ba873"
            ],
            [
                "6787f22d7b00d53a"
            ],
            [
                "f094269bf654e6da"
            ],
            [
                "1541bf5cf52d4941"
            ],
            [
                "9e77f1c179155c09"
            ],
            [
                "409c0f53cda6e658"
            ]
        ]
    },
    {
        "id": "6e058017a6a3fd63",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "SET_DURATION",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "SET_DURATION",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2360,
        "y": 1920,
        "wires": [
            [
                "3559342f6396e574"
            ]
        ]
    },
    {
        "id": "e60081cf58a77afd",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "TIMED",
        "func": "let id = flow.get(\"SD_ID\");\nmsg.payload = { id: id, val: msg.payload };\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2350,
        "y": 1980,
        "wires": [
            [
                "2192dbe39fcfc14b"
            ]
        ]
    },
    {
        "id": "60e427627f1ba873",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "STANDBY",
        "func": "var id = flow.get(\"SD_ID\");\nif (msg.payload === 1) {\n    //msg.topic = 'STANDBY';\n    msg.payload = {val: false, id: id};\n}\nelse if (msg.payload === 2) {\n    //msg.topic = 'STANDBY';\n    msg.payload = { val: true, id: id };\n}\nelse msg.payload = { val: false, id: id };\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2120,
        "y": 2200,
        "wires": [
            [
                "2192dbe39fcfc14b"
            ]
        ]
    },
    {
        "id": "9e77f1c179155c09",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "function 11",
        "func": "msg.payload = Number(msg.payload) / 100;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2480,
        "y": 2240,
        "wires": [
            [
                "3559342f6396e574"
            ]
        ]
    },
    {
        "id": "2192dbe39fcfc14b",
        "type": "mqtt out",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e649abf8.0e7988",
        "x": 2740,
        "y": 2080,
        "wires": []
    },
    {
        "id": "558a750cb5760cc1",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "Changed external",
        "func": "let id = flow.get(\"SD_ID\");\nmsg.payload = Number(msg.payload);\nvar r = 0;\nif (msg.topic === \"sd/update/\" + (id * 100 + 1)) {\n        r = 1;\n        msg.topic = 'TOTAL';\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 3)) {\n    if (msg.payload === 2 || msg.payload === 1) {\n        msg.topic = 'MAN';\n    } \n    r = 3;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 5)) {\n    msg.topic = \"TIMED\";\n    r = 5;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 16)) {\n    msg.topic = 'test';\n    if (msg.payload === 2) {\n        msg.topic = 'reset';\n    }\n    r = 16;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 17)) {\n    if (msg.payload === 0)\n        msg.topic = 'RESET_ALARM';\n    r = 17;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 20)) {\n    msg.topic = 'VALVE';\n    r = 20;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 24)) {\n    msg.topic = 'PUMP2';    \n    r = 24;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 25)) {\n    msg.topic = 'SETPOINT';\n    r = 25;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 26)) {\n    msg.topic = 'SETPOINT_RETUR';\n    r = 26;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 27)) {\n    msg.topic = 'SHUNT_MIN';\n    r = 27;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 28)) {\n    msg.topic = 'STANDBY';\n    r = 28;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 29)) {\n    msg.topic = 'GROUND_SETPOINT_STANDBY';\n    r = 29;\n}\nif(r != 0) {\n    let reg = flow.get('REG', 'memoryOnly');\n    reg[r] = msg.payload;\n    //flow.set('REG', reg, 'memoryOnly');\n}\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1900,
        "y": 1760,
        "wires": [
            [
                "69bea2a7db29ed03"
            ]
        ]
    },
    {
        "id": "435573e55dcc3f5b",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "Changed",
        "func": "let id = flow.get(\"SD_ID\");\nmsg.payload = Number(msg.payload);\nvar r = 0;\n\nvar index = msg.topic.split('/');\nif(isNaN(Number(index[2])) === false) {\n    r = Number(index[2]) - id * 100;\n    let reg = flow.get('REG', 'memoryOnly');\n    reg[r] = msg.payload;\n    flow.set('REG', reg, 'memoryOnly');\n\n}  \nmsg.payload = {context: {}};\nmsg.topic === \"state\";\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1690,
        "y": 1920,
        "wires": [
            [
                "fd70a172ac5e9a5e"
            ]
        ]
    },
    {
        "id": "849bd572b1488e26",
        "type": "switch",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "sd/update",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 1680,
        "y": 1760,
        "wires": [
            [
                "558a750cb5760cc1"
            ],
            [
                "435573e55dcc3f5b"
            ]
        ]
    },
    {
        "id": "b798af79933482fa",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "MAN",
        "func": "msg.payload = msg.payload === 2 ? true : false;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2420,
        "y": 1860,
        "wires": [
            [
                "3559342f6396e574"
            ]
        ]
    },
    {
        "id": "77998d0784646134",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "VALVE",
        "func": "let id = flow.get(\"SD_ID\");\nmsg.payload = { id: id, val: msg.payload };\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2460,
        "y": 2060,
        "wires": [
            [
                "2192dbe39fcfc14b"
            ]
        ]
    },
    {
        "id": "f094269bf654e6da",
        "type": "range",
        "z": "d76e8ee33ccc284d",
        "minin": "0",
        "maxin": "10000",
        "minout": "0",
        "maxout": "100",
        "action": "clamp",
        "round": false,
        "property": "payload",
        "name": "",
        "x": 2330,
        "y": 2040,
        "wires": [
            [
                "77998d0784646134"
            ]
        ]
    },
    {
        "id": "1541bf5cf52d4941",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "PUMP2",
        "func": "msg.payload = msg.payload === 2 ? true : false;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2449,
        "y": 2126,
        "wires": [
            [
                "3559342f6396e574"
            ]
        ]
    },
    {
        "id": "409c0f53cda6e658",
        "type": "range",
        "z": "d76e8ee33ccc284d",
        "minin": "0",
        "maxin": "10000",
        "minout": "0",
        "maxout": "100",
        "action": "clamp",
        "round": false,
        "property": "payload",
        "name": "",
        "x": 2710,
        "y": 2220,
        "wires": [
            [
                "3559342f6396e574"
            ]
        ]
    },
    {
        "id": "d9ca400afc462a8e",
        "type": "change",
        "z": "d76e8ee33ccc284d",
        "name": "Append ID",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "SD_ID",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2260,
        "y": 1800,
        "wires": [
            [
                "2192dbe39fcfc14b"
            ]
        ]
    },
    {
        "id": "6787f22d7b00d53a",
        "type": "function",
        "z": "d76e8ee33ccc284d",
        "name": "GROUND_SETPOINT_STANDBY",
        "func": "var id = flow.get(\"SD_ID\");\nmsg.payload = { val: msg.payload/100, id: id };\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2190,
        "y": 2280,
        "wires": [
            [
                "2192dbe39fcfc14b"
            ]
        ]
    },
    {
        "id": "118ba7656edabf74",
        "type": "inject",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "MAINZONE_ID",
        "payload": "SD_ID",
        "payloadType": "flow",
        "x": 230,
        "y": 1900,
        "wires": [
            [
                "1793d44dc6f88b60"
            ]
        ]
    },
    {
        "id": "1793d44dc6f88b60",
        "type": "mqtt out",
        "z": "d76e8ee33ccc284d",
        "name": "",
        "topic": "",
        "qos": "1",
        "retain": "true",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e649abf8.0e7988",
        "x": 570,
        "y": 1880,
        "wires": []
    },
    {
        "id": "4d25fbae6a88ea63",
        "type": "link in",
        "z": "d76e8ee33ccc284d",
        "name": "user",
        "links": [
            "fd70a172ac5e9a5e"
        ],
        "x": 1595,
        "y": 360,
        "wires": [
            [
                "ff28278bf83ecc00"
            ]
        ]
    },
    {
        "id": "fd70a172ac5e9a5e",
        "type": "link out",
        "z": "d76e8ee33ccc284d",
        "name": "link out 8",
        "mode": "link",
        "links": [
            "4d25fbae6a88ea63"
        ],
        "x": 1815,
        "y": 2000,
        "wires": []
    },
    {
        "id": "522420d5c80a2e65",
        "type": "group",
        "z": "d76e8ee33ccc284d",
        "name": "Filter Input",
        "style": {
            "label": true
        },
        "nodes": [
            "730db4671f7c31a2",
            "5e7bd9e4f3edb769",
            "04bc84613bef83fc",
            "27c341664628ff0f",
            "bf4ca77c29c77f1c",
            "bc135db5c88862f2",
            "777d4de1fba020aa"
        ],
        "x": 3234,
        "y": 539,
        "w": 772,
        "h": 162
    },
    {
        "id": "1d4793c27e98be06",
        "type": "group",
        "z": "d76e8ee33ccc284d",
        "name": "Shared Attributes",
        "style": {
            "label": true
        },
        "nodes": [
            "bba9d6f4b493893f",
            "32b9c79bf07b111d",
            "886f829995a8fcf4",
            "42f33d777f40f0e6",
            "93a6ee17499fd85f"
        ],
        "x": 1594,
        "y": 1399,
        "w": 542,
        "h": 262
    },
    {
        "id": "21c7cfcd902495f3",
        "type": "subflow",
        "name": "SI 0-10V",
        "info": "",
        "category": "Sensor Interface",
        "in": [
            {
                "x": 50,
                "y": 30,
                "wires": [
                    {
                        "id": "d915c92178c8136e"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1240,
                "y": 260,
                "wires": [
                    {
                        "id": "059d8b9bb2bc342c",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "Buss",
                "type": "str",
                "value": "COM3",
                "ui": {
                    "type": "select",
                    "opts": {
                        "opts": [
                            {
                                "l": {
                                    "en-US": "COM3"
                                },
                                "v": "COM3"
                            },
                            {
                                "l": {
                                    "en-US": "COM4"
                                },
                                "v": "COM4"
                            }
                        ]
                    }
                }
            },
            {
                "name": "Addr",
                "type": "num",
                "value": "11"
            },
            {
                "name": "AO",
                "type": "str",
                "value": "A",
                "ui": {
                    "type": "select",
                    "opts": {
                        "opts": [
                            {
                                "l": {
                                    "en-US": "A"
                                },
                                "v": "A"
                            },
                            {
                                "l": {
                                    "en-US": "B"
                                },
                                "v": "B"
                            },
                            {
                                "l": {
                                    "en-US": "C"
                                },
                                "v": "C"
                            },
                            {
                                "l": {
                                    "en-US": "D"
                                },
                                "v": "D"
                            }
                        ]
                    }
                }
            },
            {
                "name": "TIMEOUT",
                "type": "num",
                "value": "15"
            }
        ],
        "meta": {},
        "color": "#A6BBCF",
        "icon": "node-red/status.svg",
        "status": {
            "x": 2180,
            "y": 260,
            "wires": [
                {
                    "id": "4643332889310846",
                    "port": 0
                },
                {
                    "id": "7b316277b664362d",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "a3b93357395cca1a",
        "type": "function",
        "z": "21c7cfcd902495f3",
        "name": "",
        "func": "let buss = env.get(\"Buss\");\nlet addr = env.get(\"Addr\");\nlet port = env.get(\"AO\");\nmsg.topic = \"set/SI/\" + buss + \"/\" + addr + \"/\" + port + \"/\" + msg.payload + \"/AOV\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 240,
        "wires": [
            [
                "059d8b9bb2bc342c"
            ]
        ]
    },
    {
        "id": "cd7f6aeabcf11fa2",
        "type": "range",
        "z": "21c7cfcd902495f3",
        "minin": "0",
        "maxin": "100",
        "minout": "0",
        "maxout": "10000",
        "action": "scale",
        "round": true,
        "property": "payload",
        "name": "",
        "x": 220,
        "y": 240,
        "wires": [
            [
                "a3b93357395cca1a"
            ]
        ]
    },
    {
        "id": "998d56cc10b3f64a",
        "type": "function",
        "z": "21c7cfcd902495f3",
        "name": "",
        "func": "msg.payload = Number(msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 280,
        "y": 160,
        "wires": [
            [
                "cd7f6aeabcf11fa2",
                "1001a7a5497ba5fc"
            ]
        ]
    },
    {
        "id": "c45edbf2414887cd",
        "type": "mqtt out",
        "z": "21c7cfcd902495f3",
        "name": "",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e649abf8.0e7988",
        "x": 1990,
        "y": 180,
        "wires": []
    },
    {
        "id": "40b71360db0a91ef",
        "type": "inject",
        "z": "21c7cfcd902495f3",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "date",
        "x": 150,
        "y": 480,
        "wires": [
            [
                "fdd65748e78dde53"
            ]
        ]
    },
    {
        "id": "bb4d6a4270ef3cc9",
        "type": "mqtt in",
        "z": "21c7cfcd902495f3",
        "name": "",
        "topic": "AO",
        "qos": "2",
        "datatype": "json",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 170,
        "y": 580,
        "wires": [
            [
                "75fe7e0913e5b848"
            ]
        ]
    },
    {
        "id": "b1b75d47f3d502c6",
        "type": "switch",
        "z": "21c7cfcd902495f3",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "payload.id = $env(\"Addr\") and payload.port = $env(\"AO\") and payload.buss = $env(\"Buss\")",
                "vt": "jsonata"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 170,
        "y": 720,
        "wires": [
            [
                "574886914e7fa09b",
                "1a2613393e42f50c"
            ]
        ]
    },
    {
        "id": "574886914e7fa09b",
        "type": "change",
        "z": "21c7cfcd902495f3",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.val",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 780,
        "wires": [
            [
                "2b5ea985ad6568f6"
            ]
        ]
    },
    {
        "id": "059d8b9bb2bc342c",
        "type": "trigger",
        "z": "21c7cfcd902495f3",
        "name": "",
        "op1": "",
        "op2": "0",
        "op1type": "pay",
        "op2type": "str",
        "duration": "-4",
        "extend": false,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 870,
        "y": 240,
        "wires": [
            [
                "888025a178963392",
                "595e7f9b97999b2e"
            ]
        ]
    },
    {
        "id": "1cd6ed2de10ee907",
        "type": "change",
        "z": "21c7cfcd902495f3",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 640,
        "y": 520,
        "wires": [
            [
                "059d8b9bb2bc342c",
                "fdd65748e78dde53",
                "d915c92178c8136e",
                "595e7f9b97999b2e"
            ]
        ]
    },
    {
        "id": "99bce228a29bbd93",
        "type": "mqtt in",
        "z": "21c7cfcd902495f3",
        "name": "",
        "topic": "INIT",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 390,
        "y": 520,
        "wires": [
            [
                "1cd6ed2de10ee907",
                "fdd65748e78dde53"
            ]
        ]
    },
    {
        "id": "fdd65748e78dde53",
        "type": "change",
        "z": "21c7cfcd902495f3",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 200,
        "y": 360,
        "wires": [
            [
                "cd7f6aeabcf11fa2"
            ]
        ]
    },
    {
        "id": "9d8668264f0d26a3",
        "type": "mqtt in",
        "z": "21c7cfcd902495f3",
        "name": "",
        "topic": "AO_TIMEOUT",
        "qos": "2",
        "datatype": "json",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 980,
        "y": 460,
        "wires": [
            [
                "110e4c90de224c18"
            ]
        ]
    },
    {
        "id": "110e4c90de224c18",
        "type": "switch",
        "z": "21c7cfcd902495f3",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "payload.id = $env(\"Addr\") and payload.port = $env(\"AO\") and payload.buss = $env(\"Buss\")",
                "vt": "jsonata"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1100,
        "y": 540,
        "wires": [
            [
                "2315de569518b76a"
            ]
        ]
    },
    {
        "id": "888025a178963392",
        "type": "change",
        "z": "21c7cfcd902495f3",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "#:(memoryOnly)::ao",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1150,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "2315de569518b76a",
        "type": "change",
        "z": "21c7cfcd902495f3",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "#:(memoryOnly)::ao",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1240,
        "y": 480,
        "wires": [
            [
                "a3b93357395cca1a"
            ]
        ]
    },
    {
        "id": "595e7f9b97999b2e",
        "type": "delay",
        "z": "21c7cfcd902495f3",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "10",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 1140,
        "y": 120,
        "wires": [
            [
                "ca01f9176e0e31ef"
            ]
        ]
    },
    {
        "id": "d915c92178c8136e",
        "type": "rbe",
        "z": "21c7cfcd902495f3",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 170,
        "y": 100,
        "wires": [
            [
                "998d56cc10b3f64a"
            ]
        ]
    },
    {
        "id": "ca01f9176e0e31ef",
        "type": "change",
        "z": "21c7cfcd902495f3",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "#:(memoryOnly)::ao",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1380,
        "y": 100,
        "wires": [
            [
                "cbb9ca528dc657be"
            ]
        ]
    },
    {
        "id": "75fe7e0913e5b848",
        "type": "function",
        "z": "21c7cfcd902495f3",
        "name": "function 41",
        "func": "msg.payload.id = Number(msg.payload.id);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 210,
        "y": 640,
        "wires": [
            [
                "b1b75d47f3d502c6"
            ]
        ]
    },
    {
        "id": "563994d5d1711319",
        "type": "join",
        "z": "21c7cfcd902495f3",
        "name": "",
        "mode": "custom",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": true,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 550,
        "y": 740,
        "wires": [
            [
                "4643332889310846"
            ]
        ]
    },
    {
        "id": "1001a7a5497ba5fc",
        "type": "change",
        "z": "21c7cfcd902495f3",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "try",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 430,
        "y": 600,
        "wires": [
            [
                "563994d5d1711319"
            ]
        ]
    },
    {
        "id": "2b5ea985ad6568f6",
        "type": "change",
        "z": "21c7cfcd902495f3",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "get",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 370,
        "y": 920,
        "wires": [
            [
                "563994d5d1711319"
            ]
        ]
    },
    {
        "id": "4643332889310846",
        "type": "function",
        "z": "21c7cfcd902495f3",
        "name": "function 42",
        "func": "msg.payload = [msg.payload.try, msg.payload.get];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 750,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "cbb9ca528dc657be",
        "type": "switch",
        "z": "21c7cfcd902495f3",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "INIT",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1550,
        "y": 100,
        "wires": [
            [
                "de8e58b69e2d6c45"
            ]
        ]
    },
    {
        "id": "de8e58b69e2d6c45",
        "type": "switch",
        "z": "21c7cfcd902495f3",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "INIT",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1770,
        "y": 140,
        "wires": [
            [
                "c45edbf2414887cd"
            ]
        ]
    },
    {
        "id": "1a2613393e42f50c",
        "type": "trigger",
        "z": "21c7cfcd902495f3",
        "name": "",
        "op1": "",
        "op2": "Kommunikasjonsfeil",
        "op1type": "pay",
        "op2type": "str",
        "duration": "15",
        "extend": true,
        "overrideDelay": true,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 2,
        "x": 1690,
        "y": 620,
        "wires": [
            [],
            [
                "7b316277b664362d"
            ]
        ]
    },
    {
        "id": "a464e6a189d127b2",
        "type": "function",
        "z": "21c7cfcd902495f3",
        "name": "delay",
        "func": "let delay = env.get(\"TIMEOUT\");\nmsg.delay = Number(delay) * 1000 * 60;\nmsg.topic = \"T_AIR\";\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1610,
        "y": 860,
        "wires": [
            [
                "1a2613393e42f50c"
            ]
        ]
    },
    {
        "id": "7b316277b664362d",
        "type": "function",
        "z": "21c7cfcd902495f3",
        "name": "Set Alarm",
        "func": "let buss = env.get(\"Buss\");\nlet addr = env.get(\"Addr\");\nlet port = env.get(\"AO\");\nmsg.topic = buss + \"/\" + addr + \"/\" + port + \"/analog\";\nglobal.set('ALARM', {\n        ...global.get('ALARM'),\n        [msg.topic]: 'SI 0-10V'\n});\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1969,
        "y": 508,
        "wires": [
            []
        ]
    },
    {
        "id": "4a1c16fae7555df6",
        "type": "inject",
        "z": "21c7cfcd902495f3",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payloadType": "date",
        "x": 1848,
        "y": 794,
        "wires": [
            [
                "a464e6a189d127b2"
            ]
        ]
    },
    {
        "id": "c799b015.2d937",
        "type": "subflow",
        "name": "T Overflate",
        "info": "",
        "category": "AC5000",
        "in": [],
        "out": [
            {
                "x": 1060,
                "y": 140,
                "wires": [
                    {
                        "id": "530e77a33712db3a",
                        "port": 0
                    },
                    {
                        "id": "e8fb2673fa267f22",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "Buss",
                "type": "str",
                "value": "COM3",
                "ui": {
                    "type": "select",
                    "opts": {
                        "opts": [
                            {
                                "l": {
                                    "en-US": "COM3"
                                },
                                "v": "COM3"
                            },
                            {
                                "l": {
                                    "en-US": "COM4"
                                },
                                "v": "COM4"
                            }
                        ]
                    }
                }
            },
            {
                "name": "Addr",
                "type": "num",
                "value": "5"
            }
        ],
        "meta": {},
        "color": "#3FADB5",
        "icon": "font-awesome/fa-thermometer-three-quarters",
        "status": {
            "x": 620,
            "y": 40,
            "wires": [
                {
                    "id": "e8fb2673fa267f22",
                    "port": 0
                },
                {
                    "id": "b614af79bd2fd46a",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "e8fb2673fa267f22",
        "type": "function",
        "z": "c799b015.2d937",
        "name": "",
        "func": "msg.topic = \"T_GROUND\";\nmsg.payload = Number(msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 40,
        "wires": [
            [
                "6524110d24c3cd7b",
                "d81ac46418a95998",
                "52eec8a92caaf37d"
            ]
        ]
    },
    {
        "id": "23ca3505bd3cefed",
        "type": "mqtt in",
        "z": "c799b015.2d937",
        "name": "",
        "topic": "#",
        "qos": "2",
        "datatype": "utf8",
        "broker": "e649abf8.0e7988",
        "inputs": 0,
        "x": 110,
        "y": 20,
        "wires": [
            [
                "eada8274c26d9f21"
            ]
        ]
    },
    {
        "id": "eada8274c26d9f21",
        "type": "switch",
        "z": "c799b015.2d937",
        "name": "Myself",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "topic = $join([$env(\"Buss\"),'/',$formatNumber($env(\"Addr\"),\"1\"),'/Bakke'])",
                "vt": "jsonata"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 130,
        "y": 80,
        "wires": [
            [
                "e8fb2673fa267f22"
            ]
        ]
    },
    {
        "id": "9cf2660805ae0fad",
        "type": "mqtt in",
        "z": "c799b015.2d937",
        "name": "",
        "topic": "INIT",
        "qos": "2",
        "datatype": "utf8",
        "broker": "e649abf8.0e7988",
        "inputs": 0,
        "x": 110,
        "y": 200,
        "wires": [
            [
                "5a7e2c494ae099e1"
            ]
        ]
    },
    {
        "id": "f3be72c882bf476a",
        "type": "mqtt out",
        "z": "c799b015.2d937",
        "name": "",
        "topic": "",
        "qos": "",
        "retain": "",
        "broker": "e649abf8.0e7988",
        "x": 410,
        "y": 500,
        "wires": []
    },
    {
        "id": "5a7e2c494ae099e1",
        "type": "function",
        "z": "c799b015.2d937",
        "name": "",
        "func": "let buss = env.get(\"Buss\");\nlet addr = env.get(\"Addr\");\nmsg.topic = \"set/Bakke/\" + buss + \"/\" + addr + \"/Init\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 260,
        "y": 320,
        "wires": [
            [
                "d8315ccae88aff98"
            ]
        ]
    },
    {
        "id": "b77c998bd0ae2289",
        "type": "mqtt out",
        "z": "c799b015.2d937",
        "name": "",
        "topic": "ADD_SENSOR",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e649abf8.0e7988",
        "x": 880,
        "y": 580,
        "wires": []
    },
    {
        "id": "4648702c1f02a4b3",
        "type": "function",
        "z": "c799b015.2d937",
        "name": "",
        "func": "let type = \"Overflate\";\nmsg.payload = {type: type, \"Addr\": env.get(\"Buss\") + \"/\" + env.get(\"Addr\")};\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 560,
        "wires": [
            [
                "b77c998bd0ae2289"
            ]
        ]
    },
    {
        "id": "7ec45fb37edad1e3",
        "type": "mqtt in",
        "z": "c799b015.2d937",
        "name": "",
        "topic": "READY_FOR_CONTENT",
        "qos": "2",
        "datatype": "auto",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 301,
        "y": 572,
        "wires": [
            [
                "4648702c1f02a4b3"
            ]
        ]
    },
    {
        "id": "decd2e3e7b1c5a85",
        "type": "inject",
        "z": "c799b015.2d937",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payloadType": "date",
        "x": 310,
        "y": 700,
        "wires": [
            [
                "4648702c1f02a4b3"
            ]
        ]
    },
    {
        "id": "6524110d24c3cd7b",
        "type": "function",
        "z": "c799b015.2d937",
        "name": "",
        "func": "let type = \"Overflate\";\nmsg.payload = {val: msg.payload, type: type, \"Addr\": env.get(\"Buss\") + \"/\" + env.get(\"Addr\")};\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 520,
        "wires": [
            [
                "b77c998bd0ae2289"
            ]
        ]
    },
    {
        "id": "a5482623ed28ca69",
        "type": "inject",
        "z": "c799b015.2d937",
        "d": true,
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "20",
        "payloadType": "str",
        "x": 270,
        "y": 180,
        "wires": [
            [
                "e8fb2673fa267f22"
            ]
        ]
    },
    {
        "id": "d81ac46418a95998",
        "type": "trigger",
        "z": "c799b015.2d937",
        "name": "",
        "op1": "",
        "op2": "0",
        "op1type": "pay",
        "op2type": "str",
        "duration": "10",
        "extend": true,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 2,
        "x": 770,
        "y": 180,
        "wires": [
            [],
            [
                "530e77a33712db3a"
            ]
        ]
    },
    {
        "id": "530e77a33712db3a",
        "type": "change",
        "z": "c799b015.2d937",
        "name": "Error",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "327.67",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 240,
        "wires": [
            [
                "b614af79bd2fd46a"
            ]
        ]
    },
    {
        "id": "8c57a6be17bc191e",
        "type": "mqtt out",
        "z": "c799b015.2d937",
        "name": "",
        "topic": "KOMMFEIL",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e649abf8.0e7988",
        "x": 1310,
        "y": 320,
        "wires": []
    },
    {
        "id": "b614af79bd2fd46a",
        "type": "change",
        "z": "c799b015.2d937",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "topic",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1120,
        "y": 400,
        "wires": [
            [
                "8c57a6be17bc191e",
                "6bf09a216cee615b",
                "56e81d4c77260b7b"
            ]
        ]
    },
    {
        "id": "d8315ccae88aff98",
        "type": "switch",
        "z": "c799b015.2d937",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "INIT",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 350,
        "y": 420,
        "wires": [
            [
                "f3be72c882bf476a"
            ]
        ]
    },
    {
        "id": "dff16d2743a079d1",
        "type": "inject",
        "z": "c799b015.2d937",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payloadType": "date",
        "x": 650,
        "y": 400,
        "wires": [
            [
                "d80f8810fa23a33c"
            ]
        ]
    },
    {
        "id": "d80f8810fa23a33c",
        "type": "function",
        "z": "c799b015.2d937",
        "name": "delay",
        "func": "let delay = 15;\nmsg.delay = Number(delay) * 1000 * 60;\nmsg.topic = \"T_AIR\";\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 300,
        "wires": [
            [
                "d81ac46418a95998"
            ]
        ]
    },
    {
        "id": "6bf09a216cee615b",
        "type": "debug",
        "z": "c799b015.2d937",
        "name": "debug 138",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1270,
        "y": 180,
        "wires": []
    },
    {
        "id": "56e81d4c77260b7b",
        "type": "function",
        "z": "c799b015.2d937",
        "name": "Sett alarm-relè",
        "func": "let buss = env.get(\"Buss\");\nlet addr = env.get(\"Addr\");\nmsg.topic = \"overflate/\" + buss + \"/\" + addr;\n\nglobal.set('ALARM', {\n        ...global.get('ALARM'),\n        [msg.topic]: 'Kommunikasjonsfeil'\n});",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1364,
        "y": 103,
        "wires": []
    },
    {
        "id": "52eec8a92caaf37d",
        "type": "function",
        "z": "c799b015.2d937",
        "name": "reset alarm",
        "func": "if(msg.payload === 327.67)\nreturn null;\nlet alarm = global.get('ALARM');\nlet buss = env.get(\"Buss\");\nlet addr = env.get(\"Addr\");\nmsg.topic = \"overflate/\" + buss + \"/\" + addr;\ndelete alarm[msg.topic];\nglobal.set('ALARM', alarm); \nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1210,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "757348a8.876718",
        "type": "ui_group",
        "z": "c799b015.2d937",
        "name": "Temperaturer",
        "tab": "1fa6cb55.482f65",
        "order": 4,
        "disp": false,
        "width": "6",
        "collapse": false
    },
    {
        "id": "5d34e663f4a3f527",
        "type": "subflow",
        "name": "Værdata",
        "info": "",
        "category": "AC5000",
        "in": [],
        "out": [
            {
                "x": 1540,
                "y": 220,
                "wires": [
                    {
                        "id": "c18a49adbf63d36e",
                        "port": 0
                    },
                    {
                        "id": "cf60ccdecb1090b2",
                        "port": 0
                    },
                    {
                        "id": "88081cc7a176fd46",
                        "port": 0
                    },
                    {
                        "id": "6ce8eeba8546b9f5",
                        "port": 0
                    },
                    {
                        "id": "0e4f146265ed7c21",
                        "port": 0
                    },
                    {
                        "id": "a414362292a5e6f8",
                        "port": 0
                    },
                    {
                        "id": "9677c0079b6ac683",
                        "port": 0
                    },
                    {
                        "id": "c5bfc1b79570cacd",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "Forstart",
                "type": "num",
                "value": "6"
            },
            {
                "name": "Lengdegrader",
                "type": "num",
                "value": "10.260110"
            },
            {
                "name": "Breddegrader",
                "type": "num",
                "value": "59.247643"
            },
            {
                "name": "Proxy",
                "type": "http proxy",
                "value": "",
                "ui": {
                    "type": "conf-types"
                }
            }
        ],
        "meta": {},
        "color": "#3FADB5",
        "icon": "node-red/white-globe.svg",
        "status": {
            "x": 920,
            "y": 960,
            "wires": [
                {
                    "id": "9f82ab100774fbfa",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "53f7095ec10aa5d8",
        "type": "http request",
        "z": "5d34e663f4a3f527",
        "name": "",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "${Proxy}",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 290,
        "y": 100,
        "wires": [
            [
                "9424a5299fc5cc84"
            ]
        ]
    },
    {
        "id": "e702126258893045",
        "type": "function",
        "z": "5d34e663f4a3f527",
        "name": "",
        "func": "let lon = env.get(\"Lengdegrader\");\nlet lat = env.get(\"Breddegrader\");\nmsg.url = \"https://api.met.no/weatherapi/locationforecast/2.0/complete.json?lat=\" + lat + \"&lon=\" + lon;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 250,
        "y": 380,
        "wires": [
            [
                "53f7095ec10aa5d8"
            ]
        ]
    },
    {
        "id": "3047561ebc29ea63",
        "type": "function",
        "z": "5d34e663f4a3f527",
        "name": "Snø nå?",
        "func": "let f = env.get(\"Forstart\");\nmsg.payload = msg.payload.properties.timeseries[0].data.next_1_hours.summary.symbol_code;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 620,
        "wires": [
            [
                "ddcd30e040787ccd",
                "3df85e7289be41df",
                "91d1d5eb696a29f3"
            ]
        ]
    },
    {
        "id": "61a44e518c421e93",
        "type": "switch",
        "z": "5d34e663f4a3f527",
        "name": "Snø?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "snow",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "sleet",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 3,
        "x": 770,
        "y": 460,
        "wires": [
            [
                "c18a49adbf63d36e"
            ],
            [
                "c18a49adbf63d36e"
            ],
            [
                "cf60ccdecb1090b2"
            ]
        ]
    },
    {
        "id": "ddcd30e040787ccd",
        "type": "switch",
        "z": "5d34e663f4a3f527",
        "name": "Snø?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "snow",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "sleet",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 3,
        "x": 810,
        "y": 620,
        "wires": [
            [
                "88081cc7a176fd46"
            ],
            [
                "88081cc7a176fd46"
            ],
            [
                "6ce8eeba8546b9f5"
            ]
        ]
    },
    {
        "id": "88081cc7a176fd46",
        "type": "change",
        "z": "5d34e663f4a3f527",
        "name": "SNOW",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "SNOW",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1120,
        "y": 580,
        "wires": [
            [
                "0e4f146265ed7c21"
            ]
        ]
    },
    {
        "id": "c18a49adbf63d36e",
        "type": "change",
        "z": "5d34e663f4a3f527",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "SNOW_PROB",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1000,
        "y": 200,
        "wires": [
            [
                "a414362292a5e6f8",
                "aedd5ef39bc41038"
            ]
        ]
    },
    {
        "id": "9f82ab100774fbfa",
        "type": "function",
        "z": "5d34e663f4a3f527",
        "name": "",
        "func": "msg.payload = [flow.get(\"weatherNow\"), flow.get(\"weatherThen\")];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 860,
        "wires": [
            []
        ]
    },
    {
        "id": "3df85e7289be41df",
        "type": "change",
        "z": "5d34e663f4a3f527",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "weatherNow",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 640,
        "y": 740,
        "wires": [
            [
                "9f82ab100774fbfa"
            ]
        ]
    },
    {
        "id": "6cc6fabf5f407681",
        "type": "change",
        "z": "5d34e663f4a3f527",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "weatherThen",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 780,
        "wires": [
            [
                "9f82ab100774fbfa"
            ]
        ]
    },
    {
        "id": "cf60ccdecb1090b2",
        "type": "change",
        "z": "5d34e663f4a3f527",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "SNOW_PROB",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 520,
        "wires": [
            [
                "a414362292a5e6f8"
            ]
        ]
    },
    {
        "id": "6ce8eeba8546b9f5",
        "type": "change",
        "z": "5d34e663f4a3f527",
        "name": "SNOW",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "SNOW",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1120,
        "y": 620,
        "wires": [
            [
                "0e4f146265ed7c21"
            ]
        ]
    },
    {
        "id": "c0888c22b2bab5ae",
        "type": "mqtt in",
        "z": "5d34e663f4a3f527",
        "name": "",
        "topic": "INIT",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 190,
        "y": 700,
        "wires": [
            [
                "45fb7d8f5c3ab354"
            ]
        ]
    },
    {
        "id": "0e4f146265ed7c21",
        "type": "change",
        "z": "5d34e663f4a3f527",
        "name": "SNOW_API",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "SNOW_API",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1310,
        "y": 680,
        "wires": [
            [
                "926cc5c076820d81",
                "aedd5ef39bc41038"
            ]
        ]
    },
    {
        "id": "a414362292a5e6f8",
        "type": "change",
        "z": "5d34e663f4a3f527",
        "name": "SNOW_PROB_API",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "SNOW_PROB_API",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1210,
        "y": 280,
        "wires": [
            [
                "926cc5c076820d81"
            ]
        ]
    },
    {
        "id": "47b4ea451f4dab65",
        "type": "function",
        "z": "5d34e663f4a3f527",
        "name": "Forstart",
        "func": "let f = Number(env.get(\"Forstart\"));\n//payload.properties.timeseries[1].data.next_1_hours.summary.symbol_code\n//payload.properties.timeseries[2].data.next_1_hours.summary.symbol_code\n//payload.properties.timeseries[3].data.next_1_hours.summary.symbol_code\n//msg.payload = msg.payload.properties.timeseries[1].data.next_1_hours.summary.symbol_code;\nvar set = 0;\nfor (let i = 1; i <= f; i++) {\n    var text = msg.payload.properties.timeseries[i].data.next_1_hours.summary.symbol_code;\n    if (text.includes('sleet') || text.includes('snow')) {\n        msg.payload = msg.payload.properties.timeseries[i].data.next_1_hours.summary.symbol_code;\n        set = 1;\n        break;\n    }\n}\nif (set === 0)\n    msg.payload = msg.payload.properties.timeseries[f].data.next_1_hours.summary.symbol_code;\nreturn msg;\n\n//payload.properties.timeseries[2].data.next_1_hours.summary.symbol_code",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 360,
        "wires": [
            [
                "6cc6fabf5f407681",
                "61a44e518c421e93",
                "180f98e8263c7cb2"
            ]
        ]
    },
    {
        "id": "9677c0079b6ac683",
        "type": "function",
        "z": "5d34e663f4a3f527",
        "name": "AIR_TEMPERATURE_API",
        "func": "let data = msg.payload.properties.timeseries[0].data.instant.details;\nflow.set(\"air_temperature\", data.air_temperature)\nflow.set(\"dew_point_temperature\", data.dew_point_temperature)\nreturn { payload: { air_temperature: data.air_temperature, dew_point_temperature: data.dew_point_temperature }, topic: \"AIR_TEMPERATURE_API\" };",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 780,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "926cc5c076820d81",
        "type": "function",
        "z": "5d34e663f4a3f527",
        "name": "Logg Værdata",
        "func": "if (msg.topic === \"SNOW_PROB_API\" && msg.payload)\n    console.log(\"Snø sannsynlig (værdata api.met.no)\");\n\nif (msg.topic === \"SNOW_API\" && msg.payload)\n    console.log(\"Snø (værdata api.met.no)\");\n\nmsg.topic = 'WEATHERDATA';\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1760,
        "y": 320,
        "wires": [
            [
                "382168e9efb388a4"
            ]
        ]
    },
    {
        "id": "d02b7b56c94e0f1d",
        "type": "uib-sender",
        "z": "5d34e663f4a3f527",
        "url": "user",
        "uibId": "1a8f52fc0dc9ed73",
        "name": "",
        "topic": "",
        "passthrough": false,
        "return": false,
        "outputs": 0,
        "x": 1990,
        "y": 380,
        "wires": []
    },
    {
        "id": "1e9cacae93fe8a85",
        "type": "function",
        "z": "5d34e663f4a3f527",
        "name": "Location & Forstart information Sender",
        "func": "let lat = env.get(\"Breddegrader\");\nlet lon = env.get(\"Lengdegrader\");\nlet forstart = env.get(\"Forstart\");\nmsg.payload = [lat, lon, forstart]\nmsg.topic = 'LOCATION'\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1870,
        "y": 480,
        "wires": [
            [
                "d02b7b56c94e0f1d"
            ]
        ]
    },
    {
        "id": "4e12015caad1dfd5",
        "type": "inject",
        "z": "5d34e663f4a3f527",
        "name": "",
        "props": [],
        "repeat": "10",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1630,
        "y": 480,
        "wires": [
            [
                "1e9cacae93fe8a85",
                "e64895d708dc9dda"
            ]
        ]
    },
    {
        "id": "382168e9efb388a4",
        "type": "subflow:3c5166e4c8bbb8a7",
        "z": "5d34e663f4a3f527",
        "name": "",
        "env": [
            {
                "name": "Filter",
                "value": "api.met.no",
                "type": "str"
            }
        ],
        "x": 1920,
        "y": 220,
        "wires": [
            [
                "af1ffef49f2e6908"
            ]
        ]
    },
    {
        "id": "57c692288890ae41",
        "type": "mqtt in",
        "z": "5d34e663f4a3f527",
        "name": "",
        "topic": "READY_FOR_CONTENT",
        "qos": "2",
        "datatype": "auto",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1610,
        "y": 120,
        "wires": [
            [
                "382168e9efb388a4"
            ]
        ]
    },
    {
        "id": "af1ffef49f2e6908",
        "type": "change",
        "z": "5d34e663f4a3f527",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "WEATHERDATA",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2030,
        "y": 300,
        "wires": [
            [
                "d02b7b56c94e0f1d"
            ]
        ]
    },
    {
        "id": "45fb7d8f5c3ab354",
        "type": "trigger",
        "z": "5d34e663f4a3f527",
        "name": "",
        "op1": "",
        "op2": "0",
        "op1type": "pay",
        "op2type": "str",
        "duration": "-60",
        "extend": false,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 310,
        "y": 800,
        "wires": [
            [
                "e702126258893045"
            ]
        ]
    },
    {
        "id": "1d82972e50bb4716",
        "type": "mqtt in",
        "z": "5d34e663f4a3f527",
        "name": "",
        "topic": "reset",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 150,
        "y": 880,
        "wires": [
            [
                "45fb7d8f5c3ab354"
            ]
        ]
    },
    {
        "id": "9424a5299fc5cc84",
        "type": "switch",
        "z": "5d34e663f4a3f527",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "istype",
                "v": "object",
                "vt": "object"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 450,
        "y": 220,
        "wires": [
            [
                "47b4ea451f4dab65",
                "9677c0079b6ac683",
                "3047561ebc29ea63"
            ],
            [
                "6ce8eeba8546b9f5",
                "cf60ccdecb1090b2",
                "c5bfc1b79570cacd"
            ]
        ]
    },
    {
        "id": "c5bfc1b79570cacd",
        "type": "function",
        "z": "5d34e663f4a3f527",
        "name": "AIR_TEMPERATURE_API ERROR",
        "func": "flow.set(\"air_temperature\", 327.67)\nflow.set(\"dew_point_temperature\", 327.67)\nreturn { payload: { air_temperature: 327.67, dew_point_temperature: 327.67 }, topic: \"AIR_TEMPERATURE_API\" };",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 760,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "aedd5ef39bc41038",
        "type": "mqtt out",
        "z": "5d34e663f4a3f527",
        "name": "",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e649abf8.0e7988",
        "x": 1650,
        "y": 640,
        "wires": []
    },
    {
        "id": "e64895d708dc9dda",
        "type": "function",
        "z": "5d34e663f4a3f527",
        "name": "",
        "func": "let lon = env.get(\"Lengdegrader\");\nlet lat = env.get(\"Breddegrader\");\nmsg.payload = {\"lon\": lon, \"lat\": lat};\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1374,
        "y": 902,
        "wires": [
            [
                "bb1ca394f827b00e"
            ]
        ]
    },
    {
        "id": "bb1ca394f827b00e",
        "type": "mqtt out",
        "z": "5d34e663f4a3f527",
        "name": "",
        "topic": "v1/devices/me/attributes",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1cf00ad4a64d0402",
        "x": 1690,
        "y": 860,
        "wires": []
    },
    {
        "id": "ddb7db14a77facf5",
        "type": "mqtt out",
        "z": "5d34e663f4a3f527",
        "name": "",
        "topic": "v1/devices/me/telemetry",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1cf00ad4a64d0402",
        "x": 2048,
        "y": 715,
        "wires": []
    },
    {
        "id": "91d1d5eb696a29f3",
        "type": "function",
        "z": "5d34e663f4a3f527",
        "name": "function 149",
        "func": "msg.payload = {\"WEATHER\": msg.payload};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1810,
        "y": 700,
        "wires": [
            [
                "ddb7db14a77facf5"
            ]
        ]
    },
    {
        "id": "180f98e8263c7cb2",
        "type": "function",
        "z": "5d34e663f4a3f527",
        "name": "function 150",
        "func": "msg.payload = {\"WEATHER_FORECAST\": msg.payload};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1780,
        "y": 785,
        "wires": [
            [
                "ddb7db14a77facf5"
            ]
        ]
    },
    {
        "id": "2abd223cc6fa0b71",
        "type": "subflow",
        "name": "Vindmåler NMEA",
        "info": "",
        "category": "AC5000",
        "in": [],
        "out": [
            {
                "x": 460,
                "y": 40,
                "wires": [
                    {
                        "id": "6f6eb5be84829f08",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#3FADB5",
        "icon": "node-red/link-out.svg",
        "status": {
            "x": 380,
            "y": 120,
            "wires": [
                {
                    "id": "6f6eb5be84829f08",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "409d2253cb8a60bf",
        "type": "mqtt in",
        "z": "2abd223cc6fa0b71",
        "name": "",
        "topic": "WIND",
        "qos": "2",
        "datatype": "auto",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 140,
        "wires": [
            [
                "6f6eb5be84829f08"
            ]
        ]
    },
    {
        "id": "6f6eb5be84829f08",
        "type": "function",
        "z": "2abd223cc6fa0b71",
        "name": "",
        "func": "msg.payload = Number(msg.payload);\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 300,
        "wires": [
            [
                "3b9382a91b5cd6b7",
                "3aab4b3c4922f0ee"
            ]
        ]
    },
    {
        "id": "3b9382a91b5cd6b7",
        "type": "mqtt out",
        "z": "2abd223cc6fa0b71",
        "name": "",
        "topic": "SD/0/6",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e649abf8.0e7988",
        "x": 550,
        "y": 300,
        "wires": []
    },
    {
        "id": "3aab4b3c4922f0ee",
        "type": "switch",
        "z": "2abd223cc6fa0b71",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "32767",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 480,
        "y": 220,
        "wires": [
            [
                "fe826dd6aa27dbbf"
            ]
        ]
    },
    {
        "id": "e292d4f53902377e",
        "type": "mqtt out",
        "z": "2abd223cc6fa0b71",
        "name": "",
        "topic": "SD/0/1",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e649abf8.0e7988",
        "x": 700,
        "y": 200,
        "wires": []
    },
    {
        "id": "fe826dd6aa27dbbf",
        "type": "change",
        "z": "2abd223cc6fa0b71",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "7",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 640,
        "y": 260,
        "wires": [
            [
                "e292d4f53902377e"
            ]
        ]
    },
    {
        "id": "ced4e951.6ccf58",
        "type": "subflow",
        "name": "Tempføler",
        "info": "",
        "category": "AC5000",
        "in": [],
        "out": [
            {
                "x": 1320,
                "y": 220,
                "wires": [
                    {
                        "id": "8c578470995df513",
                        "port": 0
                    },
                    {
                        "id": "d2d6181d.fa2e58",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "Buss",
                "type": "str",
                "value": "COM3",
                "ui": {
                    "type": "select",
                    "opts": {
                        "opts": [
                            {
                                "l": {
                                    "en-US": "COM3"
                                },
                                "v": "COM3"
                            },
                            {
                                "l": {
                                    "en-US": "COM4"
                                },
                                "v": "COM4"
                            }
                        ]
                    }
                }
            },
            {
                "name": "Addr",
                "type": "num",
                "value": "20",
                "ui": {
                    "type": "spinner",
                    "opts": {
                        "min": 1,
                        "max": 255
                    }
                }
            },
            {
                "name": "TIMEOUT",
                "type": "num",
                "value": "10"
            },
            {
                "name": "TYPE",
                "type": "str",
                "value": "Singelføler",
                "ui": {
                    "label": {
                        "en-US": "Type"
                    },
                    "type": "select",
                    "opts": {
                        "opts": [
                            {
                                "l": {
                                    "en-US": "Singelføler"
                                },
                                "v": "Singelføler"
                            },
                            {
                                "l": {
                                    "en-US": "Mellom rør (T30)"
                                },
                                "v": "Mellom rør"
                            }
                        ]
                    }
                }
            }
        ],
        "meta": {},
        "color": "#3FADB5",
        "icon": "font-awesome/fa-thermometer-three-quarters",
        "status": {
            "x": 1260,
            "y": 120,
            "wires": [
                {
                    "id": "d2d6181d.fa2e58",
                    "port": 0
                },
                {
                    "id": "34af795cc3e11794",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "d2d6181d.fa2e58",
        "type": "function",
        "z": "ced4e951.6ccf58",
        "name": "",
        "func": "if (isNaN(Number(msg.payload)))\nreturn null;\nmsg.payload = Number(msg.payload);\nif (env.get('TYPE') === 'Mellom rør') {\n    msg.topic = \"BETWEEN_PIPES\";\n} else {\n    let addr = env.get(\"Addr\");\n    msg.topic = \"T\" + addr;\n}\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 100,
        "wires": [
            [
                "09d7e716779445e9",
                "ae0e47399e3253d6",
                "1bd4bde78c965bb8"
            ]
        ]
    },
    {
        "id": "5a76edc0.f3c6c4",
        "type": "mqtt in",
        "z": "ced4e951.6ccf58",
        "name": "",
        "topic": "#",
        "qos": "2",
        "datatype": "utf8",
        "broker": "e649abf8.0e7988",
        "inputs": 0,
        "x": 130,
        "y": 80,
        "wires": [
            [
                "f3e78b82.39aaa8"
            ]
        ]
    },
    {
        "id": "f3e78b82.39aaa8",
        "type": "switch",
        "z": "ced4e951.6ccf58",
        "name": "Myself",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "topic = $join([$env(\"Buss\"),'/',$formatNumber($env(\"Addr\"),\"1\"),'/Temp'])",
                "vt": "jsonata"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 150,
        "y": 140,
        "wires": [
            [
                "d2d6181d.fa2e58"
            ]
        ]
    },
    {
        "id": "6b52b986.1bc3a8",
        "type": "mqtt in",
        "z": "ced4e951.6ccf58",
        "name": "",
        "topic": "INIT",
        "qos": "2",
        "datatype": "utf8",
        "broker": "e649abf8.0e7988",
        "inputs": 0,
        "x": 130,
        "y": 260,
        "wires": [
            [
                "708831ae.873ae",
                "ae0e47399e3253d6"
            ]
        ]
    },
    {
        "id": "cd213aab.5b6898",
        "type": "mqtt out",
        "z": "ced4e951.6ccf58",
        "name": "",
        "topic": "",
        "qos": "",
        "retain": "",
        "broker": "e649abf8.0e7988",
        "x": 670,
        "y": 560,
        "wires": []
    },
    {
        "id": "708831ae.873ae",
        "type": "function",
        "z": "ced4e951.6ccf58",
        "name": "",
        "func": "let buss = env.get(\"Buss\");\nlet addr = env.get(\"Addr\");\nmsg.topic = \"set/Temp/\" + buss + \"/\" + addr + \"/Init\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 140,
        "y": 400,
        "wires": [
            [
                "4c321eb25acaeb19"
            ]
        ]
    },
    {
        "id": "dde40522e9b48f04",
        "type": "mqtt out",
        "z": "ced4e951.6ccf58",
        "name": "",
        "topic": "ADD_SENSOR",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e649abf8.0e7988",
        "x": 800,
        "y": 720,
        "wires": []
    },
    {
        "id": "447adb1f2f890469",
        "type": "function",
        "z": "ced4e951.6ccf58",
        "name": "",
        "func": "let type = env.get(\"TYPE\");\nmsg.payload = {type: type, \"Addr\": env.get(\"Buss\") + \"/\" + env.get(\"Addr\")};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 700,
        "wires": [
            [
                "dde40522e9b48f04"
            ]
        ]
    },
    {
        "id": "dcbfa02370312c3a",
        "type": "mqtt in",
        "z": "ced4e951.6ccf58",
        "name": "",
        "topic": "READY_FOR_CONTENT",
        "qos": "2",
        "datatype": "auto",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 221,
        "y": 712,
        "wires": [
            [
                "447adb1f2f890469"
            ]
        ]
    },
    {
        "id": "4c01b069822b86f9",
        "type": "inject",
        "z": "ced4e951.6ccf58",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payloadType": "date",
        "x": 230,
        "y": 840,
        "wires": [
            [
                "447adb1f2f890469",
                "ae0e47399e3253d6"
            ]
        ]
    },
    {
        "id": "09d7e716779445e9",
        "type": "function",
        "z": "ced4e951.6ccf58",
        "name": "",
        "func": "let type = env.get(\"TYPE\");\nmsg.payload = {val: msg.payload, type: type, \"Addr\": env.get(\"Buss\") + \"/\" + env.get(\"Addr\")};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 660,
        "wires": [
            [
                "dde40522e9b48f04"
            ]
        ]
    },
    {
        "id": "e56b31cdbdc0548c",
        "type": "trigger",
        "z": "ced4e951.6ccf58",
        "name": "",
        "op1": "",
        "op2": "0",
        "op1type": "pay",
        "op2type": "str",
        "duration": "5",
        "extend": true,
        "overrideDelay": true,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 2,
        "x": 850,
        "y": 220,
        "wires": [
            [],
            [
                "8c578470995df513",
                "09d7e716779445e9"
            ]
        ]
    },
    {
        "id": "8c578470995df513",
        "type": "change",
        "z": "ced4e951.6ccf58",
        "name": "Error",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "327.67",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1030,
        "y": 360,
        "wires": [
            [
                "34af795cc3e11794"
            ]
        ]
    },
    {
        "id": "ae0e47399e3253d6",
        "type": "function",
        "z": "ced4e951.6ccf58",
        "name": "delay",
        "func": "let delay = env.get(\"TIMEOUT\");\nmsg.delay = Number(delay) * 1000 * 60;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 650,
        "y": 180,
        "wires": [
            [
                "e56b31cdbdc0548c"
            ]
        ]
    },
    {
        "id": "34af795cc3e11794",
        "type": "change",
        "z": "ced4e951.6ccf58",
        "name": "Kommunikasjonsfeil",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Kommunikasjonsfeil",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1100,
        "y": 260,
        "wires": [
            [
                "171db6055a10ddc5",
                "856c66459a215ba6"
            ]
        ]
    },
    {
        "id": "3acd698b1e5e3f85",
        "type": "mqtt out",
        "z": "ced4e951.6ccf58",
        "name": "",
        "topic": "KOMMFEIL",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e649abf8.0e7988",
        "x": 1570,
        "y": 260,
        "wires": []
    },
    {
        "id": "171db6055a10ddc5",
        "type": "change",
        "z": "ced4e951.6ccf58",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "topic",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1380,
        "y": 340,
        "wires": [
            [
                "3acd698b1e5e3f85"
            ]
        ]
    },
    {
        "id": "4c321eb25acaeb19",
        "type": "switch",
        "z": "ced4e951.6ccf58",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "INIT",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 370,
        "y": 460,
        "wires": [
            [
                "cd213aab.5b6898"
            ]
        ]
    },
    {
        "id": "856c66459a215ba6",
        "type": "function",
        "z": "ced4e951.6ccf58",
        "name": "Sett alarm-relè",
        "func": "let buss = env.get(\"Buss\");\nlet addr = env.get(\"Addr\");\nmsg.topic = \"temp/\" + buss + \"/\" + addr;\n\nglobal.set('ALARM', {\n        ...global.get('ALARM'),\n        [msg.topic]: 'Kommunikasjonsfeil'\n});",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1560,
        "y": 120,
        "wires": []
    },
    {
        "id": "1bd4bde78c965bb8",
        "type": "function",
        "z": "ced4e951.6ccf58",
        "name": "reset alarm",
        "func": "if(msg.payload === 327.67)\nreturn null;\nlet alarm = global.get('ALARM');\nlet buss = env.get(\"Buss\");\nlet addr = env.get(\"Addr\");\nmsg.topic = \"temp/\" + buss + \"/\" + addr;\ndelete alarm[msg.topic];\nglobal.set('ALARM', alarm); \nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1406,
        "y": 57,
        "wires": [
            []
        ]
    },
    {
        "id": "720f32c2.76524c",
        "type": "ui_group",
        "z": "ced4e951.6ccf58",
        "name": "Temperaturer",
        "tab": "1fa6cb55.482f65",
        "order": 4,
        "disp": false,
        "width": "6",
        "collapse": false
    },
    {
        "id": "53389447.eb0fbc",
        "type": "subflow",
        "name": "Værstasjon",
        "info": "",
        "category": "AC5000",
        "in": [],
        "out": [
            {
                "x": 1700,
                "y": 160,
                "wires": [
                    {
                        "id": "ee495b505161f55f",
                        "port": 0
                    },
                    {
                        "id": "25b83915bad1aed4",
                        "port": 0
                    },
                    {
                        "id": "e0ac712200cde141",
                        "port": 0
                    },
                    {
                        "id": "d2c859af165733d5",
                        "port": 0
                    },
                    {
                        "id": "787ca8c1d4f8e89d",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "Buss",
                "type": "str",
                "value": "COM3"
            },
            {
                "name": "Addr",
                "type": "num",
                "value": "71"
            }
        ],
        "meta": {},
        "color": "#3FADB5",
        "icon": "node-red/link-out.svg",
        "status": {
            "x": 780,
            "y": 600,
            "wires": [
                {
                    "id": "2ae4f6a9266cbbd7",
                    "port": 0
                },
                {
                    "id": "9b8d5aaa49c168b4",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "46d8bc987545d622",
        "type": "mqtt in",
        "z": "53389447.eb0fbc",
        "name": "",
        "topic": "INIT",
        "qos": "2",
        "datatype": "utf8",
        "broker": "e649abf8.0e7988",
        "inputs": 0,
        "x": 1233,
        "y": 346,
        "wires": [
            [
                "113487b1dddbd5f3"
            ]
        ]
    },
    {
        "id": "ae26798faf3fae8a",
        "type": "mqtt out",
        "z": "53389447.eb0fbc",
        "name": "",
        "topic": "",
        "qos": "",
        "retain": "",
        "broker": "e649abf8.0e7988",
        "x": 1790,
        "y": 580,
        "wires": []
    },
    {
        "id": "113487b1dddbd5f3",
        "type": "function",
        "z": "53389447.eb0fbc",
        "name": "",
        "func": "let buss = env.get(\"Buss\");\nlet addr = env.get(\"Addr\");\nmsg.topic = \"set/Frost/\" + buss + \"/\" + addr + \"/Init\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1333,
        "y": 406,
        "wires": [
            [
                "acecaf7da1940153"
            ]
        ]
    },
    {
        "id": "86923389520f0399",
        "type": "mqtt in",
        "z": "53389447.eb0fbc",
        "name": "",
        "topic": "#",
        "qos": "2",
        "datatype": "utf8",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 90,
        "y": 100,
        "wires": [
            [
                "7fcddb1aad5c4eba",
                "4326136fa0faa5b7"
            ]
        ]
    },
    {
        "id": "7fcddb1aad5c4eba",
        "type": "switch",
        "z": "53389447.eb0fbc",
        "name": "RIM",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "topic = $join([$env(\"Buss\"),'/',$formatNumber($env(\"Addr\"),\"1\"),'/Frost/frost'])",
                "vt": "jsonata"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 278,
        "y": 77,
        "wires": [
            [
                "c609ccd2e3a3b917",
                "f1d5954ef366984e",
                "0260631383d20dad"
            ]
        ]
    },
    {
        "id": "4326136fa0faa5b7",
        "type": "switch",
        "z": "53389447.eb0fbc",
        "name": "Snø sannsynlig",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "topic = $join([$env(\"Buss\"),'/',$formatNumber($env(\"Addr\"),\"1\"),'/Frost/prob'])",
                "vt": "jsonata"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 308,
        "y": 137,
        "wires": [
            [
                "05a05ec4636bb5cd"
            ]
        ]
    },
    {
        "id": "d7859cfabd6bef66",
        "type": "join",
        "z": "53389447.eb0fbc",
        "name": "",
        "mode": "custom",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": true,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 610,
        "y": 360,
        "wires": [
            [
                "2ae4f6a9266cbbd7"
            ]
        ]
    },
    {
        "id": "c609ccd2e3a3b917",
        "type": "change",
        "z": "53389447.eb0fbc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "rim",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 438,
        "y": 77,
        "wires": [
            [
                "bf694fe06e87a8f9"
            ]
        ]
    },
    {
        "id": "05a05ec4636bb5cd",
        "type": "change",
        "z": "53389447.eb0fbc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "snø sannsynlig",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 210,
        "y": 260,
        "wires": [
            [
                "6a4faac522c6d8e5"
            ]
        ]
    },
    {
        "id": "6a4faac522c6d8e5",
        "type": "change",
        "z": "53389447.eb0fbc",
        "name": "SNOW_PROB",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "SNOW_PROB",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 300,
        "wires": [
            [
                "ee495b505161f55f",
                "a5e70a2228422bfe",
                "d7859cfabd6bef66"
            ]
        ]
    },
    {
        "id": "bf694fe06e87a8f9",
        "type": "change",
        "z": "53389447.eb0fbc",
        "name": "FROST",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "FROST",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 660,
        "y": 180,
        "wires": [
            [
                "74976a35aa34286e",
                "d7859cfabd6bef66",
                "d2c859af165733d5"
            ]
        ]
    },
    {
        "id": "ad8d9a740c42382a",
        "type": "mqtt out",
        "z": "53389447.eb0fbc",
        "name": "",
        "topic": "SD/0/4",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e649abf8.0e7988",
        "x": 1450,
        "y": 60,
        "wires": []
    },
    {
        "id": "21545f2bc5f15904",
        "type": "mqtt out",
        "z": "53389447.eb0fbc",
        "name": "",
        "topic": "SD/0/5",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e649abf8.0e7988",
        "x": 1450,
        "y": 140,
        "wires": []
    },
    {
        "id": "74976a35aa34286e",
        "type": "function",
        "z": "53389447.eb0fbc",
        "name": "RIM",
        "func": "if (msg.payload === true || msg.payload === \"true\")\n    msg.payload = 2;\n    else msg.payload = 1;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1010,
        "y": 80,
        "wires": [
            [
                "ad8d9a740c42382a"
            ]
        ]
    },
    {
        "id": "a5e70a2228422bfe",
        "type": "function",
        "z": "53389447.eb0fbc",
        "name": "SNOW_PROB",
        "func": "if (msg.payload === true || msg.payload === \"true\")\n    msg.payload = 2;\n    else msg.payload = 1;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 120,
        "wires": [
            [
                "21545f2bc5f15904"
            ]
        ]
    },
    {
        "id": "ee495b505161f55f",
        "type": "function",
        "z": "53389447.eb0fbc",
        "name": "function 27",
        "func": "if (msg.payload === \"true\")\n    msg.payload = true;\nelse msg.payload = false;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1030,
        "y": 380,
        "wires": [
            [
                "25b83915bad1aed4"
            ]
        ]
    },
    {
        "id": "25b83915bad1aed4",
        "type": "change",
        "z": "53389447.eb0fbc",
        "name": "SNOW_PROB_LOCAL",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "SNOW_PROB_LOCAL",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1570,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "2ae4f6a9266cbbd7",
        "type": "function",
        "z": "53389447.eb0fbc",
        "name": "function 44",
        "func": "msg.payload = [msg.payload['FROST'], msg.payload['SNOW_PROB']];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "d2c859af165733d5",
        "type": "function",
        "z": "53389447.eb0fbc",
        "name": "function 66",
        "func": "if (msg.payload === \"true\")\n    msg.payload = true;\nelse msg.payload = false;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 993,
        "y": 255,
        "wires": [
            [
                "e0ac712200cde141"
            ]
        ]
    },
    {
        "id": "e0ac712200cde141",
        "type": "change",
        "z": "53389447.eb0fbc",
        "name": "FROST_LOCAL",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "FROST_LOCAL",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1240,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "acecaf7da1940153",
        "type": "switch",
        "z": "53389447.eb0fbc",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "INIT",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1570,
        "y": 500,
        "wires": [
            [
                "ae26798faf3fae8a"
            ]
        ]
    },
    {
        "id": "f1d5954ef366984e",
        "type": "function",
        "z": "53389447.eb0fbc",
        "name": "reset alarm",
        "func": "let alarm = global.get('ALARM');\nlet buss = env.get(\"Buss\");\nlet addr = env.get(\"Addr\");\nmsg.topic = \"værstasjon/\" + buss + \"/\" + addr;\ndelete alarm[msg.topic];\nglobal.set('ALARM', alarm); \nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 20,
        "wires": [
            []
        ]
    },
    {
        "id": "8f8211f0c52e2038",
        "type": "function",
        "z": "53389447.eb0fbc",
        "name": "Sett alarm-relè",
        "func": "let buss = env.get(\"Buss\");\nlet addr = env.get(\"Addr\");\nmsg.topic = \"værstasjon/\" + buss + \"/\" + addr;\n\nglobal.set('ALARM', {\n        ...global.get('ALARM'),\n        [msg.topic]: 'Kommunikasjonsfeil'\n});",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1440,
        "y": 780,
        "wires": []
    },
    {
        "id": "0260631383d20dad",
        "type": "trigger",
        "z": "53389447.eb0fbc",
        "name": "",
        "op1": "",
        "op2": "0",
        "op1type": "pay",
        "op2type": "str",
        "duration": "15",
        "extend": true,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 2,
        "x": 1030,
        "y": 760,
        "wires": [
            [],
            [
                "8f8211f0c52e2038",
                "787ca8c1d4f8e89d",
                "9b8d5aaa49c168b4",
                "da7717161de0d999",
                "52326db36a94d80a"
            ]
        ]
    },
    {
        "id": "ec81b9256427aa73",
        "type": "inject",
        "z": "53389447.eb0fbc",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payloadType": "date",
        "x": 910,
        "y": 980,
        "wires": [
            [
                "0260631383d20dad"
            ]
        ]
    },
    {
        "id": "9b8d5aaa49c168b4",
        "type": "change",
        "z": "53389447.eb0fbc",
        "name": "Kommunikasjonsfeil",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Kommunikasjonsfeil",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "SNOW",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1100,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "787ca8c1d4f8e89d",
        "type": "change",
        "z": "53389447.eb0fbc",
        "name": "Set false",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "SNOW_PROB",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1362,
        "y": 716,
        "wires": [
            [
                "25b83915bad1aed4"
            ]
        ]
    },
    {
        "id": "da7717161de0d999",
        "type": "change",
        "z": "53389447.eb0fbc",
        "name": "7FFF",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "32767",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1086,
        "y": 507,
        "wires": [
            [
                "ad8d9a740c42382a",
                "21545f2bc5f15904"
            ]
        ]
    },
    {
        "id": "52326db36a94d80a",
        "type": "change",
        "z": "53389447.eb0fbc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "FROST",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 560,
        "wires": [
            [
                "25b83915bad1aed4",
                "e0ac712200cde141"
            ]
        ]
    },
    {
        "id": "60bddfc1.83414",
        "type": "subflow",
        "name": "Snøføler",
        "info": "",
        "category": "AC5000",
        "in": [],
        "out": [
            {
                "x": 1520,
                "y": 60,
                "wires": [
                    {
                        "id": "68df3fa9497ec9fa",
                        "port": 0
                    },
                    {
                        "id": "cca4e158a57aaf7d",
                        "port": 0
                    },
                    {
                        "id": "4f6ab77cb7b75396",
                        "port": 0
                    },
                    {
                        "id": "93805b8f66b489eb",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "Buss",
                "type": "str",
                "value": "COM3",
                "ui": {
                    "type": "select",
                    "opts": {
                        "opts": [
                            {
                                "l": {
                                    "en-US": "COM3"
                                },
                                "v": "COM3"
                            },
                            {
                                "l": {
                                    "en-US": "COM4"
                                },
                                "v": "COM4"
                            }
                        ]
                    }
                }
            },
            {
                "name": "Addr",
                "type": "num",
                "value": "56",
                "ui": {
                    "type": "spinner",
                    "opts": {
                        "min": 1,
                        "max": 255
                    }
                }
            }
        ],
        "meta": {},
        "color": "#3FADB5",
        "icon": "font-awesome/fa-snowflake-o",
        "status": {
            "x": 800,
            "y": 280,
            "wires": [
                {
                    "id": "885a7e2a00149c4c",
                    "port": 0
                },
                {
                    "id": "ecec040be3203d0c",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "68df3fa9497ec9fa",
        "type": "function",
        "z": "60bddfc1.83414",
        "name": "SNOW",
        "func": "msg.topic = \"SNOW\";\nmsg.payload = msg.payload === \"true\" ? true : false;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 120,
        "wires": [
            [
                "885a7e2a00149c4c",
                "33b67cac7300b588",
                "183af0b23eeb6fe9",
                "cca4e158a57aaf7d"
            ]
        ]
    },
    {
        "id": "d40f4a1139761283",
        "type": "mqtt in",
        "z": "60bddfc1.83414",
        "name": "",
        "topic": "#",
        "qos": "2",
        "datatype": "utf8",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 117,
        "y": 98,
        "wires": [
            [
                "e16c67cd509544a2",
                "dbdcba1d341a04e3",
                "1040ecd4afb9bc77"
            ]
        ]
    },
    {
        "id": "e16c67cd509544a2",
        "type": "switch",
        "z": "60bddfc1.83414",
        "name": "Snø",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "topic = $join([$env(\"Buss\"),'/',$formatNumber($env(\"Addr\"),\"1\"),'/Snow/sno_detektert'])",
                "vt": "jsonata"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 290,
        "y": 120,
        "wires": [
            [
                "68df3fa9497ec9fa",
                "db23fed579f2b766",
                "284421ce3a131372"
            ]
        ]
    },
    {
        "id": "6ee6aaafafb8e1a4",
        "type": "mqtt in",
        "z": "60bddfc1.83414",
        "name": "",
        "topic": "INIT",
        "qos": "2",
        "datatype": "utf8",
        "broker": "e649abf8.0e7988",
        "inputs": 0,
        "x": 130,
        "y": 400,
        "wires": [
            [
                "c1f764371cf0965b"
            ]
        ]
    },
    {
        "id": "56f7fa183633118a",
        "type": "mqtt out",
        "z": "60bddfc1.83414",
        "name": "",
        "topic": "",
        "qos": "",
        "retain": "",
        "broker": "e649abf8.0e7988",
        "x": 930,
        "y": 520,
        "wires": []
    },
    {
        "id": "c1f764371cf0965b",
        "type": "function",
        "z": "60bddfc1.83414",
        "name": "",
        "func": "let buss = env.get(\"Buss\");\nlet addr = env.get(\"Addr\");\nmsg.topic = \"set/Snow/\" + buss + \"/\" + addr + \"/Init\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 220,
        "y": 460,
        "wires": [
            [
                "39a82da00a739977"
            ]
        ]
    },
    {
        "id": "885a7e2a00149c4c",
        "type": "function",
        "z": "60bddfc1.83414",
        "name": "",
        "func": "msg.payload = {\"snø detektert\": msg.payload};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "66a34f6c7ebabe33",
        "type": "mqtt out",
        "z": "60bddfc1.83414",
        "name": "",
        "topic": "ADD_SENSOR",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e649abf8.0e7988",
        "x": 780,
        "y": 780,
        "wires": []
    },
    {
        "id": "ccdec90be1a4a8b8",
        "type": "function",
        "z": "60bddfc1.83414",
        "name": "",
        "func": "let type = \"Snøføler\";\nmsg.payload = {type: type, \"Addr\": env.get(\"Buss\") + \"/\" + env.get(\"Addr\")};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 780,
        "wires": [
            [
                "66a34f6c7ebabe33"
            ]
        ]
    },
    {
        "id": "fead0f06e4544723",
        "type": "mqtt in",
        "z": "60bddfc1.83414",
        "name": "",
        "topic": "READY_FOR_CONTENT",
        "qos": "2",
        "datatype": "auto",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 201,
        "y": 772,
        "wires": [
            [
                "ccdec90be1a4a8b8"
            ]
        ]
    },
    {
        "id": "7467d02fb5c34727",
        "type": "inject",
        "z": "60bddfc1.83414",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payloadType": "date",
        "x": 170,
        "y": 860,
        "wires": [
            [
                "ccdec90be1a4a8b8"
            ]
        ]
    },
    {
        "id": "33b67cac7300b588",
        "type": "function",
        "z": "60bddfc1.83414",
        "name": "",
        "func": "let type = \"Snøføler\";\nlet val = \"Snø detektert: \" + msg.payload;\nmsg.payload = {val: val, type: type, \"Addr\": env.get(\"Buss\") + \"/\" + env.get(\"Addr\")};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 620,
        "wires": [
            [
                "66a34f6c7ebabe33"
            ]
        ]
    },
    {
        "id": "dbdcba1d341a04e3",
        "type": "switch",
        "z": "60bddfc1.83414",
        "name": "Feil på varmeelement",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "topic = $join([$env(\"Buss\"),'/',$formatNumber($env(\"Addr\"),\"1\"),'/Snow/feil_med_varmeelement'])",
                "vt": "jsonata"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 340,
        "y": 200,
        "wires": [
            [
                "f60433bbd7bb7b3c"
            ]
        ]
    },
    {
        "id": "f60433bbd7bb7b3c",
        "type": "switch",
        "z": "60bddfc1.83414",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 370,
        "y": 300,
        "wires": [
            [
                "3f0a6b5210a7934f"
            ]
        ]
    },
    {
        "id": "3f0a6b5210a7934f",
        "type": "function",
        "z": "60bddfc1.83414",
        "name": "",
        "func": "msg.topic = \"SD/0/1\";\nmsg.payload = 1;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 340,
        "wires": [
            [
                "39a82da00a739977"
            ]
        ]
    },
    {
        "id": "fd33aaa3cb0d5033",
        "type": "mqtt out",
        "z": "60bddfc1.83414",
        "name": "",
        "topic": "SD/0/3",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e649abf8.0e7988",
        "x": 1103,
        "y": 190,
        "wires": []
    },
    {
        "id": "183af0b23eeb6fe9",
        "type": "function",
        "z": "60bddfc1.83414",
        "name": "function 20",
        "func": "if(msg.payload === true)\n    msg.payload = 2;\n    else msg.payload = 1;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 830,
        "y": 180,
        "wires": [
            [
                "fd33aaa3cb0d5033"
            ]
        ]
    },
    {
        "id": "cca4e158a57aaf7d",
        "type": "change",
        "z": "60bddfc1.83414",
        "name": "SNOW_LOCAL",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "SNOW_LOCAL",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "39a82da00a739977",
        "type": "switch",
        "z": "60bddfc1.83414",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "INIT",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 748,
        "y": 585,
        "wires": [
            [
                "56f7fa183633118a"
            ]
        ]
    },
    {
        "id": "5b9cecc822b18052",
        "type": "function",
        "z": "60bddfc1.83414",
        "name": "Sett alarm-relè",
        "func": "let buss = env.get(\"Buss\");\nlet addr = env.get(\"Addr\");\nmsg.topic = \"snøføler/\" + buss + \"/\" + addr;\n\nglobal.set('ALARM', {\n        ...global.get('ALARM'),\n        [msg.topic]: 'Kommunikasjonsfeil'\n});",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1640,
        "y": 800,
        "wires": []
    },
    {
        "id": "284421ce3a131372",
        "type": "trigger",
        "z": "60bddfc1.83414",
        "name": "",
        "op1": "",
        "op2": "0",
        "op1type": "pay",
        "op2type": "str",
        "duration": "10",
        "extend": true,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 2,
        "x": 1230,
        "y": 780,
        "wires": [
            [],
            [
                "5b9cecc822b18052",
                "4f6ab77cb7b75396",
                "ecec040be3203d0c",
                "5ef91333b0baa6f5"
            ]
        ]
    },
    {
        "id": "8e2539816a1585bb",
        "type": "inject",
        "z": "60bddfc1.83414",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payloadType": "date",
        "x": 1110,
        "y": 1000,
        "wires": [
            [
                "284421ce3a131372"
            ]
        ]
    },
    {
        "id": "db23fed579f2b766",
        "type": "function",
        "z": "60bddfc1.83414",
        "name": "reset alarm",
        "func": "let alarm = global.get('ALARM');\nlet buss = env.get(\"Buss\");\nlet addr = env.get(\"Addr\");\nmsg.topic = \"snøføler/\" + buss + \"/\" + addr;\ndelete alarm[msg.topic];\nglobal.set('ALARM', alarm); \nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 890,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "4f6ab77cb7b75396",
        "type": "change",
        "z": "60bddfc1.83414",
        "name": "Set false",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "SNOW",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1360,
        "y": 620,
        "wires": [
            [
                "cca4e158a57aaf7d"
            ]
        ]
    },
    {
        "id": "ecec040be3203d0c",
        "type": "change",
        "z": "60bddfc1.83414",
        "name": "Kommunikasjonsfeil",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Kommunikasjonsfeil",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "SNOW",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1231,
        "y": 516,
        "wires": [
            []
        ]
    },
    {
        "id": "5ef91333b0baa6f5",
        "type": "change",
        "z": "60bddfc1.83414",
        "name": "7FFF",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "32767",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1087,
        "y": 296,
        "wires": [
            [
                "fd33aaa3cb0d5033"
            ]
        ]
    },
    {
        "id": "1040ecd4afb9bc77",
        "type": "switch",
        "z": "60bddfc1.83414",
        "name": "T1",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "topic = $join([$env(\"Buss\"),'/',$formatNumber($env(\"Addr\"),\"1\"),'/Snow/temp1'])",
                "vt": "jsonata"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 325,
        "y": 40,
        "wires": [
            [
                "93805b8f66b489eb"
            ]
        ]
    },
    {
        "id": "93805b8f66b489eb",
        "type": "function",
        "z": "60bddfc1.83414",
        "name": "function 15",
        "func": "msg.topic = 'T_AIR';\nmsg.payload = Number((Number(msg.payload)/100).toFixed(2));\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 20,
        "wires": [
            []
        ]
    },
    {
        "id": "c8ce8d0d.adcf1",
        "type": "subflow",
        "name": "T Luft",
        "info": "",
        "category": "AC5000",
        "in": [],
        "out": [
            {
                "x": 1360,
                "y": 80,
                "wires": [
                    {
                        "id": "127178a3.d5a5b7",
                        "port": 0
                    },
                    {
                        "id": "2c4e5b60f0c9b548",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "Buss",
                "type": "str",
                "value": "COM3",
                "ui": {
                    "type": "select",
                    "opts": {
                        "opts": [
                            {
                                "l": {
                                    "en-US": "COM3"
                                },
                                "v": "COM3"
                            },
                            {
                                "l": {
                                    "en-US": "COM4"
                                },
                                "v": "COM4"
                            }
                        ]
                    }
                }
            },
            {
                "name": "Addr",
                "type": "num",
                "value": "1",
                "ui": {
                    "type": "spinner",
                    "opts": {
                        "min": 1,
                        "max": 255
                    }
                }
            },
            {
                "name": "TIMEOUT",
                "type": "num",
                "value": "15"
            }
        ],
        "meta": {},
        "color": "#3FADB5",
        "icon": "font-awesome/fa-thermometer-three-quarters",
        "status": {
            "x": 1480,
            "y": 400,
            "wires": [
                {
                    "id": "127178a3.d5a5b7",
                    "port": 0
                },
                {
                    "id": "0161ce165f4a5573",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "127178a3.d5a5b7",
        "type": "function",
        "z": "c8ce8d0d.adcf1",
        "name": "",
        "func": "msg.topic = \"T_AIR\";\nmsg.payload = Number(msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 80,
        "wires": [
            [
                "4458343860da0763",
                "10466a1b596ba125",
                "f84c9926ccee2795",
                "99710cbf3b1b6833"
            ]
        ]
    },
    {
        "id": "1c599b2c.9329b5",
        "type": "mqtt in",
        "z": "c8ce8d0d.adcf1",
        "name": "",
        "topic": "#",
        "qos": "2",
        "datatype": "utf8",
        "broker": "e649abf8.0e7988",
        "inputs": 0,
        "x": 70,
        "y": 60,
        "wires": [
            [
                "5df3d405.2568ac"
            ]
        ]
    },
    {
        "id": "5df3d405.2568ac",
        "type": "switch",
        "z": "c8ce8d0d.adcf1",
        "name": "Myself",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "topic = $join([$env(\"Buss\"),'/',$formatNumber($env(\"Addr\"),\"1\"),'/Luft'])",
                "vt": "jsonata"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 90,
        "y": 120,
        "wires": [
            [
                "127178a3.d5a5b7"
            ]
        ]
    },
    {
        "id": "ad4301da.25996",
        "type": "mqtt in",
        "z": "c8ce8d0d.adcf1",
        "name": "",
        "topic": "INIT",
        "qos": "2",
        "datatype": "utf8",
        "broker": "e649abf8.0e7988",
        "inputs": 0,
        "x": 70,
        "y": 240,
        "wires": [
            [
                "3ba67e6.d9f5182",
                "99710cbf3b1b6833"
            ]
        ]
    },
    {
        "id": "cae6e674.e1b0c8",
        "type": "mqtt out",
        "z": "c8ce8d0d.adcf1",
        "name": "",
        "topic": "",
        "qos": "",
        "retain": "",
        "broker": "e649abf8.0e7988",
        "x": 350,
        "y": 520,
        "wires": []
    },
    {
        "id": "3ba67e6.d9f5182",
        "type": "function",
        "z": "c8ce8d0d.adcf1",
        "name": "",
        "func": "let buss = env.get(\"Buss\");\nlet addr = env.get(\"Addr\");\nmsg.topic = \"set/Luft/\" + buss + \"/\" + addr + \"/Init\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 220,
        "y": 360,
        "wires": [
            [
                "b8acb936c76e0ab8"
            ]
        ]
    },
    {
        "id": "f885af8e5f9ce0c9",
        "type": "mqtt out",
        "z": "c8ce8d0d.adcf1",
        "name": "",
        "topic": "ADD_SENSOR",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "8109e001.579a",
        "x": 840,
        "y": 620,
        "wires": []
    },
    {
        "id": "2ca0691a5ca1d279",
        "type": "function",
        "z": "c8ce8d0d.adcf1",
        "name": "",
        "func": "let type = \"Luft\";\nmsg.payload = {type: type, \"Addr\": env.get(\"Buss\") + \"/\" + env.get(\"Addr\")};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 600,
        "wires": [
            [
                "f885af8e5f9ce0c9"
            ]
        ]
    },
    {
        "id": "7a4905e79200d06d",
        "type": "mqtt in",
        "z": "c8ce8d0d.adcf1",
        "name": "",
        "topic": "READY_FOR_CONTENT",
        "qos": "2",
        "datatype": "auto",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 261,
        "y": 612,
        "wires": [
            [
                "2ca0691a5ca1d279"
            ]
        ]
    },
    {
        "id": "a0a9fbc84965e189",
        "type": "inject",
        "z": "c8ce8d0d.adcf1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payloadType": "date",
        "x": 270,
        "y": 680,
        "wires": [
            [
                "2ca0691a5ca1d279",
                "99710cbf3b1b6833"
            ]
        ]
    },
    {
        "id": "f84c9926ccee2795",
        "type": "function",
        "z": "c8ce8d0d.adcf1",
        "name": "",
        "func": "msg.payload = parseInt(Number(msg.payload)*100);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 770,
        "y": 380,
        "wires": [
            [
                "990ef3a4b2576edd"
            ]
        ]
    },
    {
        "id": "4458343860da0763",
        "type": "function",
        "z": "c8ce8d0d.adcf1",
        "name": "",
        "func": "let type = \"Luft\";\nmsg.payload = {val: msg.payload, type: type, \"Addr\": env.get(\"Buss\") + \"/\" + env.get(\"Addr\")};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 540,
        "wires": [
            [
                "f885af8e5f9ce0c9"
            ]
        ]
    },
    {
        "id": "17a0a5e24911f708",
        "type": "inject",
        "z": "c8ce8d0d.adcf1",
        "d": true,
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "20",
        "payloadType": "str",
        "x": 220,
        "y": 180,
        "wires": [
            [
                "127178a3.d5a5b7"
            ]
        ]
    },
    {
        "id": "990ef3a4b2576edd",
        "type": "mqtt out",
        "z": "c8ce8d0d.adcf1",
        "name": "",
        "topic": "SD/0/2",
        "qos": "1",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "8109e001.579a",
        "x": 1170,
        "y": 120,
        "wires": []
    },
    {
        "id": "10466a1b596ba125",
        "type": "switch",
        "z": "c8ce8d0d.adcf1",
        "name": "Error?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "327.67",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 790,
        "y": 300,
        "wires": [
            [
                "cb25b8b9f9c6fa1f"
            ],
            [
                "9d424a5f8af40d25"
            ]
        ]
    },
    {
        "id": "cb25b8b9f9c6fa1f",
        "type": "change",
        "z": "c8ce8d0d.adcf1",
        "name": "ALARM 5",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "5",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 940,
        "y": 280,
        "wires": [
            [
                "9de260cc970d5202",
                "b717af120c2827bd"
            ]
        ]
    },
    {
        "id": "9de260cc970d5202",
        "type": "mqtt out",
        "z": "c8ce8d0d.adcf1",
        "name": "",
        "topic": "SD/0/1",
        "qos": "1",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "8109e001.579a",
        "x": 1710,
        "y": 180,
        "wires": []
    },
    {
        "id": "485a8d87847844e5",
        "type": "trigger",
        "z": "c8ce8d0d.adcf1",
        "name": "",
        "op1": "",
        "op2": "0",
        "op1type": "pay",
        "op2type": "str",
        "duration": "15",
        "extend": true,
        "overrideDelay": true,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 2,
        "x": 810,
        "y": 480,
        "wires": [
            [],
            [
                "8d92381164a04ab2",
                "2c4e5b60f0c9b548"
            ]
        ]
    },
    {
        "id": "8d92381164a04ab2",
        "type": "change",
        "z": "c8ce8d0d.adcf1",
        "name": "ALARM 4",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "4",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1040,
        "y": 460,
        "wires": [
            [
                "9de260cc970d5202",
                "b717af120c2827bd",
                "418c2c68f5e96bd6"
            ]
        ]
    },
    {
        "id": "2c4e5b60f0c9b548",
        "type": "change",
        "z": "c8ce8d0d.adcf1",
        "name": "Error",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "327.67",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1038,
        "y": 507,
        "wires": [
            [
                "0161ce165f4a5573"
            ]
        ]
    },
    {
        "id": "99710cbf3b1b6833",
        "type": "function",
        "z": "c8ce8d0d.adcf1",
        "name": "delay",
        "func": "let delay = env.get(\"TIMEOUT\");\nmsg.delay = Number(delay) * 1000 * 60;\nmsg.topic = \"T_AIR\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 650,
        "y": 460,
        "wires": [
            [
                "485a8d87847844e5"
            ]
        ]
    },
    {
        "id": "0161ce165f4a5573",
        "type": "change",
        "z": "c8ce8d0d.adcf1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Kommunikasjonsfeil",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1300,
        "y": 440,
        "wires": [
            [
                "4d2b88d6ddbf6dad"
            ]
        ]
    },
    {
        "id": "bb226ed6d0ea656e",
        "type": "mqtt out",
        "z": "c8ce8d0d.adcf1",
        "name": "",
        "topic": "KOMMFEIL",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e649abf8.0e7988",
        "x": 1670,
        "y": 480,
        "wires": []
    },
    {
        "id": "4d2b88d6ddbf6dad",
        "type": "change",
        "z": "c8ce8d0d.adcf1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "topic",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1480,
        "y": 560,
        "wires": [
            [
                "bb226ed6d0ea656e"
            ]
        ]
    },
    {
        "id": "b8acb936c76e0ab8",
        "type": "switch",
        "z": "c8ce8d0d.adcf1",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "INIT",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 290,
        "y": 460,
        "wires": [
            [
                "cae6e674.e1b0c8"
            ]
        ]
    },
    {
        "id": "b717af120c2827bd",
        "type": "function",
        "z": "c8ce8d0d.adcf1",
        "name": "Sett alarm-relè",
        "func": "global.set('ALARM', {\n        ...global.get('ALARM'),\n        ['T1']: \"Kommunikasjonsfeil\"\n});",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1740,
        "y": 280,
        "wires": []
    },
    {
        "id": "9d424a5f8af40d25",
        "type": "function",
        "z": "c8ce8d0d.adcf1",
        "name": "function 100",
        "func": "let alarm = global.get('ALARM');\ndelete alarm['T1'];\nglobal.set('ALARM', alarm); ",
        "outputs": 0,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1150,
        "y": 740,
        "wires": []
    },
    {
        "id": "418c2c68f5e96bd6",
        "type": "change",
        "z": "c8ce8d0d.adcf1",
        "name": "7FFF",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "32767",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1105,
        "y": 181,
        "wires": [
            [
                "990ef3a4b2576edd"
            ]
        ]
    },
    {
        "id": "8109e001.579a",
        "type": "mqtt-broker",
        "z": "c8ce8d0d.adcf1",
        "name": "l",
        "broker": "localhost",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "compatmode": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "4ad5dd5.30a1e24",
        "type": "ui_group",
        "z": "c8ce8d0d.adcf1",
        "name": "Default",
        "tab": "1fa6cb55.482f65",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "ed087c70.f4264",
        "type": "ui_group",
        "z": "c8ce8d0d.adcf1",
        "name": "Luft",
        "tab": "1fa6cb55.482f65",
        "order": 2,
        "disp": false,
        "width": "14",
        "collapse": false
    },
    {
        "id": "1fa6cb55.482f65",
        "type": "ui_tab",
        "name": "Aiwell",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "3c5166e4c8bbb8a7",
        "type": "subflow",
        "name": "Logger",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 140,
                "y": 120,
                "wires": [
                    {
                        "id": "b09f46ee91134acc"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 900,
                "y": 240,
                "wires": [
                    {
                        "id": "eed9a19e88367fdf",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "Filter",
                "type": "str",
                "value": "oppstart|stenger"
            },
            {
                "name": "Rows",
                "type": "num",
                "value": "100",
                "ui": {
                    "type": "spinner",
                    "opts": {
                        "min": 0,
                        "max": 500
                    }
                }
            }
        ],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "b09f46ee91134acc",
        "type": "function",
        "z": "3c5166e4c8bbb8a7",
        "name": "Read logg",
        "func": "if (msg.payload.id) {\n    flow.set(\"ID\", msg.payload.id);\n    msg.payload = \"docker logs -t root-node-red-1 2>&1 | grep -iwE \" + \"'\" + env.get('Filter') + \"'\" + \" | grep -w \" + msg.payload.id + \" | tac\";    \n    }\nelse msg.payload = \"docker logs -t root-node-red-1 2>&1 | grep -iwE \" + \"'\" + env.get('Filter') + \"' | tac\";\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 140,
        "wires": [
            [
                "ec946f9e2bedffbe"
            ]
        ]
    },
    {
        "id": "ec946f9e2bedffbe",
        "type": "exec",
        "z": "3c5166e4c8bbb8a7",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 530,
        "y": 180,
        "wires": [
            [
                "eed9a19e88367fdf"
            ],
            [],
            []
        ]
    },
    {
        "id": "eed9a19e88367fdf",
        "type": "function",
        "z": "3c5166e4c8bbb8a7",
        "name": "Process logg ",
        "func": "let n = Number(env.get('Rows'));\nlet logg = msg.payload.split('\\n');\n\nlogg = logg.map(line => {\n    let [first, ...rest] = line.split(' ');\n    return flow.get(\"ID\") ? [first, rest.slice(1).join(' ')] : [first, rest.join(' ')];\n});\n//Modify to remove duplicate lines  \n\nmsg.payload = logg;\nreturn msg",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "c5ddcc1d8ce4e760",
        "type": "subflow",
        "name": "Vannbåren undersone",
        "category": "Applikasjoner",
        "in": [
            {
                "x": 50,
                "y": 30,
                "wires": [
                    {
                        "id": "34e1e9085fcea27d"
                    },
                    {
                        "id": "58ad714929cbfea6"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1900,
                "y": 40,
                "wires": [
                    {
                        "id": "6db69b894a40ccd0",
                        "port": 0
                    },
                    {
                        "id": "fdd7eaa2a491765b",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1470,
                "y": 140,
                "wires": [
                    {
                        "id": "b98889ae4e96023e",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "LABEL",
                "type": "str",
                "value": "Gatevarme Undersone",
                "ui": {
                    "label": {
                        "en-US": "Navn"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "DISPLAY_VALVE_PRIME",
                "type": "bool",
                "value": "false",
                "ui": {
                    "icon": "font-awesome/fa-eye",
                    "label": {
                        "en-US": "Vis shunt på primærside i dsplay"
                    },
                    "type": "checkbox"
                }
            },
            {
                "name": "DISPLAY_PUMP_PRIME",
                "type": "bool",
                "value": "false",
                "ui": {
                    "icon": "font-awesome/fa-eye",
                    "label": {
                        "en-US": "Vis startsignal på primærside i dsplay"
                    },
                    "type": "checkbox"
                }
            },
            {
                "name": "ENABLE",
                "type": "bool",
                "value": "true",
                "ui": {
                    "label": {
                        "en-US": "Aktivert automatisk etter programmering"
                    },
                    "type": "checkbox"
                }
            },
            {
                "name": "SIDE",
                "type": "str",
                "value": "T25",
                "ui": {
                    "label": {
                        "en-US": "Styre på"
                    },
                    "type": "select",
                    "opts": {
                        "opts": [
                            {
                                "l": {
                                    "en-US": "T25 Tur"
                                },
                                "v": "T25"
                            },
                            {
                                "l": {
                                    "en-US": "T26 Retur"
                                },
                                "v": "T26"
                            },
                            {
                                "l": {
                                    "en-US": "Primærside"
                                },
                                "v": "PRIMARY"
                            }
                        ]
                    }
                }
            },
            {
                "name": "DRIFTSTEMPERATUR",
                "type": "num",
                "value": "35",
                "ui": {
                    "label": {
                        "en-US": "Ønsket driftstemperatur"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "GROUND_START",
                "type": "num",
                "value": "2",
                "ui": {
                    "label": {
                        "en-US": "Starter ved temp overflate under:"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "GROUND_CHOICE",
                "type": "str",
                "value": "MIN",
                "ui": {
                    "label": {
                        "en-US": "Hvilken overflate-temp skal det styres på?"
                    },
                    "type": "select",
                    "opts": {
                        "opts": [
                            {
                                "l": {
                                    "en-US": "Laveste"
                                },
                                "v": "MIN"
                            },
                            {
                                "l": {
                                    "en-US": "Høyeste"
                                },
                                "v": "MAX"
                            }
                        ]
                    }
                }
            },
            {
                "name": "T25_MAX",
                "type": "num",
                "value": "50",
                "ui": {
                    "label": {
                        "en-US": "Temperaturvakt T25"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "AIR_START",
                "type": "num",
                "value": "5",
                "ui": {
                    "label": {
                        "en-US": "Starter ved temp luft under:"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "AIR_STOP_MAX",
                "type": "num",
                "value": "10",
                "ui": {
                    "label": {
                        "en-US": "Stenger ned ved luft over"
                    },
                    "type": "spinner"
                }
            },
            {
                "name": "AIR_STOP_MIN",
                "type": "num",
                "value": "-25",
                "ui": {
                    "label": {
                        "en-US": "Stenger ned ved luft under"
                    },
                    "type": "spinner"
                }
            },
            {
                "name": "GROUND_SETPOINT_SNOW",
                "type": "num",
                "value": "3",
                "ui": {
                    "label": {
                        "en-US": "Settpunkt overflate (Snø)"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "STANDBY",
                "type": "bool",
                "value": "false",
                "ui": {
                    "label": {
                        "en-US": "Automatisk Standby (grunnvarme i overflate) etter programmering"
                    },
                    "type": "checkbox"
                }
            },
            {
                "name": "GROUND_SETPOINT_STANDBY",
                "type": "num",
                "value": "2",
                "ui": {
                    "label": {
                        "en-US": "Settpunkt overflate (Standby)"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "GROUND_SETPOINT_DRYUP",
                "type": "num",
                "value": "3",
                "ui": {
                    "label": {
                        "en-US": "Settpunkt overflate (Opptørk)"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "GROUND_SETPOINT_FROST",
                "type": "num",
                "value": "0.2",
                "ui": {
                    "label": {
                        "en-US": "Settpunkt overflate (Rim) = Luft +"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "GROUND_SETPOINT_SNOW_PROB",
                "type": "num",
                "value": "2",
                "ui": {
                    "label": {
                        "en-US": "Settpunkt overflate (Snø sannsynlig)"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "SHUNT_MIN",
                "type": "num",
                "value": "5",
                "ui": {
                    "label": {
                        "en-US": "Minimum pådrag shunt sekundær under drift (%)"
                    },
                    "type": "spinner",
                    "opts": {
                        "min": 0,
                        "max": 100
                    }
                }
            },
            {
                "name": "TIMEOUT_DRYUP",
                "type": "num",
                "value": "6",
                "ui": {
                    "label": {
                        "en-US": "Timeout opptørk (timer)"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "TIMEOUT_FROST",
                "type": "num",
                "value": "6",
                "ui": {
                    "label": {
                        "en-US": "Timeout rim (timer)"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "TIMEOUT_SNOW_PROB",
                "type": "num",
                "value": "6",
                "ui": {
                    "label": {
                        "en-US": "Timeout snø sannsynlig (timer)"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "FROSTSIKRING_BAKKE_AKTIV",
                "type": "bool",
                "value": "true",
                "ui": {
                    "label": {
                        "en-US": "Frostsikring mellom rør"
                    },
                    "type": "checkbox"
                }
            },
            {
                "name": "FROSTSIKRING_BAKKE",
                "type": "num",
                "value": "-15",
                "ui": {
                    "label": {
                        "en-US": "Settpunkt Frostsikring Mellom Rør"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "PUMP_DELAY",
                "type": "num",
                "value": "0",
                "ui": {
                    "label": {
                        "en-US": "Tid mellom pumpe 1 og 2 under oppstart (minutter)"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "VALVE_START",
                "type": "num",
                "value": "20",
                "ui": {
                    "label": {
                        "en-US": "Oppstartsposisjon shunt sekundær"
                    },
                    "type": "hide"
                }
            },
            {
                "name": "START_DELAY",
                "type": "num",
                "value": "15",
                "ui": {
                    "label": {
                        "en-US": "Tid mellom pumpe 2 og regulering oppstart (minutter)"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "STARTUP_TIMEOUT",
                "type": "num",
                "value": "30",
                "ui": {
                    "label": {
                        "en-US": "Timeout oppstartsekvens (minutter)"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "P_START",
                "type": "num",
                "value": "1"
            },
            {
                "name": "I_START",
                "type": "num",
                "value": "10"
            },
            {
                "name": "D_START",
                "type": "num",
                "value": "0"
            },
            {
                "name": "P",
                "type": "num",
                "value": "1.5"
            },
            {
                "name": "I",
                "type": "num",
                "value": "10"
            },
            {
                "name": "D",
                "type": "num",
                "value": "0"
            },
            {
                "name": "T24_START",
                "type": "num",
                "value": "12"
            },
            {
                "name": "T26_START",
                "type": "num",
                "value": "15"
            },
            {
                "name": "GROUP",
                "type": "str",
                "value": "Undersoner"
            },
            {
                "name": "GROUND_SETPOINT_DRYUP_HIGH",
                "type": "num",
                "value": "3.5",
                "ui": {
                    "label": {
                        "en-US": "Opptørk Settpunkt overflate (Høy)"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "GROUND_SETPOINT_DRYUP_LOW",
                "type": "num",
                "value": "2.5",
                "ui": {
                    "label": {
                        "en-US": "Opptørk Settpunkt overflate (Lav)"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            },
            {
                "name": "DRYUP_COUNTER_MAX",
                "type": "num",
                "value": "2",
                "ui": {
                    "label": {
                        "en-US": "Antall sykluser opptørk"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "num",
                            "bool",
                            "json",
                            "bin",
                            "env",
                            "conf-types"
                        ]
                    }
                }
            }
        ],
        "meta": {},
        "color": "#DDAA99",
        "outputLabels": [
            "0-Sone",
            "Ventil"
        ],
        "status": {
            "x": 1080,
            "y": 460,
            "wires": [
                {
                    "id": "8ae1473f1105068c",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "45f85b23d6749768",
        "type": "mqtt out",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "topic": "",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e649abf8.0e7988",
        "x": 2430,
        "y": 140,
        "wires": []
    },
    {
        "id": "851d4b01a5e04948",
        "type": "switch",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "context",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "state",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 610,
        "y": 200,
        "wires": [
            [
                "b98889ae4e96023e",
                "28a72f038c8ad3be"
            ],
            [
                "cddecd448e0e1c47",
                "6bb6d6a741b3a880",
                "9f293b2551d1a330"
            ]
        ]
    },
    {
        "id": "c06574b2de8a4a56",
        "type": "json",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "property": "payload",
        "action": "str",
        "pretty": false,
        "x": 1270,
        "y": 380,
        "wires": [
            [
                "acd45ef39841fc05",
                "357bb8b39419867c"
            ]
        ]
    },
    {
        "id": "aa571f0f3e41d12f",
        "type": "change",
        "z": "c5ddcc1d8ce4e760",
        "name": "Set Status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.state",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 320,
        "wires": [
            [
                "650ca0e0eb67dad9"
            ]
        ]
    },
    {
        "id": "b98889ae4e96023e",
        "type": "change",
        "z": "c5ddcc1d8ce4e760",
        "name": "Valve",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.valve",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 850,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "d7ea9d12276f8323",
        "type": "rbe",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 150,
        "y": 360,
        "wires": [
            [
                "aa571f0f3e41d12f"
            ]
        ]
    },
    {
        "id": "8ae1473f1105068c",
        "type": "function",
        "z": "c5ddcc1d8ce4e760",
        "name": "function 8",
        "func": "msg.payload = flow.get(\"SD_ID\") + \" \" + msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 920,
        "y": 520,
        "wires": [
            [
                "41464b10fab495c4",
                "baf03c11c667993b"
            ]
        ]
    },
    {
        "id": "12a41730b06678c3",
        "type": "mqtt in",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "topic": "INIT",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 130,
        "y": 520,
        "wires": [
            [
                "5c69e0730034e9f0",
                "69a88d1b84549a72"
            ]
        ]
    },
    {
        "id": "938daeba7d9e28eb",
        "type": "json",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 850,
        "y": 380,
        "wires": [
            [
                "8ae1473f1105068c"
            ]
        ]
    },
    {
        "id": "650ca0e0eb67dad9",
        "type": "switch",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "istype",
                "v": "string",
                "vt": "string"
            },
            {
                "t": "istype",
                "v": "object",
                "vt": "object"
            },
            {
                "t": "istype",
                "v": "json",
                "vt": "json"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 710,
        "y": 320,
        "wires": [
            [
                "8ae1473f1105068c"
            ],
            [
                "938daeba7d9e28eb"
            ],
            [
                "8ae1473f1105068c"
            ]
        ]
    },
    {
        "id": "d144d681c6255432",
        "type": "mqtt in",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "topic": "CRITICAL",
        "qos": "1",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 80,
        "y": 460,
        "wires": [
            [
                "df5cef663a5ac77b"
            ]
        ]
    },
    {
        "id": "810cb26c8c09629a",
        "type": "function",
        "z": "c5ddcc1d8ce4e760",
        "name": "GLOBAL GROUND",
        "func": "if(msg.topic === \"T_GROUND\") {\n    if (Number(msg.payload) != 327.67 && isNaN(Number(msg.payload)) === true) {\n        let g = global.get(\"GROUND\");\n        if(g === undefined)\n            global.set(\"GROUND\", Number(msg.payload));\n        else if (g > Number(msg.payload))\n            global.set(\"GROUND\", Number(msg.payload));\n    } else {\n        msg.payload = global.get(\"GROUND\");\n    }\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\nglobal.set(\"GROUND\",undefined);",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 20,
        "wires": [
            []
        ]
    },
    {
        "id": "e4bec345763d14cd",
        "type": "mqtt in",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "topic": "",
        "qos": "2",
        "datatype": "json",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 1,
        "x": 610,
        "y": 980,
        "wires": [
            [
                "53f4aa6012edf0c4"
            ]
        ]
    },
    {
        "id": "8e7db3e2d613a2e8",
        "type": "function",
        "z": "c5ddcc1d8ce4e760",
        "name": "MQTT Setup",
        "func": "msg.action = 'subscribe';\nlet id = flow.get(\"SD_ID\");\nmsg.topic = [];\nfor (let i = 1; i <= 34; i++) {\n    msg.topic.push(\"sd/update/\" + (id * 100 + i));\n    msg.topic.push(\"modbus/update/\" + (id * 100 + i));\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\nconst reg = new Array(35).fill(0);\nflow.set(\"REG\", reg,'memoryOnly');",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 760,
        "wires": [
            [
                "e4bec345763d14cd"
            ]
        ]
    },
    {
        "id": "d82ec5920f88327b",
        "type": "inject",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 690,
        "y": 660,
        "wires": [
            [
                "8e7db3e2d613a2e8"
            ]
        ]
    },
    {
        "id": "cddecd448e0e1c47",
        "type": "change",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "type",
                "pt": "msg",
                "to": "ground_n",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.context['reg']",
                "pt": "msg",
                "to": "#:(memoryOnly)::REG",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "payload.context['logg']",
                "pt": "msg",
                "to": "SubSoneLOGG",
                "tot": "flow",
                "dc": true
            },
            {
                "t": "set",
                "p": "payload.context['ID']",
                "pt": "msg",
                "to": "SD_ID",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1580,
        "y": 340,
        "wires": [
            [
                "b679554a9ed95dc8",
                "477e1a2405473d3a"
            ]
        ]
    },
    {
        "id": "477e1a2405473d3a",
        "type": "uib-sender",
        "z": "c5ddcc1d8ce4e760",
        "url": "user",
        "uibId": "1a8f52fc0dc9ed73",
        "name": "",
        "topic": "",
        "passthrough": false,
        "return": false,
        "outputs": 0,
        "x": 2190,
        "y": 440,
        "wires": []
    },
    {
        "id": "27b2e1f5355aa548",
        "type": "switch",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "SD_ID",
                "vt": "flow"
            },
            {
                "t": "eq",
                "v": "MAINZONE_ID",
                "vt": "flow"
            },
            {
                "t": "eq",
                "v": "GROUP",
                "vt": "env"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 250,
        "y": 660,
        "wires": [
            [
                "69a88d1b84549a72",
                "5c69e0730034e9f0",
                "df5cef663a5ac77b"
            ],
            [
                "69a88d1b84549a72",
                "5c69e0730034e9f0",
                "df5cef663a5ac77b"
            ],
            [
                "69a88d1b84549a72",
                "5c69e0730034e9f0",
                "df5cef663a5ac77b"
            ]
        ]
    },
    {
        "id": "37fbaa0a2c9de50c",
        "type": "mqtt in",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "topic": "READY_FOR_CONTENT",
        "qos": "2",
        "datatype": "auto",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 130,
        "y": 820,
        "wires": [
            [
                "df5cef663a5ac77b"
            ]
        ]
    },
    {
        "id": "69a88d1b84549a72",
        "type": "function",
        "z": "c5ddcc1d8ce4e760",
        "name": "function 16",
        "func": "msg['_uib'] = {\n    \"reload\": true\n};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1210,
        "y": 500,
        "wires": [
            [
                "477e1a2405473d3a"
            ]
        ]
    },
    {
        "id": "017f9501762d8766",
        "type": "mqtt in",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "topic": "MAN",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 860,
        "wires": [
            [
                "cc7ccb92668e9b6f"
            ]
        ]
    },
    {
        "id": "1a440c6f78f1ca9d",
        "type": "change",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.val",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 820,
        "wires": [
            [
                "5f5daf143bfc6b16"
            ]
        ]
    },
    {
        "id": "2a899eab5af413f4",
        "type": "link in",
        "z": "c5ddcc1d8ce4e760",
        "name": "link in 3",
        "links": [
            "5f5daf143bfc6b16",
            "2887b5fef832c250",
            "f09c2e34af49a593"
        ],
        "x": 145,
        "y": 200,
        "wires": [
            [
                "22e2a32b701ad283"
            ]
        ]
    },
    {
        "id": "5f5daf143bfc6b16",
        "type": "link out",
        "z": "c5ddcc1d8ce4e760",
        "name": "link out 4",
        "mode": "link",
        "links": [
            "2a899eab5af413f4"
        ],
        "x": 665,
        "y": 860,
        "wires": []
    },
    {
        "id": "13966e6dcfb08842",
        "type": "mqtt in",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "topic": "VALVE",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 130,
        "y": 960,
        "wires": [
            [
                "cc7ccb92668e9b6f"
            ]
        ]
    },
    {
        "id": "1f6dad0b2fae53c6",
        "type": "mqtt in",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "topic": "TIMED",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 90,
        "y": 1240,
        "wires": [
            [
                "cc7ccb92668e9b6f"
            ]
        ]
    },
    {
        "id": "fe1cc1823a8b9254",
        "type": "mqtt in",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "topic": "START",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 90,
        "y": 1300,
        "wires": [
            [
                "cc7ccb92668e9b6f"
            ]
        ]
    },
    {
        "id": "2887b5fef832c250",
        "type": "link out",
        "z": "c5ddcc1d8ce4e760",
        "name": "link out 5",
        "mode": "link",
        "links": [
            "2a899eab5af413f4"
        ],
        "x": 1655,
        "y": 940,
        "wires": []
    },
    {
        "id": "ab63a66d32e1dc3c",
        "type": "switch",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "MAN",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "TOTAL",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "TIMED",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "reset",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "ENABLE",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "VALVE",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "AIR_STOP",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "STANDBY",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "RESET_ALARM",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "FROSTSIKRING_BAKKE_AKTIV",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "GROUND_SETPOINT_STANDBY",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "FROSTSIKRING_BAKKE",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "GROUND_SETPOINT_SNOW",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "SHUNT_MIN",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "TIMEOUT",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 15,
        "x": 1090,
        "y": 900,
        "wires": [
            [
                "960862945f0759f8"
            ],
            [
                "f08351f9193775cf"
            ],
            [
                "7cb5ba3a72a32351"
            ],
            [
                "608100b4eaaf8401"
            ],
            [
                "ae02e336518e8bc3"
            ],
            [
                "e8e2185cd8bcadfd"
            ],
            [
                "0262f89c867cd188"
            ],
            [
                "b3baee3a08bc4317"
            ],
            [
                "608100b4eaaf8401"
            ],
            [
                "b3baee3a08bc4317"
            ],
            [
                "0262f89c867cd188"
            ],
            [
                "0262f89c867cd188"
            ],
            [
                "0262f89c867cd188"
            ],
            [
                "e8e2185cd8bcadfd"
            ],
            [
                "2887b5fef832c250"
            ]
        ]
    },
    {
        "id": "960862945f0759f8",
        "type": "function",
        "z": "c5ddcc1d8ce4e760",
        "name": "function 18",
        "func": "if (msg.payload === 1)\n    msg.payload = false;\nelse if (msg.payload === 2) msg.payload = true;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1330,
        "y": 780,
        "wires": [
            [
                "2887b5fef832c250"
            ]
        ]
    },
    {
        "id": "f08351f9193775cf",
        "type": "change",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "SET_DURATION",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1310,
        "y": 980,
        "wires": [
            [
                "2887b5fef832c250"
            ]
        ]
    },
    {
        "id": "8986c9ba161cac34",
        "type": "inject",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "props": [
            {
                "p": "reset",
                "v": "true",
                "vt": "bool"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 90,
        "y": 480,
        "wires": [
            [
                "50b0ec2d1b09317d"
            ]
        ]
    },
    {
        "id": "22e2a32b701ad283",
        "type": "rbe",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 310,
        "y": 140,
        "wires": [
            [
                "df5cef663a5ac77b"
            ]
        ]
    },
    {
        "id": "f65f9e1d0c209dde",
        "type": "mqtt out",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "topic": "",
        "qos": "1",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e649abf8.0e7988",
        "x": 2050,
        "y": 700,
        "wires": []
    },
    {
        "id": "31b445516dbf548a",
        "type": "link out",
        "z": "c5ddcc1d8ce4e760",
        "name": "reset",
        "mode": "link",
        "links": [
            "9539ebc462ad2855",
            "2e5febe5172871e2",
            "403b7e80c828939a",
            "8667e15abe6ff552"
        ],
        "x": 465,
        "y": 760,
        "wires": []
    },
    {
        "id": "9539ebc462ad2855",
        "type": "link in",
        "z": "c5ddcc1d8ce4e760",
        "name": "link in 5",
        "links": [
            "31b445516dbf548a"
        ],
        "x": 1645,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "599accec891a5e85",
        "type": "mqtt in",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "topic": "ENABLE",
        "qos": "2",
        "datatype": "json",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 100,
        "y": 920,
        "wires": [
            [
                "cc7ccb92668e9b6f"
            ]
        ]
    },
    {
        "id": "40fc9c5aa0b22959",
        "type": "mqtt in",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "topic": "STANDBY",
        "qos": "2",
        "datatype": "json",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 300,
        "y": 1020,
        "wires": [
            [
                "cc7ccb92668e9b6f"
            ]
        ]
    },
    {
        "id": "a255a4fb74ee2cca",
        "type": "mqtt in",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "topic": "GROUND_SETPOINT_STANDBY",
        "qos": "2",
        "datatype": "json",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 360,
        "y": 1080,
        "wires": [
            [
                "cc7ccb92668e9b6f"
            ]
        ]
    },
    {
        "id": "34e1e9085fcea27d",
        "type": "switch",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "ABLE",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 390,
        "y": 80,
        "wires": [
            [
                "df5cef663a5ac77b"
            ]
        ]
    },
    {
        "id": "5c69e0730034e9f0",
        "type": "function",
        "z": "c5ddcc1d8ce4e760",
        "name": "reset",
        "func": "return {reset: true};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 600,
        "wires": [
            [
                "31b445516dbf548a",
                "d7ea9d12276f8323",
                "53f4aa6012edf0c4",
                "9f293b2551d1a330"
            ]
        ]
    },
    {
        "id": "6db69b894a40ccd0",
        "type": "inject",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "GET_PARENT_ID",
        "payload": "SD_ID",
        "payloadType": "flow",
        "x": 590,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "c4550e8df968c086",
        "type": "mqtt in",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "topic": "",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 1,
        "x": 270,
        "y": 1360,
        "wires": [
            [
                "285a3e1a7b8a2260"
            ]
        ]
    },
    {
        "id": "e84ec5ca02edda61",
        "type": "function",
        "z": "c5ddcc1d8ce4e760",
        "name": "function 34",
        "func": "msg.action = 'subscribe';\nlet id = flow.get(\"SD_ID\");\nmsg.topic = 'MAINZONE_ID/' + id;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 190,
        "y": 1460,
        "wires": [
            [
                "c4550e8df968c086"
            ]
        ]
    },
    {
        "id": "5d36915183cb777f",
        "type": "inject",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 1540,
        "wires": [
            [
                "e84ec5ca02edda61"
            ]
        ]
    },
    {
        "id": "285a3e1a7b8a2260",
        "type": "change",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "MAINZONE_ID",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "MAINZONE_ID",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 1440,
        "wires": [
            [
                "f09c2e34af49a593"
            ]
        ]
    },
    {
        "id": "f09c2e34af49a593",
        "type": "link out",
        "z": "c5ddcc1d8ce4e760",
        "name": "link out 9",
        "mode": "link",
        "links": [
            "2a899eab5af413f4"
        ],
        "x": 625,
        "y": 1440,
        "wires": []
    },
    {
        "id": "cc7ccb92668e9b6f",
        "type": "switch",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "property": "payload.id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "GROUP",
                "vt": "env"
            },
            {
                "t": "eq",
                "v": "SD_ID",
                "vt": "flow"
            },
            {
                "t": "eq",
                "v": "MAINZONE_ID",
                "vt": "flow"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 3,
        "x": 345,
        "y": 805,
        "wires": [
            [
                "1a440c6f78f1ca9d"
            ],
            [
                "1a440c6f78f1ca9d"
            ],
            [
                "1a440c6f78f1ca9d"
            ]
        ]
    },
    {
        "id": "6bb6d6a741b3a880",
        "type": "switch",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "property": "payload.changed",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 430,
        "y": 260,
        "wires": [
            [
                "d7ea9d12276f8323"
            ]
        ]
    },
    {
        "id": "baf03c11c667993b",
        "type": "rbe",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 1110,
        "y": 620,
        "wires": [
            [
                "de9be8e15cf9e5f5"
            ]
        ]
    },
    {
        "id": "de9be8e15cf9e5f5",
        "type": "function",
        "z": "c5ddcc1d8ce4e760",
        "name": "Logg",
        "func": "//let id = flow.get(\"SD_ID\");\nconsole.log(msg.payload);\nreturn null;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1110,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "2e5febe5172871e2",
        "type": "link in",
        "z": "c5ddcc1d8ce4e760",
        "name": "link in 8",
        "links": [
            "31b445516dbf548a"
        ],
        "x": 45,
        "y": 180,
        "wires": [
            [
                "22e2a32b701ad283"
            ]
        ]
    },
    {
        "id": "c846bbb346a680a5",
        "type": "function",
        "z": "c5ddcc1d8ce4e760",
        "name": "Changed external",
        "func": "let id = flow.get(\"SD_ID\");\nmsg.payload = Number(msg.payload);\nvar r = 0;\nif (msg.topic === \"sd/update/\" + (id * 100 + 1)) {\n        r = 1;\n        msg.topic = 'TOTAL';\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 3)) {\n    if (msg.payload === 2 || msg.payload === 1) {\n        msg.topic = 'MAN';\n    } \n    r = 3;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 5)) {\n    msg.topic = \"TIMED\";\n    r = 5;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 16)) {\n    if (msg.payload === 2) {\n        msg.topic = 'reset';\n    }\n    else if (msg.payload === 1 || msg.payload === 0) {\n        msg.topic = 'ENABLE';\n        //msg.payload = msg.payload === 1 ? false : true;\n    }\n    r = 16;\n} else if (msg.topic === \"sd/update/\" + (id * 100 + 18)) {\n    //if (msg.payload === 0)\n    msg.topic = 'VALVE';\n    r = 18;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 19)) {\n    //if (msg.payload === 0)\n    msg.topic = 'AIR_STOP_MIN';\n    r = 19;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 33)) {\n    if (msg.payload === 0)\n        msg.topic = 'RESET_ALARM';\n    r = 33;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 20)) {\n    msg.topic = 'AIR_STOP_MAX';\n    r = 20;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 23)) {\n    msg.topic = 'GROUND_SETPOINT_SNOW';    \n    r = 23;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 25)) {\n    msg.topic = 'GROUND_SETPOINT_SNOW_PROB';\n    r = 25;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 26)) {\n    msg.topic = 'GROUND_SETPOINT_STANDBY';\n    r = 26;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 27)) {\n    msg.topic = 'STANDBY';\n    r = 27;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 28)) {\n    msg.topic = 'FROSTSIKRING_BAKKE_AKTIV';\n    r = 28;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 29)) {\n    msg.topic = 'FROSTSIKRING_BAKKE';\n    r = 29;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 30)) {\n    msg.topic = 'TIMEOUT_DRYUP';\n    r = 30;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 31)) {\n    msg.topic = 'TIMEOUT_FROST';\n    r = 31;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 32)) {\n    msg.topic = 'TIMEOUT_SNOW_PROB';\n    r = 32;\n}\nelse if (msg.topic === \"sd/update/\" + (id * 100 + 34)) {\n    msg.topic = 'SHUNT_MIN';\n    r = 34;\n}\nif(r != 0) {\n    let reg = flow.get('REG', 'memoryOnly');\n    reg[r] = msg.payload;\n    flow.set('REG', reg, 'memoryOnly');\n}\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 860,
        "wires": [
            [
                "ab63a66d32e1dc3c"
            ]
        ]
    },
    {
        "id": "53f4aa6012edf0c4",
        "type": "rbe",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 670,
        "y": 1080,
        "wires": [
            [
                "27c384afca7dd12d"
            ]
        ]
    },
    {
        "id": "27c384afca7dd12d",
        "type": "switch",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "sd/update",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 789,
        "y": 969,
        "wires": [
            [
                "c846bbb346a680a5"
            ],
            [
                "135a16d101b1cc5b"
            ]
        ]
    },
    {
        "id": "50b0ec2d1b09317d",
        "type": "function",
        "z": "c5ddcc1d8ce4e760",
        "name": "MQTT Setup",
        "func": "msg.action = 'subscribe';\nmsg.topic = [];\nmsg.topic.push(\"TEST_ALARM\");\nmsg.topic.push(\"RESET_ALARM\");\nmsg.topic.push(\"SHUTDOWN\");\nmsg.topic.push(\"reset\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 130,
        "y": 600,
        "wires": [
            [
                "97333a91509f82ee"
            ]
        ]
    },
    {
        "id": "97333a91509f82ee",
        "type": "mqtt in",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "topic": "",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 1,
        "x": 110,
        "y": 680,
        "wires": [
            [
                "27b2e1f5355aa548"
            ]
        ]
    },
    {
        "id": "7cb5ba3a72a32351",
        "type": "function",
        "z": "c5ddcc1d8ce4e760",
        "name": "TIMED",
        "func": "let id = flow.get(\"SD_ID\");\nmsg.payload = { id: id, val: msg.payload };\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1557,
        "y": 1033,
        "wires": [
            [
                "f65f9e1d0c209dde"
            ]
        ]
    },
    {
        "id": "608100b4eaaf8401",
        "type": "change",
        "z": "c5ddcc1d8ce4e760",
        "name": "Append ID",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "SD_ID",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1330,
        "y": 860,
        "wires": [
            [
                "f65f9e1d0c209dde"
            ]
        ]
    },
    {
        "id": "ae02e336518e8bc3",
        "type": "function",
        "z": "c5ddcc1d8ce4e760",
        "name": "DISABLE",
        "func": "msg.payload = msg.payload === 1 ? false : true;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1360,
        "y": 920,
        "wires": [
            [
                "2887b5fef832c250"
            ]
        ]
    },
    {
        "id": "e8e2185cd8bcadfd",
        "type": "range",
        "z": "c5ddcc1d8ce4e760",
        "minin": "0",
        "maxin": "10000",
        "minout": "0",
        "maxout": "100",
        "action": "clamp",
        "round": false,
        "property": "payload",
        "name": "",
        "x": 1350,
        "y": 1050,
        "wires": [
            [
                "2887b5fef832c250"
            ]
        ]
    },
    {
        "id": "0262f89c867cd188",
        "type": "function",
        "z": "c5ddcc1d8ce4e760",
        "name": "Temp",
        "func": "msg.payload = msg.payload / 100;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1330,
        "y": 1120,
        "wires": [
            [
                "2887b5fef832c250"
            ]
        ]
    },
    {
        "id": "b3baee3a08bc4317",
        "type": "function",
        "z": "c5ddcc1d8ce4e760",
        "name": "STANDBY",
        "func": "msg.payload = msg.payload === 2 ? true : false;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1327,
        "y": 1193,
        "wires": [
            [
                "2887b5fef832c250"
            ]
        ]
    },
    {
        "id": "b9d06124ef1d8954",
        "type": "trigger",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "op1": "",
        "op2": "0",
        "op1type": "pay",
        "op2type": "str",
        "duration": "-1",
        "extend": false,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1280,
        "y": 80,
        "wires": [
            [
                "fdd7eaa2a491765b"
            ]
        ]
    },
    {
        "id": "fdd7eaa2a491765b",
        "type": "delay",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 1490,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "acd45ef39841fc05",
        "type": "rbe",
        "z": "c5ddcc1d8ce4e760",
        "d": true,
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 1410,
        "y": 200,
        "wires": [
            [
                "357bb8b39419867c"
            ]
        ]
    },
    {
        "id": "403b7e80c828939a",
        "type": "link in",
        "z": "c5ddcc1d8ce4e760",
        "name": "link in 15",
        "links": [
            "31b445516dbf548a"
        ],
        "x": 1255,
        "y": 220,
        "wires": [
            [
                "acd45ef39841fc05"
            ]
        ]
    },
    {
        "id": "357bb8b39419867c",
        "type": "change",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "STATE",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1600,
        "y": 200,
        "wires": [
            [
                "226bf4e68087519c",
                "d6a03dfe356edeb6"
            ]
        ]
    },
    {
        "id": "226bf4e68087519c",
        "type": "delay",
        "z": "c5ddcc1d8ce4e760",
        "d": true,
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 1790,
        "y": 160,
        "wires": [
            [
                "d6a03dfe356edeb6"
            ]
        ]
    },
    {
        "id": "d6a03dfe356edeb6",
        "type": "change",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "STATE",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1980,
        "y": 200,
        "wires": [
            [
                "6ac890ba2c63fab1"
            ]
        ]
    },
    {
        "id": "135a16d101b1cc5b",
        "type": "function",
        "z": "c5ddcc1d8ce4e760",
        "name": "Changed",
        "func": "let id = flow.get(\"SD_ID\");\nmsg.payload = Number(msg.payload);\nvar r = 0;\n\nvar index = msg.topic.split('/');\nif(isNaN(Number(index[2])) === false) {\n    r = Number(index[2]) - id * 100;\n    let reg = flow.get('REG', 'memoryOnly');\n    reg[r] = msg.payload;\n    flow.set('REG', reg, 'memoryOnly');\n\n}  \nmsg.payload = {context: {}};\nmsg.topic === \"state\";\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 959,
        "y": 1028,
        "wires": [
            [
                "cddecd448e0e1c47"
            ]
        ]
    },
    {
        "id": "413221faa6c83582",
        "type": "mqtt in",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "topic": "GROUND_SETPOINT_SNOW",
        "qos": "2",
        "datatype": "json",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 350,
        "y": 1140,
        "wires": [
            [
                "cc7ccb92668e9b6f"
            ]
        ]
    },
    {
        "id": "6671fc916a313de4",
        "type": "mqtt in",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "topic": "AIR_STOP_MAX",
        "qos": "2",
        "datatype": "json",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 300,
        "y": 1240,
        "wires": [
            [
                "cc7ccb92668e9b6f"
            ]
        ]
    },
    {
        "id": "12f156775c210c72",
        "type": "mqtt in",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "topic": "AIR_STOP_MIN",
        "qos": "2",
        "datatype": "json",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 397,
        "y": 1304,
        "wires": [
            [
                "cc7ccb92668e9b6f"
            ]
        ]
    },
    {
        "id": "df5cef663a5ac77b",
        "type": "awstm",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "test": "",
        "simclock": false,
        "machine": "single",
        "xstateDefinition": "// Available variables/objects/functions:\n// xstate\n// - .Machine\n// - .interpret\n// - .assign\n// - .send\n// - .sendParent\n// - .spawn\n// - .raise\n// - .actions\n//\n// Common\n// - setInterval, setTimeout, clearInterval, clearTimeout\n// - node.send, node.warn, node.log, node.error\n// - context.get, context.set\n// - flow.get, flow.set\n// - env.get\n// - util\n\nconst { assign, Machine, spawn, sendParent, send, actions } = xstate;\nconst { raise } = actions;\nif (global.get(\"SD_ID\") === undefined) global.set(\"SD_ID\", {latest: 1});\n\nif (flow.get(\"TOTAL_DURATION\") === undefined)\n  flow.set(\"TOTAL_DURATION\", 0);\n\n  const runtime = Machine({\n    id: 'runtime',\n    context: () => ( \n      {\n      start: Date.now(),\n      now: Date.now(),\n      duration: 0, // minutter\n      total: flow.get(\"TOTAL_DURATION\"),\n      previous: Date.now(),\n    }),\n    initial: 'active',\n    states: {    \n      active: {\n        entry: [assign({        \n          duration: (ctx, evt) => {\n            //node.send({topic: 'time', payload: ctx});\n            let now = Date.now();\n            if ((now - ctx.start) === 0)\n              return 0;\n            return Math.floor((now - ctx.start) / 1000 / 60);\n          },\n          total: (ctx, evt) => {\n            let passed = Date.now() - ctx.now;//ctx.now is now old\n            if (passed < 0)\n              return ctx.total;\n            let total = flow.get(\"TOTAL_DURATION\") + passed / 1000 / 60 / 60;\n            flow.set(\"TOTAL_DURATION\", total);\n            //node.send({ topic: 'TOTAL_DURATION', payload: total });\n            return total;\n          },\n          previous: (ctx, evt) => ctx.now,\n          now: (ctx, evt) => Date.now(),\n        }),\n        sendParent((context, event) => ({\n          //...context,\n          payload: { total: flow.get(\"TOTAL_DURATION\"), running: context.duration },\n          type: 'TOTAL_DURATION'\n        }))],\n        after: {\n          60000: 'active'\n        },\n      },\n    }\n  });\n\nif (flow.get(\"SD_ID\") === undefined) {\n  flow.set(\"SD_ID\", global.get(\"SD_ID\").latest);\n  global.set(\"SD_ID\", {\n    ...global.get(\"SD_ID\"),\n    latest: global.get(\"SD_ID\").latest + 1,\n  }, \"file\");\n}\nconst ID = flow.get(\"SD_ID\");\n\n// First define names guards, actions, ...\n\n/**\n * Guards\n */\n\n//TODO TEST\nconst guardHeatON = (ctx, _evt) => {\n  //if (ctx.startup === true)\n  //return true;\n  if (ctx.frostsikring_bakke === true && ctx.between_pipes === \"error\" && ctx.ground < ctx.between_pipes_setpoint)\n    return true;\n  if ((ctx.ground === undefined || ctx.ground === \"error\") && ctx.ignore_ground === false)\n    return false;\n  if (ctx.frostsikring_bakke === true && ctx.between_pipes < ctx.between_pipes_setpoint)\n    return true;\n  if (ctx.standby === true) {\n    if ((ctx.ignore_ground === false && ctx.ground < ctx.standby_ground_setpoint) || (ctx.ignore_ground === true && global.get(\"GROUND\") != undefined && global.get(\"GROUND\") < ctx.standby_ground_setpoint))\n      return true;\n  }\n  if (ctx.ignore_ground === false && ctx.ground < ctx.ground_setpoint)\n    return true;\n  if (ctx.ignore_ground === true && global.get(\"GROUND\") != undefined && global.get(\"GROUND\") < ctx.ground_setpoint)\n    return true;\n  else return false;\n};\n\n//TODO TEST\nconst guardHeatOFF = (ctx, _evt) => {\n  if (ctx.ignore_ground === false && (ctx.ground === undefined || ctx.ground === \"error\"))\n    return true;\n  if (ctx.standby === true) {\n    if ((ctx.ignore_ground === false && ctx.ground > ctx.standby_ground_setpoint) || (ctx.ignore_ground === true && global.get(\"GROUND\") != undefined && global.get(\"GROUND\") > ctx.standby_ground_setpoint))\n      return true;\n  }\n  if (ctx.ignore_ground === false && ctx.ground > ctx.ground_setpoint)\n    return true;\n  if (ctx.ignore_ground === true && global.get(\"GROUND\") != undefined && global.get(\"GROUND\") > ctx.ground_setpoint)\n    return true;\n  else return false;\n};\n\nconst guardStart = (ctx, _evt) => {\n  if (ctx.frostsikring_bakke === true && ctx.between_pipes === \"error\" && ctx.ground < -10)\n    return true;\n  if (ctx.ground === undefined || ctx.air === undefined || (ctx.ground === \"error\" && ctx.ignore_ground === false) || (ctx.air === \"error\" && ctx.ignore_air === false))\n    return false;\n  if (ctx.frostsikring_bakke === true && ctx.between_pipes != undefined && ctx.between_pipes < ctx.between_pipes_setpoint)\n    return true;\n  if (ctx.timed > 0) //\n    return true;\n  if(ctx.air >= ctx.air_stop_max || ctx.air <= ctx.air_stop_min)\n    return false;\n  if(ctx.standby)\n    return true;\n  if ((ctx.snow || ctx.frost || ctx.snow_prob) && ((ctx.ignore_ground === false && ctx.ground < ctx.ground_start) || (ctx.ignore_ground === true && global.get(\"GROUND\") != undefined && global.get(\"GROUND\") < ctx.ground_start)) && (ctx.air < ctx.air_start || ctx.ignore_air === true))//startup\n    return true;\n  else return false;\n};\n\nconst guardStop = (ctx, evt) => {\n  return (ctx.ignore_air === false && (ctx.air >= ctx.air_stop_max || ctx.air <= ctx.air_stop_min) && ctx.timed < 2);\n}\n\n/**\n * Actions\n */\n\nconst setValve = assign({\n  valve: (context, event) => {\n    if (event.payload > 100)\n      return 100;\n    if (event.payload < 0)\n      return 0;\n    else return event.payload;\n  }\n});\n\nconst allowed_delta = 1/60;\n\nif (flow.get(\"ENV_DRIFTSTEMPERATUR\") != undefined)\n  if (flow.get(\"ENV_DRIFTSTEMPERATUR\") != env.get(\"DRIFTSTEMPERATUR\"))\n    flow.set(\"SETPOINT\", env.get(\"DRIFTSTEMPERATUR\"));\n\nif (flow.get(\"ENV_GROUND_SETPOINT_STANDBY\") != undefined)\n  if (flow.get(\"ENV_GROUND_SETPOINT_STANDBY\") != env.get(\"GROUND_SETPOINT_STANDBY\"))\n    flow.set(\"GROUND_SETPOINT_STANDBY\", env.get(\"GROUND_SETPOINT_STANDBY\"));\n\nif (flow.get(\"ENV_STANDBY\") != undefined)\n  if (flow.get(\"ENV_STANDBY\") != env.get(\"STANDBY\"))\n    flow.set(\"STANDBY\", env.get(\"STANDBY\"));\n\n//TIMEOUT_DRYUP\nif (flow.get(\"ENV_TIMEOUT_DRYUP\") != undefined)\n  if (flow.get(\"ENV_TIMEOUT_DRYUP\") != env.get(\"TIMEOUT_DRYUP\"))\n    flow.set(\"TIMEOUT_DRYUP\", env.get(\"TIMEOUT_DRYUP\"));\n\n//SHUNT_MIN\nif (flow.get(\"ENV_SHUNT_MIN\") != undefined)\n  if (flow.get(\"ENV_SHUNT_MIN\") != env.get(\"SHUNT_MIN\"))\n    flow.set(\"SHUNT_MIN\", env.get(\"SHUNT_MIN\"));\n\n//TIMEOUT_FROST\nif (flow.get(\"ENV_TIMEOUT_FROST\") != undefined)\n  if (flow.get(\"ENV_TIMEOUT_FROST\") != env.get(\"TIMEOUT_FROST\"))\n    flow.set(\"TIMEOUT_FROST\", env.get(\"TIMEOUT_FROST\"));\n//TIMEOUT_SNOW_PROB\nif (flow.get(\"ENV_TIMEOUT_SNOW_PROB\") != undefined)\n  if (flow.get(\"ENV_TIMEOUT_SNOW_PROB\") != env.get(\"TIMEOUT_SNOW_PROB\"))\n    flow.set(\"TIMEOUT_SNOW_PROB\", env.get(\"TIMEOUT_SNOW_PROB\"));\n\n//GROUND_SETPOINT_SNOW\nif (flow.get(\"ENV_GROUND_SETPOINT_SNOW\") != undefined)\n  if (flow.get(\"ENV_GROUND_SETPOINT_SNOW\") != env.get(\"GROUND_SETPOINT_SNOW\"))\n    flow.set(\"GROUND_SETPOINT_SNOW\", env.get(\"GROUND_SETPOINT_SNOW\"));\n\n//GROUND_SETPOINT_SNOW_PROB\nif (flow.get(\"ENV_GROUND_SETPOINT_SNOW_PROB\") != undefined)\n  if (flow.get(\"ENV_GROUND_SETPOINT_SNOW_PROB\") != env.get(\"GROUND_SETPOINT_SNOW_PROB\"))\n    flow.set(\"GROUND_SETPOINT_SNOW_PROB\", env.get(\"GROUND_SETPOINT_SNOW_PROB\"));\n\n//FROSTSIKRING_BAKKE\nif (flow.get(\"ENV_FROSTSIKRING_BAKKE\") != undefined)\n  if (flow.get(\"ENV_FROSTSIKRING_BAKKE\") != env.get(\"FROSTSIKRING_BAKKE\"))\n    flow.set(\"FROSTSIKRING_BAKKE\", env.get(\"FROSTSIKRING_BAKKE\"));\n\n//FROSTSIKRING_BAKKE_AKTIV\nif (flow.get(\"ENV_FROSTSIKRING_BAKKE_AKTIV\") != undefined)\n  if (flow.get(\"ENV_FROSTSIKRING_BAKKE_AKTIV\") != env.get(\"FROSTSIKRING_BAKKE_AKTIV\"))\n    flow.set(\"FROSTSIKRING_BAKKE_AKTIV\", env.get(\"FROSTSIKRING_BAKKE_AKTIV\"));\n\n//AIR_STOP_MIN\nif (flow.get(\"AIR_STOP_MIN\") != undefined && flow.get(\"ENV_AIR_STOP_MIN\") != undefined)\n    if (flow.get(\"ENV_AIR_STOP_MIN\") != env.get(\"AIR_STOP_MIN\"))\n      flow.set(\"AIR_STOP_MIN\", env.get(\"AIR_STOP_MIN\"));\n//AIR_STOP_MAX\nif (flow.get(\"AIR_STOP_MAX\") != undefined && flow.get(\"ENV_AIR_STOP_MAX\") != undefined)\n    if (flow.get(\"ENV_AIR_STOP_MAX\") != env.get(\"AIR_STOP_MAX\") )\n      flow.set(\"AIR_STOP_MAX\", env.get(\"AIR_STOP_MAX\"));\n\n\nif (flow.get(\"SETPOINT\") === undefined)\n  flow.set(\"SETPOINT\", env.get(\"DRIFTSTEMPERATUR\"));\n\nif (flow.get(\"GROUND_SETPOINT_STANDBY\") === undefined)\n  flow.set(\"GROUND_SETPOINT_STANDBY\", env.get(\"GROUND_SETPOINT_STANDBY\"));\n\n\n//GROUND_SETPOINT_SNOW\nif (flow.get(\"GROUND_SETPOINT_SNOW\") === undefined)\n  flow.set(\"GROUND_SETPOINT_SNOW\", env.get(\"GROUND_SETPOINT_SNOW\"));\n\nif (flow.get(\"STANDBY\") === undefined)\n  flow.set(\"STANDBY\", env.get(\"STANDBY\"));\n\n//flow.set(\"ENABLE\", env.get(\"ENABLE\"));\n\nif (flow.get(\"ENABLED\") === undefined)\n  flow.set(\"ENABLED\", env.get(\"ENABLE\"));\n\n\nif (flow.get(\"AIR_STOP_MIN\") === undefined)\n  flow.set(\"AIR_STOP_MIN\", env.get(\"AIR_STOP_MIN\"));\n\n  //ENV_AIR_STOP_MAX\nif (flow.get(\"AIR_STOP_MAX\") === undefined)\n  flow.set(\"AIR_STOP_MAX\", env.get(\"AIR_STOP_MAX\"));\n  \n  //SHUNT_MIN\nif (flow.get(\"ENV_SHUNT_MIN\") != undefined)\n  flow.set(\"SHUNT_MIN\", env.get(\"SHUNT_MIN\"));\n\n\n  //TIMEOUT_DRYUP\nif (flow.get(\"ENV_TIMEOUT_DRYUP\") != undefined)\n  flow.set(\"TIMEOUT_DRYUP\", env.get(\"TIMEOUT_DRYUP\"));\n//TIMEOUT_FROST\nif (flow.get(\"ENV_TIMEOUT_FROST\") != undefined)\n  flow.set(\"TIMEOUT_FROST\", env.get(\"TIMEOUT_FROST\"));\n//TIMEOUT_SNOW_PROB\nif (flow.get(\"ENV_TIMEOUT_SNOW_PROB\") != undefined)\n  flow.set(\"TIMEOUT_SNOW_PROB\", env.get(\"TIMEOUT_SNOW_PROB\"));\n\n//FROSTSIKRING_BAKKE_AKTIV\nif (flow.get(\"ENV_FROSTSIKRING_BAKKE_AKTIV\") != undefined)\n  flow.set(\"FROSTSIKRING_BAKKE_AKTIV\", env.get(\"FROSTSIKRING_BAKKE_AKTIV\"));\n//FROSTSIKRING_BAKKE\nif (flow.get(\"ENV_FROSTSIKRING_BAKKE\") != undefined)\n  flow.set(\"FROSTSIKRING_BAKKE\", env.get(\"FROSTSIKRING_BAKKE\"));\n\n\n//GROUND_SETPOINT_SNOW_PROB\nif (flow.get(\"GROUND_SETPOINT_SNOW_PROB\") === undefined)\n  flow.set(\"GROUND_SETPOINT_SNOW_PROB\", env.get(\"GROUND_SETPOINT_SNOW_PROB\"));\n\n\n//Old ENV\nflow.set(\"ENV_GROUND_SETPOINT_STANDBY\", env.get(\"GROUND_SETPOINT_STANDBY\"));\nflow.set(\"ENV_STANDBY\", env.get(\"STANDBY\"));\nflow.set(\"ENV_AIR_STOP_MIN\", env.get(\"AIR_STOP_MIN\"));\nflow.set(\"ENV_AIR_STOP_MAX\", env.get(\"AIR_STOP_MAX\"));\nflow.set(\"ENV_FROSTSIKRING_BAKKE_AKTIV\", env.get(\"FROSTSIKRING_BAKKE_AKTIV\"));\nflow.set(\"ENV_FROSTSIKRING_BAKKE\", env.get(\"FROSTSIKRING_BAKKE\"));\nflow.set(\"ENV_GROUND_SETPOINT_SNOW\", env.get(\"GROUND_SETPOINT_SNOW\"));\nflow.set(\"ENV_GROUND_SETPOINT_SNOW_PROB\", env.get(\"GROUND_SETPOINT_SNOW_PROB\"));\nflow.set(\"ENV_TIMEOUT_DRYUP\", env.get(\"TIMEOUT_DRYUP\"));\nflow.set(\"ENV_TIMEOUT_FROST\", env.get(\"TIMEOUT_FROST\"));\nflow.set(\"ENV_TIMEOUT_SNOW_PROB\", env.get(\"TIMEOUT_SNOW_PROB\"));\nflow.set(\"ENV_SHUNT_MIN\", env.get(\"SHUNT_MIN\"));\n\nconst setEnable = assign({\n  enabled: (context, event) => {\n    flow.set(\"ENABLED\", event.payload);\n    return event.payload;\n  }\n});\n\nconst setTIMEOUT_DRYUP = assign({\n  TIMEOUT_DRYUP: (context, event) => event.payload\n});\nconst setTIMEOUT_FROST = assign({\n  TIMEOUT_FROST: (context, event) => event.payload\n});\nconst setTIMEOUT_SNOW_PROB = assign({\n  TIMEOUT_SNOW_PROB: (context, event) => event.payload\n});\n\nconst setGROUND_SETPOINT_SNOW = assign({\n  ground_setpoint: (context, event) => {\n    flow.set(\"GROUND_SETPOINT_SNOW\", event.payload);\n    return event.payload;}\n});\n\nconst setSTANDBY = assign({\n  standby: (context, event) => {\n    flow.set(\"STANDBY\", event.payload);\n    return event.payload;\n  }\n});\n\nconst setAIR_START = assign({\n  air_start: (_context, event) => event.payload\n});\n\nconst setGROUND_START = assign({\n  ground_start: (_context, event) => event.payload\n});\n\nconst setGROUND_SETPOINT_STANDBY = assign({\n  standby_ground_setpoint: (_context, event) => {\n    flow.set(\"GROUND_SETPOINT_STANDBY\", Number(event.payload));\n    return Number(event.payload);\n  }\n});\n\nconst setGROUND_SETPOINT_FROST = assign({\n  ground_setpoint_frost: (_context, event) => event.payload\n});\n\nconst setGROUND_SETPOINT_SNOW_PROB = assign({\n  ground_setpoint_snow_prob: (_context, event) => event.payload\n});\n\nconst setFROSTSIKRING_BAKKE = assign({\n  between_pipes_setpoint: (_context, event) => event.payload\n});\n\nconst setSHUNT_MIN = assign({\n  valve_min: (_context, event) => event.payload\n});\n\nconst setMan = assign({\n  manual: (context, event) => event.payload\n});\n\nconst setSnow = assign({\n  snow: (ctx, evt) => {\n    if (ctx.snow_local === true || ctx.snow_api === true || evt.payload === true)\n      return true;\n    else return false;\n  }\n});\n\nconst setSnowProb = assign({\n  snow_prob: (ctx, evt) => {\n    if (ctx.snow_prob_local === true || ctx.snow_prob_api === true || evt.payload === true)\n      return true;\n    else return false;\n  }\n});\n\nconst setFrost = assign({\n  frost: (context, event) => event.payload\n});\n\nconst setT26 = assign({\n  T26: (context, event) => event.payload\n});\n\nconst setT25 = assign({\n  T25: (context, event) => event.payload\n});\n\nconst setAir = assign({\n  air: (context, event) => event.payload\n});\n\nconst setGround = assign({\n  ground: (context, event) => event.payload\n});\n\nconst setBetween = assign({\n  between_pipes: (context, event) => event.payload\n});\n\n/**\n * Activities\n */\n\n/***************************\n * Main machine definition * \n ***************************/\nreturn {\n  machine: {\n    id: 'subzone',\n    context: () => ( {\n      ID: ID,\n      type: 'subzone',\n      //lavenergy: false,\n      valve: 0,\n      manual: false,\n      enabled: flow.get(\"ENABLED\"),\n      air: undefined,\n      ground: undefined,\n      T26: undefined,\n      T25: undefined,\n      T24: undefined,\n      snow: false,\n      frost: false,\n      snow_prob: false,\n      ground_setpoint: flow.get(\"GROUND_SETPOINT_SNOW\"),\n      //dryup_ground_setpoint: env.get(\"GROUND_SETPOINT_DRYUP\"),\n      dryup_ground_setpoint_low: env.get(\"GROUND_SETPOINT_DRYUP_LOW\"),\n      dryup_ground_setpoint_high: env.get(\"GROUND_SETPOINT_DRYUP_HIGH\"),\n      air_start: env.get(\"AIR_START\"),\n      ground_start: env.get(\"GROUND_START\"),\n      standby: flow.get(\"STANDBY\"),\n      standby_ground_setpoint: flow.get(\"GROUND_SETPOINT_STANDBY\"),\n      ground_setpoint_frost: env.get(\"GROUND_SETPOINT_FROST\"),\n      ground_setpoint_snow_prob: flow.get(\"GROUND_SETPOINT_SNOW_PROB\"),\n      between_pipes: undefined,\n      between_pipes_setpoint: flow.get(\"FROSTSIKRING_BAKKE\"),\n      frostsikring_bakke: flow.get(\"FROSTSIKRING_BAKKE_AKTIV\"),\n      timed: 0,\n      valve_min: flow.get(\"SHUNT_MIN\"),\n      valve_max: 100,\n      TIMEOUT_DRYUP: flow.get(\"TIMEOUT_DRYUP\"),\n      TIMEOUT_FROST: flow.get(\"TIMEOUT_FROST\"),\n      TIMEOUT_SNOW_PROB: flow.get(\"TIMEOUT_SNOW_PROB\"),\n      mainzone_id: flow.get(\"MAINZONE_ID\"),\n      error: 0,\n      ignore_air: false,\n      ignore_ground: false,\n      total_duration: flow.get(\"TOTAL_DURATION\"),\n      running_duration: 0,\n      reason: 0,\n      label: env.get(\"LABEL\"),\n      snow_api: false,\n      snow_local: false,\n      snow_prob_api: false,\n      snow_prob_local: false,\n      air_stop_max: flow.get(\"AIR_STOP_MAX\"),\n      air_stop_min: flow.get(\"AIR_STOP_MIN\"),\n      group: env.get(\"GROUP\"),\n      feed_forward: false,\n      dryup_counter: 0,\n      dryup_counter_max: env.get(\"DRYUP_COUNTER_MAX\"),\n      air_api: undefined,\n    }),\n    initial: 'disabled',\n    on: {\n      ENABLE: { actions: 'setEnable' },\n      CRITICAL: 'critical',\n      IGNORE_GROUND: {actions: assign({ignore_ground: true,error: 0})},\n      IGNORE_AIR: {actions: assign({ignore_air: true,error: 0})},\n      //LAVENERGYENABLE: { actions: assign({ lavenergy: (ctx, evt) => evt.payload }) },\n      AIR_STOP_MIN: { actions: [(_ctx,evt)=> flow.set('AIR_STOP_MIN', Number(evt.payload)), assign({ air_stop_min: (ctx, evt) => Number(evt.payload) })] },\n      AIR_STOP_MAX: { actions: [(_ctx,evt)=> flow.set('AIR_STOP_MAX', Number(evt.payload)), assign({ air_stop_max: (ctx, evt) => Number(evt.payload) })] },\n      TEST_ALARM: { actions: assign({ error: 6 }) },\n      RESET_ALARM: { actions: assign({ error: 0 }) },\n      LAVENERGYVALVE: { actions: assign({ valve_max: (ctx, evt) => Number(evt.payload) }) },      \n      T26: { actions: assign({ T26: (ctx, evt) => isNaN(Number(evt.payload)) ? undefined : (Number(evt.payload) === 327.67 ? \"error\" : Number(evt.payload)) }) },\n      T25: { actions: assign({ T25: (ctx, evt) => isNaN(Number(evt.payload)) ? undefined : (Number(evt.payload) === 327.67 ? \"error\" : Number(evt.payload))})},\n      //SNOW: { actions: 'setSnow' },\n      SNOW_API: { actions: [assign({ snow_api: (ctx, evt) => evt.payload }), 'setSnow'] },\n      SNOW_LOCAL: { actions: [assign({ snow_local: (ctx, evt) => evt.payload }), 'setSnow'] },\n      SNOW_PROB_API: { actions: [assign({ snow_prob_api: (ctx, evt) => evt.payload }), 'setSnowProb'] },\n      SNOW_PROB_LOCAL: { actions: [assign({ snow_prob_local: (ctx, evt) => evt.payload }), 'setSnowProb'] },\n      FROST: { actions: 'setFrost' },\n      //SNOW_PROB: { actions: 'setSnowProb' },\n      T_AIR: { actions: assign({ air: (ctx, evt) => {\n        if(ctx.air_api != undefined && ctx.air_api < Number(evt.payload))\n        return ctx.air_api;        \n        else return Number(evt.payload) === 327.67 ? \"error\" : Number(evt.payload);\n      } }) },\n      AIR_TEMPERATURE_API: { actions: assign({ air_api: (ctx, evt) => Number(evt.payload.air_temperature), air: (ctx,evt)=> {\n        if(ctx.air > Number(evt.payload.air_temperature) || ctx.air === undefined)\n        return Number(evt.payload.air_temperature);\n        else return ctx.air;\n      } }) },\n      T_GROUND: { actions: assign({ ground: (ctx, evt) => evt.payload === 327.67 ? \"error\" : Number(evt.payload) }) },\n      BETWEEN_PIPES: { actions: assign({ between_pipes: (ctx, evt) => evt.payload === 327.67 ? \"error\" : Number(evt.payload) }) },\n      GROUND_SETPOINT_SNOW: { actions: 'setGROUND_SETPOINT_SNOW' },\n      AIR_START: { actions: 'setAIR_START' },\n      GROUND_START: { actions: 'setGROUND_START' },\n      STANDBY: { actions: 'setSTANDBY' },\n      GROUND_SETPOINT_STANDBY: { actions: 'setGROUND_SETPOINT_STANDBY' },\n      GROUND_SETPOINT_FROST: { actions: ['setGROUND_SETPOINT_FROST'] },\n      GROUND_SETPOINT_SNOW_PROB: { actions: [(_ctx,evt)=> flow.set('GROUND_SETPOINT_SNOW_PROB',Number(evt.payload)),'setGROUND_SETPOINT_SNOW_PROB'] },\n      FROSTSIKRING_BAKKE: { actions: [(_ctx,evt)=> flow.set('FROSTSIKRING_BAKKE',Number(evt.payload)),'setFROSTSIKRING_BAKKE'] },\n      FROSTSIKRING_BAKKE_AKTIV: { actions: [(_ctx,evt)=> flow.set('FROSTSIKRING_BAKKE',evt.payload),assign({frostsikring_bakke: (ctx,evt) => evt.payload})] },\n      SHUNT_MIN: { actions: [(_ctx,evt)=> flow.set('SHUNT_MIN',evt.payload),'setSHUNT_MIN'] },\n      TIMEOUT_DRYUP: { actions: [(_ctx,evt)=>flow.set('TIMEOUT_DRYUP',Number(evt.payload)), 'setTIMEOUT_DRYUP'] },\n      TIMEOUT_FROST: { actions: [(_ctx,evt)=>flow.set('TIMEOUT_FROST',Number(evt.payload)),'setTIMEOUT_FROST'] },\n      TIMEOUT_SNOW_PROB: { actions: [(_ctx,evt)=>flow.set('TIMEOUT_SNOW_PROB',Number(evt.payload)),'setTIMEOUT_SNOW_PROB'] },\n      SET_DURATION: {\n        actions: assign({\n          total_duration: (ctx, evt) => {\n            flow.set(\"TOTAL_DURATION\", evt.payload);\n            return evt.payload;\n          }\n        })\n      },\n      MAINZONE_ID: { actions: assign({ mainzone_id: (ctx, evt) => evt.payload }) },\n    },\n    initial: 'disabled',\n    states: {\n      disabled: {\n        //entry: assign({ valve: 0, pump1: false, pump2: false, valve_prime: 0 }),\n        always: { target: 'enabled', cond: (ctx, evt) => ctx.enabled === true },\n      },\n      enabled: {\n        exit: assign({ valve: 0 }),\n        always: [\n          //{ target: '#critical', cond: (ctx, evt) => ctx.T25 === \"error\", actions: assign({ error: 3 }) },\n          { target: '#ground_error', cond: (ctx, evt) => ctx.ignore_ground === false && ctx.ground === \"error\", actions: assign({ error: 5 }) },\n          { target: '#air_error', cond: (ctx, evt) => ctx.air === \"error\" & ctx.ignore_air === false, actions: assign({ error: 6 }) },\n          { target: 'disabled', cond: (ctx, evt) => ctx.enabled === false },\n        ],\n        //type: 'parallel',\n        initial: 'auto',\n        states: {\n          auto: {\n            always: { target: 'manual', cond: (ctx, evt) => ctx.manual === true },\n            initial: 'off',\n            states: {\n              frost_protection: {\n                entry: assign({ valve: 0 }),\n                after: {\n                  'FROST_DELAY': 'on'\n                }\n              },\n              off: {\n                id: 'off',\n                always: { target: 'on', cond: 'guardStart' },\n                entry: [(ctx,_evt)=> console.log(ctx.ID + \" Off\"), assign({ valve: 0, timed: 0 })],\n              },\n              on: {\n                initial: 'startup',\n                exit: [(ctx,_evt)=> node.send({topic: 'DECR_ZONE', payload: ctx.ID}), assign({ running_duration: 0, valve: 0, timed: 0 })],\n                invoke: {\n                  src: runtime,\n                },\n                entry: [(ctx,_evt)=> node.send({topic: 'INCR_ZONE', payload: ctx.ID}),assign({\n                  reason: (ctx, evt) => {\n                    //node.send({topic: 'INCR_ZONE', payload: ctx.ID});\n                    if (ctx.snow_local === true) {\n                      console.log(ctx.ID + \" Oppstart snø lokal\");\n                      return 1;\n                    }\n                    if (ctx.frost === true) {\n                      console.log(ctx.ID + \" Oppstart rim\");\n                      return 2;\n                    }\n                    if (ctx.snow_prob_local === true) {\n                      console.log(ctx.ID + \" Oppstart snø sannsynlig lokal\");\n                      return 3;\n                    }\n                    if (ctx.timed > 1) {\n                      console.log(ctx.ID + \" Oppstart på tid\");\n                      return 4;\n                    }\n                    if (ctx.timed > 0) {\n                      console.log(ctx.ID + \" Oppstart sekvens\");\n                      return 5;\n                    }\n                    if (ctx.standby === true) {\n                      console.log(ctx.ID + \" Oppstart på Standby\");\n                      return 6;\n                    }\n                    if (ctx.snow_api === true) {\n                      console.log(ctx.ID + \" Oppstart snø værdata\");\n                      return 7;\n                    }\n                    if (ctx.snow_prob_api === true) {\n                      console.log(ctx.ID + \" Oppstart snø sannsynlig værdata\");\n                      return 8;\n                    }\n                    else return ctx.reason;\n                  }\n                })],\n                always: [\n                  { target: 'frost_protection', cond: (ctx, evt) => ctx.T24 < 6 },\n                ],\n                on: {\n                  SHUTDOWN: { target: '#shutdown', actions: assign({ timed: 0 }) },\n                  TOTAL_DURATION: {\n                    actions: assign({\n                      running_duration: (ctx, evt) => evt.payload.running, total_duration: (ctx, evt) => {\n                        //node.send({topic: 'time', payload: evt.payload});\n                        return Number(evt.payload.total.toFixed(2));\n                      }\n                    })\n                  }\n                },\n                states: {\n                  shutdown: {\n                    id: 'shutdown',\n                    entry: [(ctx,_evt)=> console.log(ctx.ID + \": Stenger ned\"), assign({ valve: 0})],\n                    always: [\n                      { target: 'timed', cond: (ctx, evt) => ctx.timed > 1 },\n                      //{ target: 'snow', cond: (ctx, evt) => ctx.snow === true && 'guardStop' === false },\n                      //{ target: 'frost', cond: (ctx, evt) => ctx.frost === true && 'guardStop' === false },\n                      //{ target: 'snow_prob', cond: (ctx, evt) => ctx.snow_prob === true && 'guardStop' === false },\n                      { target: 'frost_between_pipes', cond: (ctx, evt) => ctx.frostsikring_bakke === true && ctx.between_pipes < ctx.between_pipes_setpoint },\n                      //{ target: 'standby', cond: (ctx, evt) => ctx.standby === true },\n                      //{ target: '#startup', cond: 'guardStart' },\n                      { target: '#off' }],                   \n                  },\n                  startup: {\n                    id: 'startup',\n                    always: { target: '#shutdown', cond: 'guardStop' },\n                    exit: assign({valve: (ctx,_evt) => ctx.valve_max}),                    \n                    always: [\n                      { target: 'timed', cond: (ctx, evt) => ctx.timed > 1 },\n                      { target: 'snow', cond: (ctx, evt) => ctx.snow === true },\n                      { target: 'frost', cond: (ctx, evt) => ctx.frost === true },\n                      { target: 'snow_prob', cond: (ctx, evt) => ctx.snow_prob === true },\n                      { target: 'frost_between_pipes', cond: (ctx, evt) => ctx.frostsikring_bakke === true && ctx.between_pipes < ctx.between_pipes_setpoint },\n                      { target: 'standby', cond: (ctx, evt) => ctx.standby === true },\n                      { target: 'dryup' },//default                    \n                    ]\n                  },\n                  standby: {\n                    id: 'standby',\n                    always: [\n                      { target: '#shutdown', cond: 'guardStop' },\n                      { target: 'timed', cond: (ctx, evt) => ctx.timed > 1 },\n                      { target: 'snow', cond: (ctx, evt) => ctx.snow === true },\n                      { target: 'shutdown', cond: (ctx, evt) => ctx.standby === false }\n                    ],\n                    initial: 'heating',\n                    states: {\n                      heating: {\n                        always: { target: 'cooling', cond: (ctx, evt) => ctx.ignore_ground === false && ctx.ground > ctx.standby_ground_setpoint },\n                        entry: assign({valve: (ctx,evt)=> ctx.valve_max, feed_forward: true}),                        \n                      },\n                      cooling: {\n                        always: { target: 'heating', cond: (ctx, evt) => ctx.ground < ctx.standby_ground_setpoint },\n                        entry: assign({ valve: (ctx,evt)=> ctx.valve_min, feed_forward: false }),                       \n                      }\n                    }\n                  },\n                  timed: {\n                    id: 'timed',\n                    exit: assign({ timed: 0 }),\n                    always: [\n                      { target: '#shutdown', cond: 'guardStop' },\n                      {target: 'shutdown', cond: (ctx,evt)=> ctx.timed === 0}],\n                    after: {\n                      TIMED: { target: 'shutdown' }\n                    },\n                    initial: 'heating',\n                    states: {\n                      heating: {\n                        always: { target: 'cooling', cond: (ctx, evt) => ctx.ignore_ground === false && ctx.ground > ctx.ground_setpoint },\n                        entry: assign({valve: (ctx,evt)=> ctx.valve_max}),                        \n                      },\n                      cooling: {\n                        always: { target: 'heating', cond: (ctx, evt) => ctx.ground <= ctx.ground_setpoint },\n                        entry: assign({ valve: (ctx,evt)=> ctx.valve_min }),\n                      }\n                    }\n                  },\n                  snow: {\n                    id: 'snow',\n                    always: [\n                      { target: 'timed', cond: (ctx, evt) => ctx.timed > 1 },\n                      { target: '#shutdown', cond: 'guardStop' },\n                      { target: 'dryup', cond: (ctx, evt) => ctx.snow === false }],\n                    initial: 'heating',\n                    states: {\n                      heating: {\n                        always: { target: 'cooling', cond: (ctx, evt) => ctx.ignore_ground === false && ctx.ground > ctx.ground_setpoint },\n                        entry: assign({valve: (ctx,evt)=> ctx.valve_max}),\n                      },\n                      cooling: {\n                        always: { target: 'heating', cond: (ctx, evt) => ctx.ground <= ctx.ground_setpoint },\n                        entry: assign({ valve: (ctx,evt)=> ctx.valve_min }),\n                      }\n                    }\n                  },\n                  dryup: {\n                    id: 'dryup',\n                    entry: assign({ dryup_counter: 0 }),\n                    always: [\n                      { target: 'timed', cond: (ctx, evt) => ctx.timed > 1 },\n                      { target: '#shutdown', cond: 'guardStop' },\n                      { target: 'snow', cond: (ctx, evt) => ctx.snow === true },\n                      { target: '#shutdown', cond: (ctx, evt) => ctx.dryup_counter >= ctx.dryup_counter_max },\n                      //{ target: 'standby', cond: (ctx, evt) => ctx.standby === true },\n                    ],\n                    initial: 'heating',\n                        states: {\n                          heating: {\n                            always: { target: 'cooling', cond: (ctx, evt) => ctx.ignore_ground === false && ctx.ground > ctx.dryup_ground_setpoint_high },\n                            entry: assign({valve: (ctx,evt)=> ctx.valve_max}),\n                          },\n                          cooling: {\n                            always: { target: 'heating', cond: (ctx, evt) => ctx.ground <= ctx.dryup_ground_setpoint_low },\n                            entry: assign({ valve: (ctx,evt)=> ctx.valve_min,dryup_counter: (ctx, evt) => ctx.dryup_counter + 1 }),\n                          }\n                        },                    \n                    after: {\n                      DRYUP: [{ target: '#shutdown', cond: (ctx, evt) => ctx.standby === false },\n                          { target: '#standby', cond: (ctx, evt) => ctx.standby === true },\n                          ]\n                    },                   \n                  },\n                  frost: {\n                    id: 'frost',\n                    entry: assign({ pump1: true, pump2: true }),\n                    always: [\n                      { target: 'timed', cond: (ctx, evt) => ctx.timed > 1 },\n                      { target: 'snow', cond: (ctx, evt) => ctx.snow === true },\n                      { target: 'standby', cond: (ctx, evt) => ctx.standby === true },\n                      { target: '#shutdown', cond: 'guardStop' },\n                      { target: 'shutdown', cond: (ctx, evt) => ctx.frost === false }\n                    ],\n                    initial: 'heating',\n                    states: {\n                      heating: {\n                        always: { target: 'cooling', cond: (ctx, evt) => ctx.ignore_ground === false && ctx.ground > ctx.ground_setpoint_frost + ctx.air },\n                        entry: assign({valve: (ctx,evt)=> ctx.valve_max}),\n                      },\n                      cooling: {\n                        always: { target: 'heating', cond: (ctx, evt) => ctx.ground <= ctx.ground_setpoint_frost + ctx.air },\n                        entry: assign({ valve: (ctx,evt)=> ctx.valve_min }),\n                      },\n                    },\n                    after: {\n                      FROST: { target: 'shutdown' }\n                    },\n                  },\n                  frost_between_pipes: {\n                    id: 'frost_between_pipes',\n                    entry: assign({ pump1: true, pump2: true }),\n                    always: [\n                      { target: 'timed', cond: (ctx, evt) => ctx.timed > 1 },\n                      { target: 'snow', cond: (ctx, evt) => ctx.snow === true },\n                      { target: 'standby', cond: (ctx, evt) => ctx.standby === true },\n                      { target: 'shutdown', cond: (ctx, evt) => ctx.between_pipes > ctx.between_pipes_setpoint }\n\n                    ],\n                    entry: assign({valve: (ctx,evt)=> ctx.valve_max}),\n                  },\n                  snow_prob: {\n                    id: 'snow_prob',\n                    always: [\n                      { target: 'timed', cond: (ctx, evt) => ctx.timed > 1 },\n                      { target: 'snow', cond: (ctx, evt) => ctx.snow === true },\n                      { target: 'standby', cond: (ctx, evt) => ctx.standby === true },\n                      { target: 'shutdown', cond: 'guardStop' },\n                      { target: 'shutdown', cond: (ctx, evt) => ctx.snow_prob === false }\n                    ],\n                    initial: 'heating',\n                    states: {\n                      heating: {\n                        always: { target: 'cooling', cond: (ctx, evt) => ctx.ignore_ground === false && ctx.ground > ctx.ground_setpoint_snow_prob },\n                        entry: assign({valve: (ctx,evt)=> ctx.valve_max}),\n                      },\n                      cooling: {\n                        always: { target: 'heating', cond: (ctx, evt) => ctx.ground <= ctx.ground_setpoint_snow_prob },\n                        entry: assign({ valve: (ctx,evt)=> ctx.valve_min }),\n                      }\n                    },\n                    after: {\n                      SNOW_PROB: { target: 'shutdown' }\n                    }\n                  },\n                },\n              },\n            },\n          },\n          manual: {\n            always: { target: 'auto', cond: (ctx, evt) => ctx.manual === false },\n            on: {\n              VALVE: { actions: 'setValve' },\n            },\n          },\n        },\n        on: {\n          MAN: { actions: 'setMan' },\n          START: { actions: assign({ timed: 1 }) },\n          TIMED: { actions: assign({ timed: (ctx, evt) => evt.payload }) },\n        }\n      },\n      critical: {\n        id: 'critical',\n        entry: assign({ valve: 0, timed: 0 }),\n        \n      },\n      warning: {\n        id: 'warning',\n        entry: assign({ valve: 0, timed: 0 }),\n        states: {\n          ground_error: {\n            id: 'ground_error',\n            entry: (ctx,evt)=>console.log('SD_ID: ' + ctx.ID + \" ALARM: Feil på bakkeføler\"),\n            always: { target: '#off', cond: (ctx, evt) => ctx.ignore_ground === true || ctx.ground != \"error\", actions: assign({ error: 0 }) },\n            exit: (ctx,evt)=>{\n              if(ctx.ignore_ground === true)\n              console.log('SD_ID:' + ctx.ID + \" UNDERTRYKKET: Feil på bakkeføler\");\n            },\n          },\n          air_error: {\n            id: 'air_error',\n            entry: (ctx,evt)=>console.log('SD_ID: ' + ctx.ID + \" ALARM: Feil på luftføler\"),\n            always: { target: '#off', cond: (ctx, evt) => ctx.ignore_air === true || ctx.air != \"error\", actions: assign({ error: 0 }) },\n            exit: (ctx,evt)=>{              \n              if(ctx.ignore_air === true)\n              console.log('SD_ID:' + ctx.ID + \" UNDERTRYKKET: Feil på luftføler\");\n            },\n          }\n        },\n        on: {\n          SUPPRESS_WARNING: 'enabled'\n        }\n      }\n    }\n  },\n  // Configuration containing guards, actions, activities, ...\n  // see above\n  config: {\n    guards: { guardHeatON, guardStart, guardHeatOFF, guardStop },\n    actions: { setT25, setTIMEOUT_DRYUP, setSTANDBY, setTIMEOUT_FROST, setTIMEOUT_SNOW_PROB, setSHUNT_MIN, setFROSTSIKRING_BAKKE, setGROUND_SETPOINT_SNOW_PROB, setGROUND_SETPOINT_FROST, setGROUND_SETPOINT_STANDBY, setGROUND_START, setAIR_START, setValve, setEnable, setSnow, setFrost, setBetween, setGround, setAir, setSnowProb, setT26, setMan, setGROUND_SETPOINT_SNOW },\n    activities: {},\n    delays: {     \n      'TIMED': (context, event) => {\n        return context.timed * 60 * 60 * 1000;\n      },\n      'FROST_DELAY': (context, event) => {\n        return 5 * 60 * 1000;\n      },\n      'DRYUP': (context, event) => {\n        return context.TIMEOUT_DRYUP * 60 * 60 * 1000;//hours\n      },\n      'FROST': (context, event) => {\n        return context.TIMEOUT_FROST * 60 * 60 * 1000;//hours\n      },\n      'SNOW_PROB': (context, event) => {\n        return context.TIMEOUT_SNOW_PROB * 60 * 60 * 1000;//hours\n      },\n    }\n  },\n  // Define listeners (can be an array of functions)\n  //    Functions get called on every state/context update\n};",
        "noerr": 0,
        "x": 390,
        "y": 440,
        "wires": [
            [
                "851d4b01a5e04948"
            ],
            []
        ]
    },
    {
        "id": "0c02eca1ebf6cdb4",
        "type": "mqtt in",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "topic": "IGNORE_GROUND",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 720,
        "wires": [
            [
                "27b2e1f5355aa548"
            ]
        ]
    },
    {
        "id": "6fb6917daa902921",
        "type": "mqtt in",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "topic": "IGNORE_AIR",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 108,
        "y": 765,
        "wires": [
            [
                "27b2e1f5355aa548"
            ]
        ]
    },
    {
        "id": "a47ee61091999b78",
        "type": "function",
        "z": "c5ddcc1d8ce4e760",
        "name": "Modify",
        "func": "if(msg.payload.context['total_duration'] != undefined)\n    msg.payload.context['total_duration'] = Math.floor(msg.payload.context['total_duration']);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 440,
        "wires": [
            [
                "ac7ed0a0d8952b1e"
            ]
        ]
    },
    {
        "id": "adfc857d92f42441",
        "type": "function",
        "z": "c5ddcc1d8ce4e760",
        "name": "Save SubSone Logg to flow",
        "func": "    flow.set(\"SubSoneLOGG\", msg.payload)\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1760,
        "y": 1500,
        "wires": [
            []
        ]
    },
    {
        "id": "3da941faf2a995aa",
        "type": "mqtt in",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "topic": "REQSUBSONELOGG",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1160,
        "y": 1420,
        "wires": [
            [
                "d298a63b09add347"
            ]
        ]
    },
    {
        "id": "d298a63b09add347",
        "type": "switch",
        "z": "c5ddcc1d8ce4e760",
        "name": "For me?",
        "property": "payload.id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "SD_ID",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1400,
        "y": 1413,
        "wires": [
            [
                "5dc6fa7444639d0e"
            ]
        ]
    },
    {
        "id": "5dc6fa7444639d0e",
        "type": "subflow:3c5166e4c8bbb8a7",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "x": 1480,
        "y": 1480,
        "wires": [
            [
                "adfc857d92f42441"
            ]
        ]
    },
    {
        "id": "ac7ed0a0d8952b1e",
        "type": "function",
        "z": "c5ddcc1d8ce4e760",
        "name": "Modify context",
        "func": "let id = flow.get(\"SD_ID\");\nmsg.topic = \"APP_STATE/\" + id;\nvar ctx = {\n    ID: msg.payload.context.ID,\n    type:'subzone',\n    total_duration: msg.payload.context.total_duration,\n    running_duration: msg.payload.context.running_duration,\n    manual: msg.payload.context.manual,\n    timed: msg.payload.context.timed,\n    mainzone_id: msg.payload.context.mainzone_id,\n    reason: msg.payload.context.reason,\n    T25: msg.payload.context.T25 | 0,\n    T26: msg.payload.context.T26 | 0,\n    valve: msg.payload.context.valve,\n    air: msg.payload.context.air | 0,\n    ground: msg.payload.context.ground | 0,\n    air_stop_min: msg.payload.context.air_stop_min,    \n    air_stop_max: msg.payload.context.air_stop_max,\n    ground_setpoint: msg.payload.context.ground_setpoint,\n    ground_setpoint_frost: msg.payload.context.ground_setpoint_frost,\n    ground_setpoint_snow_prob: msg.payload.context.ground_setpoint_snow_prob,\n    standby: msg.payload.context.standby,\n    standby_ground_setpoint: msg.payload.context.standby_ground_setpoint,\n    frostsikring_bakke: msg.payload.context.frostsikring_bakke,\n    between_pipes_setpoint: msg.payload.context.between_pipes_setpoint,\n    TIMEOUT_DRYUP: msg.payload.context.TIMEOUT_DRYUP,\n    TIMEOUT_FROST: msg.payload.context.TIMEOUT_FROST,\n    TIMEOUT_SNOW_PROB: msg.payload.context.TIMEOUT_SNOW_PROB,\n    valve_min: msg.payload.context.valve_min,\n    error: msg.payload.context.error,\n};\nmsg.payload = {context: ctx, state: msg.payload.state};\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1080,
        "y": 380,
        "wires": [
            [
                "c06574b2de8a4a56",
                "b431170a0beafab6"
            ]
        ]
    },
    {
        "id": "6ac890ba2c63fab1",
        "type": "switch",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "INIT",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2210,
        "y": 180,
        "wires": [
            [
                "45f85b23d6749768"
            ]
        ]
    },
    {
        "id": "58ad714929cbfea6",
        "type": "switch",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "T_GROUND",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "BETWEEN_PIPES",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "T_AIR",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 4,
        "x": 110,
        "y": 80,
        "wires": [
            [
                "d3c2135506bb28ae"
            ],
            [
                "d3c2135506bb28ae"
            ],
            [
                "d3c2135506bb28ae"
            ],
            [
                "22e2a32b701ad283"
            ]
        ]
    },
    {
        "id": "d3c2135506bb28ae",
        "type": "link call",
        "z": "c5ddcc1d8ce4e760",
        "name": "Filter",
        "links": [
            "d4de3c636cf09a63"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 90,
        "y": 300,
        "wires": [
            [
                "0c5d9a8b1b73c629"
            ]
        ]
    },
    {
        "id": "c105253bb69b5dfc",
        "type": "switch",
        "z": "c5ddcc1d8ce4e760",
        "g": "af6b298a799d75da",
        "name": "",
        "property": "GROUND_CHOICE",
        "propertyType": "env",
        "rules": [
            {
                "t": "eq",
                "v": "MIN",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "MAX",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 2550,
        "y": 500,
        "wires": [
            [
                "08203b215837e333"
            ],
            [
                "36cf6f4ad81a24f6"
            ]
        ]
    },
    {
        "id": "08203b215837e333",
        "type": "smooth",
        "z": "c5ddcc1d8ce4e760",
        "g": "af6b298a799d75da",
        "name": "MIN",
        "property": "payload",
        "action": "min",
        "count": "10",
        "round": "1",
        "mult": "multi",
        "reduce": false,
        "x": 2690,
        "y": 520,
        "wires": [
            [
                "716ce6f44ce4b028"
            ]
        ]
    },
    {
        "id": "36cf6f4ad81a24f6",
        "type": "smooth",
        "z": "c5ddcc1d8ce4e760",
        "g": "af6b298a799d75da",
        "name": "MAX",
        "property": "payload",
        "action": "max",
        "count": "10",
        "round": "1",
        "mult": "multi",
        "reduce": false,
        "x": 2653,
        "y": 556,
        "wires": [
            [
                "716ce6f44ce4b028"
            ]
        ]
    },
    {
        "id": "716ce6f44ce4b028",
        "type": "smooth",
        "z": "c5ddcc1d8ce4e760",
        "g": "af6b298a799d75da",
        "name": "",
        "property": "payload",
        "action": "low",
        "count": "10",
        "round": "1",
        "mult": "multi",
        "reduce": false,
        "x": 2840,
        "y": 560,
        "wires": [
            [
                "74c821d8d0cff8c3"
            ]
        ]
    },
    {
        "id": "d4de3c636cf09a63",
        "type": "link in",
        "z": "c5ddcc1d8ce4e760",
        "g": "af6b298a799d75da",
        "name": "link in 35",
        "links": [],
        "x": 2455,
        "y": 500,
        "wires": [
            [
                "c105253bb69b5dfc"
            ]
        ]
    },
    {
        "id": "74c821d8d0cff8c3",
        "type": "link out",
        "z": "c5ddcc1d8ce4e760",
        "g": "af6b298a799d75da",
        "name": "link out 35",
        "mode": "return",
        "links": [],
        "x": 3245,
        "y": 540,
        "wires": []
    },
    {
        "id": "28a72f038c8ad3be",
        "type": "link out",
        "z": "c5ddcc1d8ce4e760",
        "name": "link out 38",
        "mode": "link",
        "links": [
            "183567ef7e034764"
        ],
        "x": 575,
        "y": 240,
        "wires": []
    },
    {
        "id": "b431170a0beafab6",
        "type": "link out",
        "z": "c5ddcc1d8ce4e760",
        "name": "link out 39",
        "mode": "link",
        "links": [
            "448a47b29197a3d1"
        ],
        "x": 1595,
        "y": 740,
        "wires": []
    },
    {
        "id": "93198e861ad4fc03",
        "type": "mqtt out",
        "z": "c5ddcc1d8ce4e760",
        "d": true,
        "g": "b8f192e5c3b5d240",
        "name": "",
        "topic": "v1/devices/me/telemetry",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1cf00ad4a64d0402",
        "x": 550,
        "y": 1980,
        "wires": []
    },
    {
        "id": "48881edeca5d8197",
        "type": "function",
        "z": "c5ddcc1d8ce4e760",
        "d": true,
        "g": "b8f192e5c3b5d240",
        "name": "function 146",
        "func": "msg.payload = {'ALARM': {\"ID\": flow.get(\"SD_ID\"), \"code\": msg.payload}};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 1880,
        "wires": [
            [
                "93198e861ad4fc03"
            ]
        ]
    },
    {
        "id": "09141b2980a8dcbb",
        "type": "rbe",
        "z": "c5ddcc1d8ce4e760",
        "d": true,
        "g": "b8f192e5c3b5d240",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 590,
        "y": 1820,
        "wires": [
            [
                "48881edeca5d8197"
            ]
        ]
    },
    {
        "id": "17dbf1efe43b7365",
        "type": "change",
        "z": "c5ddcc1d8ce4e760",
        "d": true,
        "g": "b8f192e5c3b5d240",
        "name": "error code",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.error",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 350,
        "y": 1800,
        "wires": [
            [
                "09141b2980a8dcbb"
            ]
        ]
    },
    {
        "id": "075e0fd6ac015dad",
        "type": "function",
        "z": "c5ddcc1d8ce4e760",
        "d": true,
        "g": "b8f192e5c3b5d240",
        "name": "function 147",
        "func": "let val = msg.payload;\nmsg.payload = {'ID': flow.get('SD_ID'), 'type': flow.get('TYPE')};\nmsg.payload[msg.topic] = val;\nmsg.payload = {'APP_STATE': msg.payload};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 2060,
        "wires": [
            [
                "93198e861ad4fc03"
            ]
        ]
    },
    {
        "id": "dc705ec76242703a",
        "type": "rbe",
        "z": "c5ddcc1d8ce4e760",
        "d": true,
        "g": "b8f192e5c3b5d240",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 390,
        "y": 1880,
        "wires": [
            [
                "075e0fd6ac015dad"
            ]
        ]
    },
    {
        "id": "f9e50e6c7b9eadbb",
        "type": "split",
        "z": "c5ddcc1d8ce4e760",
        "d": true,
        "g": "b8f192e5c3b5d240",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "topic",
        "x": 270,
        "y": 1940,
        "wires": [
            [
                "dc705ec76242703a"
            ]
        ]
    },
    {
        "id": "b0034f561bc763b7",
        "type": "function",
        "z": "c5ddcc1d8ce4e760",
        "d": true,
        "g": "b8f192e5c3b5d240",
        "name": "function 148",
        "func": "let val = msg.payload.context;\nval['state'] = msg.payload.state;\nflow.set('TYPE', msg.payload.context.type);\nmsg.payload = val;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 190,
        "y": 1860,
        "wires": [
            [
                "f9e50e6c7b9eadbb"
            ]
        ]
    },
    {
        "id": "448a47b29197a3d1",
        "type": "link in",
        "z": "c5ddcc1d8ce4e760",
        "d": true,
        "g": "b8f192e5c3b5d240",
        "name": "TB in",
        "links": [
            "b431170a0beafab6"
        ],
        "x": 155,
        "y": 2000,
        "wires": [
            [
                "b0034f561bc763b7"
            ]
        ]
    },
    {
        "id": "183567ef7e034764",
        "type": "link in",
        "z": "c5ddcc1d8ce4e760",
        "d": true,
        "g": "b8f192e5c3b5d240",
        "name": "TB in alarm",
        "links": [
            "28a72f038c8ad3be"
        ],
        "x": 205,
        "y": 1780,
        "wires": [
            [
                "17dbf1efe43b7365"
            ]
        ]
    },
    {
        "id": "a34b2836841d9986",
        "type": "split",
        "z": "c5ddcc1d8ce4e760",
        "d": true,
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "topic",
        "property": "payload.context",
        "x": 2290,
        "y": 920,
        "wires": [
            [
                "081fc231cf21056d"
            ]
        ]
    },
    {
        "id": "081fc231cf21056d",
        "type": "function",
        "z": "c5ddcc1d8ce4e760",
        "d": true,
        "name": "function 154",
        "func": "msg.type = 'ground_singel';\nlet val = msg.payload.context;\nmsg.payload.context = {'ID': flow.get('SD_ID')};\nmsg.payload.context[msg.topic] = val; \nreturn msg;\n//return {topic: msg.topic, payload: msg.payload, _event: msg._event, parts: msg.parts};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2530,
        "y": 880,
        "wires": [
            [
                "f0f448850c79bca3"
            ]
        ]
    },
    {
        "id": "f0f448850c79bca3",
        "type": "link out",
        "z": "c5ddcc1d8ce4e760",
        "d": true,
        "name": "link out 42",
        "mode": "return",
        "links": [],
        "x": 2815,
        "y": 900,
        "wires": []
    },
    {
        "id": "9e1f5e4bf7b84824",
        "type": "link in",
        "z": "c5ddcc1d8ce4e760",
        "d": true,
        "name": "context",
        "links": [],
        "x": 2095,
        "y": 940,
        "wires": [
            [
                "a34b2836841d9986"
            ]
        ]
    },
    {
        "id": "b679554a9ed95dc8",
        "type": "link call",
        "z": "c5ddcc1d8ce4e760",
        "d": true,
        "name": "",
        "links": [
            "9e1f5e4bf7b84824"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1840,
        "y": 300,
        "wires": [
            [
                "d13f6dd2d4b62a50"
            ]
        ]
    },
    {
        "id": "d13f6dd2d4b62a50",
        "type": "rbe",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload.context",
        "topi": "topic",
        "x": 2027,
        "y": 338,
        "wires": [
            [
                "477e1a2405473d3a"
            ]
        ]
    },
    {
        "id": "e29c2a24d4dea95c",
        "type": "inject",
        "z": "c5ddcc1d8ce4e760",
        "d": true,
        "name": "",
        "props": [
            {
                "p": "reset",
                "v": "true",
                "vt": "bool"
            }
        ],
        "repeat": "43200",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 330,
        "y": 2220,
        "wires": [
            [
                "dc705ec76242703a",
                "09141b2980a8dcbb"
            ]
        ]
    },
    {
        "id": "8667e15abe6ff552",
        "type": "link in",
        "z": "c5ddcc1d8ce4e760",
        "d": true,
        "name": "link in 40",
        "links": [
            "31b445516dbf548a"
        ],
        "x": 595,
        "y": 2180,
        "wires": [
            [
                "dc705ec76242703a",
                "09141b2980a8dcbb"
            ]
        ]
    },
    {
        "id": "41464b10fab495c4",
        "type": "function",
        "z": "c5ddcc1d8ce4e760",
        "name": "function 1",
        "func": "let val = msg.payload.includes('on') ? true : false;\nmsg.payload = {ID: flow.get('SD_ID'), state: val};\nmsg.topic = 'SUBZONE';\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 100,
        "wires": [
            [
                "b9d06124ef1d8954"
            ]
        ]
    },
    {
        "id": "320818d380a4fd1e",
        "type": "mqtt in",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "topic": "MAINZONE_ID",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 500,
        "y": 140,
        "wires": [
            [
                "cbad0bb3bbe316d7",
                "df5cef663a5ac77b"
            ]
        ]
    },
    {
        "id": "cbad0bb3bbe316d7",
        "type": "change",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "MAINZONE_ID",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 730,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "9f293b2551d1a330",
        "type": "rbe",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 570,
        "y": 420,
        "wires": [
            [
                "a47ee61091999b78"
            ]
        ]
    },
    {
        "id": "0c5d9a8b1b73c629",
        "type": "delay",
        "z": "c5ddcc1d8ce4e760",
        "name": "",
        "pauseType": "queue",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 190,
        "y": 240,
        "wires": [
            [
                "22e2a32b701ad283"
            ]
        ]
    },
    {
        "id": "af6b298a799d75da",
        "type": "group",
        "z": "c5ddcc1d8ce4e760",
        "name": "Filter Input",
        "style": {
            "label": true
        },
        "nodes": [
            "c105253bb69b5dfc",
            "08203b215837e333",
            "36cf6f4ad81a24f6",
            "716ce6f44ce4b028",
            "d4de3c636cf09a63",
            "74c821d8d0cff8c3"
        ],
        "x": 2414,
        "y": 459,
        "w": 872,
        "h": 142
    },
    {
        "id": "b8f192e5c3b5d240",
        "type": "group",
        "z": "c5ddcc1d8ce4e760",
        "name": "Send to Thingsboard",
        "style": {
            "label": true
        },
        "nodes": [
            "93198e861ad4fc03",
            "48881edeca5d8197",
            "09141b2980a8dcbb",
            "17dbf1efe43b7365",
            "075e0fd6ac015dad",
            "dc705ec76242703a",
            "f9e50e6c7b9eadbb",
            "b0034f561bc763b7",
            "448a47b29197a3d1",
            "183567ef7e034764"
        ],
        "x": 94,
        "y": 1739,
        "w": 692,
        "h": 362
    },
    {
        "id": "1cf00ad4a64d0402",
        "type": "mqtt-broker",
        "name": "",
        "broker": "aiwell-dashboard.aiwell.no",
        "port": "8883",
        "tls": "03f7ccf6282913ab",
        "clientid": "",
        "autoConnect": true,
        "usetls": true,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "false",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closeRetain": "false",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willRetain": "false",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "03f7ccf6282913ab",
        "type": "tls-config",
        "name": "",
        "cert": "/keys/chain.pem",
        "key": "/keys/deviceKey.pem",
        "ca": "",
        "certname": "chain.pem",
        "keyname": "deviceKey.pem",
        "caname": "thingsboard_server.pem",
        "servername": "",
        "verifyservercert": false,
        "alpnprotocol": ""
    },
    {
        "id": "c9d0f42c.8b8f98",
        "type": "subflow",
        "name": "Relè",
        "info": "",
        "category": "AC5000",
        "in": [
            {
                "x": 50,
                "y": 30,
                "wires": [
                    {
                        "id": "74e5623a.94cabc"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 980,
                "y": 100,
                "wires": [
                    {
                        "id": "f25caa00.51e5f8",
                        "port": 1
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "ID",
                "type": "num",
                "value": "1"
            },
            {
                "name": "R",
                "type": "num",
                "value": "1"
            },
            {
                "name": "Label",
                "type": "str",
                "value": "Relè"
            }
        ],
        "meta": {},
        "color": "#3FADB5",
        "icon": "node-red-dashboard/ui_switch.png",
        "status": {
            "x": 1140,
            "y": 200,
            "wires": [
                {
                    "id": "f25caa00.51e5f8",
                    "port": 1
                }
            ]
        }
    },
    {
        "id": "df7fc1eb.5e0ec",
        "type": "function",
        "z": "c9d0f42c.8b8f98",
        "name": "",
        "func": "msg.filename = \"/dev/R\" + env.get(\"R\").toString() + \"/value\";\nvar boolMsg = { payload: msg.payload };\nmsg.payload = Number(msg.payload).toString();\nreturn [msg,boolMsg];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 300,
        "y": 40,
        "wires": [
            [
                "5b880fbe.7395c"
            ],
            []
        ]
    },
    {
        "id": "cbfe719.535d29",
        "type": "inject",
        "z": "c9d0f42c.8b8f98",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "Test",
        "payload": "false",
        "payloadType": "bool",
        "x": 120,
        "y": 340,
        "wires": [
            [
                "74e5623a.94cabc"
            ]
        ]
    },
    {
        "id": "f25caa00.51e5f8",
        "type": "function",
        "z": "c9d0f42c.8b8f98",
        "name": "",
        "func": "var boolMsg = { payload: Boolean(Number(msg.payload)) };\nreturn [msg,boolMsg];",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 260,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "64b98176.c2384",
        "type": "file in",
        "z": "c9d0f42c.8b8f98",
        "name": "",
        "filename": "filename",
        "filenameType": "msg",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 370,
        "y": 220,
        "wires": [
            [
                "f25caa00.51e5f8"
            ]
        ]
    },
    {
        "id": "3ee91b4a.f84ab4",
        "type": "function",
        "z": "c9d0f42c.8b8f98",
        "name": "",
        "func": "msg.filename = \"/dev/R\" + env.get(\"R\").toString() + \"/value\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 700,
        "y": 40,
        "wires": [
            [
                "64b98176.c2384"
            ]
        ]
    },
    {
        "id": "5b880fbe.7395c",
        "type": "file",
        "z": "c9d0f42c.8b8f98",
        "name": "",
        "filename": "filename",
        "filenameType": "msg",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 500,
        "y": 40,
        "wires": [
            [
                "3ee91b4a.f84ab4"
            ]
        ]
    },
    {
        "id": "74e5623a.94cabc",
        "type": "switch",
        "z": "c9d0f42c.8b8f98",
        "name": "Bool?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "istype",
                "v": "boolean",
                "vt": "boolean"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 170,
        "y": 100,
        "wires": [
            [
                "df7fc1eb.5e0ec"
            ]
        ]
    },
    {
        "id": "28433469.fd5fec",
        "type": "subflow",
        "name": "0-10V",
        "category": "AC5000",
        "in": [
            {
                "x": 50,
                "y": 30,
                "wires": [
                    {
                        "id": "65fddf99031528d1"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1220,
                "y": 60,
                "wires": [
                    {
                        "id": "cd121c6398f062e6",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "AO",
                "type": "num",
                "value": "1"
            },
            {
                "name": "GUI",
                "type": "bool",
                "value": "false",
                "ui": {
                    "type": "checkbox"
                }
            },
            {
                "name": "HELP",
                "type": "str",
                "value": "",
                "ui": {
                    "label": {
                        "en-US": "Hjelpetekst"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str",
                            "env"
                        ]
                    }
                }
            }
        ],
        "meta": {},
        "color": "#3FADB5",
        "icon": "node-red/status.svg",
        "status": {
            "x": 840,
            "y": 740,
            "wires": [
                {
                    "id": "e0f007a30573b522",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "7c5e797f.568d08",
        "type": "inject",
        "z": "28433469.fd5fec",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 170,
        "y": 400,
        "wires": [
            [
                "fd3041e4ef32c5c6"
            ]
        ]
    },
    {
        "id": "0f1196d858dff9ef",
        "type": "mqtt out",
        "z": "28433469.fd5fec",
        "name": "",
        "topic": "",
        "qos": "1",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e649abf8.0e7988",
        "x": 1590,
        "y": 420,
        "wires": []
    },
    {
        "id": "9497c78ab9c7bc5c",
        "type": "switch",
        "z": "28433469.fd5fec",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "btwn",
                "v": "0",
                "vt": "num",
                "v2": "100",
                "v2t": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 150,
        "y": 180,
        "wires": [
            [
                "ac4237afa64bc7be"
            ]
        ]
    },
    {
        "id": "65fddf99031528d1",
        "type": "switch",
        "z": "28433469.fd5fec",
        "name": "",
        "property": "AO",
        "propertyType": "env",
        "rules": [
            {
                "t": "btwn",
                "v": "1",
                "vt": "num",
                "v2": "8",
                "v2t": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 90,
        "y": 120,
        "wires": [
            [
                "9497c78ab9c7bc5c"
            ]
        ]
    },
    {
        "id": "fd3041e4ef32c5c6",
        "type": "function",
        "z": "28433469.fd5fec",
        "name": "function 2",
        "func": "var AO = env.get(\"AO\");\nmsg.topic = \"ao\";\nswitch (Number(AO)) {\n    case 1:\n        msg.payload = { device: \"1\", channel: \"1\", value: msg.payload };\n        break;\n    case 2:\n        msg.payload = { device: \"1\", channel: \"2\", value: msg.payload };\n        break;\n    case 3:\n        msg.payload = { device: \"1\", channel: \"3\", value: msg.payload };\n        break;\n    case 4:\n        msg.payload = { device: \"1\", channel: \"4\", value: msg.payload };\n        break;\n    case 5:\n        msg.payload = { device: \"2\", channel: \"1\", value: msg.payload };\n        break;\n    case 6:\n        msg.payload = { device: \"2\", channel: \"2\", value: msg.payload };\n        break;\n    case 7:\n        msg.payload = { device: \"2\", channel: \"3\", value: msg.payload };\n        break;\n    case 8:\n        msg.payload = { device: \"2\", channel: \"4\", value: msg.payload };\n        break;\n    default: msg.topic = \"Error\"\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 640,
        "y": 200,
        "wires": [
            [
                "79972740cd8313ef"
            ]
        ]
    },
    {
        "id": "79972740cd8313ef",
        "type": "delay",
        "z": "28433469.fd5fec",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "5",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 790,
        "y": 240,
        "wires": [
            [
                "9160f0ee918688aa"
            ]
        ]
    },
    {
        "id": "3a8db50c78b968ba",
        "type": "mqtt in",
        "z": "28433469.fd5fec",
        "name": "",
        "topic": "aostatus",
        "qos": "2",
        "datatype": "json",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 260,
        "y": 580,
        "wires": [
            [
                "4279d626c81c4fe6"
            ]
        ]
    },
    {
        "id": "4279d626c81c4fe6",
        "type": "switch",
        "z": "28433469.fd5fec",
        "name": "",
        "property": "payload.dev",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "AO",
                "vt": "env"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 290,
        "y": 700,
        "wires": [
            [
                "200d3eb6dd638646"
            ]
        ]
    },
    {
        "id": "200d3eb6dd638646",
        "type": "change",
        "z": "28433469.fd5fec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.value",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 780,
        "wires": [
            [
                "e0f007a30573b522"
            ]
        ]
    },
    {
        "id": "9160f0ee918688aa",
        "type": "json",
        "z": "28433469.fd5fec",
        "name": "",
        "property": "payload",
        "action": "str",
        "pretty": false,
        "x": 970,
        "y": 240,
        "wires": [
            [
                "b3d084f862158b13",
                "f744a4cd47f31797"
            ]
        ]
    },
    {
        "id": "ac4237afa64bc7be",
        "type": "rbe",
        "z": "28433469.fd5fec",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 310,
        "y": 200,
        "wires": [
            [
                "7dc27c3ef99f6f7b"
            ]
        ]
    },
    {
        "id": "e27344d137c04ee6",
        "type": "mqtt in",
        "z": "28433469.fd5fec",
        "name": "",
        "topic": "INIT",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 130,
        "y": 480,
        "wires": [
            [
                "69ad200cd826eb8f",
                "f143ce8458318dc8"
            ]
        ]
    },
    {
        "id": "69ad200cd826eb8f",
        "type": "function",
        "z": "28433469.fd5fec",
        "name": "reset",
        "func": "return {reset: true};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 460,
        "wires": [
            [
                "ac4237afa64bc7be",
                "b2ba12e30c0886a1"
            ]
        ]
    },
    {
        "id": "7dc27c3ef99f6f7b",
        "type": "smooth",
        "z": "28433469.fd5fec",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "1",
        "round": "2",
        "mult": "single",
        "reduce": false,
        "x": 480,
        "y": 200,
        "wires": [
            [
                "fd3041e4ef32c5c6"
            ]
        ]
    },
    {
        "id": "e0f007a30573b522",
        "type": "smooth",
        "z": "28433469.fd5fec",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "1",
        "round": "2",
        "mult": "single",
        "reduce": false,
        "x": 640,
        "y": 760,
        "wires": [
            [
                "b2ba12e30c0886a1",
                "b084db36bdeafb40"
            ]
        ]
    },
    {
        "id": "f143ce8458318dc8",
        "type": "change",
        "z": "28433469.fd5fec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 480,
        "wires": [
            [
                "fd3041e4ef32c5c6"
            ]
        ]
    },
    {
        "id": "8f9371face3a8459",
        "type": "function",
        "z": "28433469.fd5fec",
        "name": "function 49",
        "func": "let ao = env.get('AO');\nconsole.log(\"aostatus \" + ao + ': ' + msg.payload);\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 970,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "b2ba12e30c0886a1",
        "type": "rbe",
        "z": "28433469.fd5fec",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 790,
        "y": 660,
        "wires": [
            [
                "8f9371face3a8459"
            ]
        ]
    },
    {
        "id": "b3d084f862158b13",
        "type": "function",
        "z": "28433469.fd5fec",
        "name": "function 50",
        "func": "let ao = env.get('AO');\nconsole.log(\"AO \" + ao + \" set: \" + msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1149,
        "y": 176,
        "wires": [
            []
        ]
    },
    {
        "id": "f744a4cd47f31797",
        "type": "switch",
        "z": "28433469.fd5fec",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "INIT",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1190,
        "y": 280,
        "wires": [
            [
                "cd121c6398f062e6"
            ]
        ]
    },
    {
        "id": "cd121c6398f062e6",
        "type": "switch",
        "z": "28433469.fd5fec",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "INIT",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1410,
        "y": 360,
        "wires": [
            [
                "0f1196d858dff9ef"
            ]
        ]
    },
    {
        "id": "5b5f25f707835c6a",
        "type": "uib-sender",
        "z": "28433469.fd5fec",
        "url": "user",
        "uibId": "1a8f52fc0dc9ed73",
        "name": "",
        "topic": "",
        "passthrough": false,
        "return": false,
        "outputs": 0,
        "x": 778,
        "y": 75,
        "wires": []
    },
    {
        "id": "b63f1d9e8c2bb6a7",
        "type": "function",
        "z": "28433469.fd5fec",
        "name": "function 112",
        "func": "if(env.get(\"GUI\")===false)\nreturn null;\nlet name = env.get(\"NR_SUBFLOW_NAME\");\nlet ao = env.get('AO');\nlet help = env.get('HELP');\n//let help = env.get(\"NR_SUBFLOW_NAME\");\nmsg.payload = {ID: ao, val: flow.get('VAL'), name: name, help: help};\nmsg.topic = 'setAnalog';\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 80,
        "wires": [
            [
                "5b5f25f707835c6a"
            ]
        ]
    },
    {
        "id": "b084db36bdeafb40",
        "type": "function",
        "z": "28433469.fd5fec",
        "name": "function 113",
        "func": "if(env.get(\"GUI\")===false)\nreturn null;\nlet ao = env.get('AO');\nflow.set(\"VAL\",msg.payload);\nmsg.payload = {ID: ao, val: msg.payload};\nmsg.topic = 'setAnalog';\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 749,
        "y": 536,
        "wires": [
            [
                "5b5f25f707835c6a"
            ]
        ]
    },
    {
        "id": "d4e8b3afdc58f079",
        "type": "mqtt in",
        "z": "28433469.fd5fec",
        "name": "",
        "topic": "SHUNT",
        "qos": "2",
        "datatype": "json",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 142,
        "y": 892,
        "wires": [
            [
                "de49c11ffb3c536f",
                "da972166264a64e9"
            ]
        ]
    },
    {
        "id": "de49c11ffb3c536f",
        "type": "debug",
        "z": "28433469.fd5fec",
        "name": "debug 125",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 390,
        "y": 940,
        "wires": []
    },
    {
        "id": "da972166264a64e9",
        "type": "switch",
        "z": "28433469.fd5fec",
        "name": "",
        "property": "payload.id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "AO",
                "vt": "env"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 350,
        "y": 860,
        "wires": [
            [
                "43128851b208f4b5"
            ]
        ]
    },
    {
        "id": "43128851b208f4b5",
        "type": "change",
        "z": "28433469.fd5fec",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.val",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 860,
        "wires": [
            [
                "65fddf99031528d1"
            ]
        ]
    },
    {
        "id": "52df03f5c4adc4b0",
        "type": "mqtt in",
        "z": "28433469.fd5fec",
        "name": "",
        "topic": "READY_FOR_CONTENT",
        "qos": "2",
        "datatype": "auto",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 250,
        "y": 60,
        "wires": [
            [
                "b63f1d9e8c2bb6a7"
            ]
        ]
    },
    {
        "id": "e649abf8.0e7988",
        "type": "mqtt-broker",
        "name": "",
        "broker": "0.0.0.0",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "compatmode": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "8a0f07728757336c",
        "type": "comment",
        "z": "fe1c0fd7eae8cc55",
        "name": "Dokumentasjon",
        "info": "Her er det mulig å legge inn informasjon som kan være relevant, f.eks. navn på prosjekt i Teams, spesielle tilpassninger eller feil som er rettet. ",
        "x": 100,
        "y": 40,
        "wires": []
    },
    {
        "id": "dc5968540b880b5c",
        "type": "comment",
        "z": "fe1c0fd7eae8cc55",
        "name": "Dokumentasjon",
        "info": "Her er det mulig å legge inn informasjon som kan være relevant, f.eks. navn på prosjekt i Teams, spesielle tilpassninger eller feil som er rettet. ",
        "x": 140,
        "y": 100,
        "wires": []
    },
    {
        "id": "51e4cffdc69b49e4",
        "type": "subflow:28433469.fd5fec",
        "z": "fe1c0fd7eae8cc55",
        "name": "",
        "x": 1590,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "653d449b8803addc",
        "type": "subflow:c9d0f42c.8b8f98",
        "z": "fe1c0fd7eae8cc55",
        "name": "Pumpe",
        "x": 1140,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "f4fcc6928805fd43",
        "type": "subflow:c5ddcc1d8ce4e760",
        "z": "fe1c0fd7eae8cc55",
        "name": "Slisserenner",
        "env": [
            {
                "name": "LABEL",
                "value": "Slisserenner",
                "type": "str"
            },
            {
                "name": "STANDBY",
                "type": "bool",
                "value": "true"
            },
            {
                "name": "GROUND_SETPOINT_SNOW_PROB",
                "value": "3",
                "type": "num"
            },
            {
                "name": "GROUP",
                "value": "Slisserenner",
                "type": "str"
            }
        ],
        "x": 1150,
        "y": 380,
        "wires": [
            [
                "5966c78b7acf38e1"
            ],
            [
                "fb1c45e7bdd776c8"
            ]
        ]
    },
    {
        "id": "daee40f421bade3d",
        "type": "link in",
        "z": "fe1c0fd7eae8cc55",
        "name": "Mainzone",
        "links": [
            "f172e34b39aa5fc6",
            "89c112e775673611",
            "fce678664daaedac",
            "5966c78b7acf38e1",
            "34da4af2d10e8576"
        ],
        "x": 685,
        "y": 180,
        "wires": [
            [
                "688b808362a72dd9"
            ]
        ]
    },
    {
        "id": "5966c78b7acf38e1",
        "type": "link out",
        "z": "fe1c0fd7eae8cc55",
        "name": "link out 13",
        "mode": "link",
        "links": [
            "daee40f421bade3d"
        ],
        "x": 1265,
        "y": 320,
        "wires": []
    },
    {
        "id": "186b4080c3e309eb",
        "type": "subflow:c8ce8d0d.adcf1",
        "z": "fe1c0fd7eae8cc55",
        "name": "",
        "x": 150,
        "y": 240,
        "wires": [
            [
                "9a67e79d8d5b4d84"
            ]
        ]
    },
    {
        "id": "b9251f82ad5f3bfb",
        "type": "subflow:60bddfc1.83414",
        "z": "fe1c0fd7eae8cc55",
        "name": "",
        "x": 120,
        "y": 160,
        "wires": [
            [
                "9a67e79d8d5b4d84"
            ]
        ]
    },
    {
        "id": "9ffbaac2206ead56",
        "type": "subflow:53389447.eb0fbc",
        "z": "fe1c0fd7eae8cc55",
        "name": "",
        "x": 170,
        "y": 320,
        "wires": [
            [
                "9a67e79d8d5b4d84"
            ]
        ]
    },
    {
        "id": "9519a2b362d5283d",
        "type": "subflow:ced4e951.6ccf58",
        "z": "fe1c0fd7eae8cc55",
        "name": "T24 re-tur prim /COM 3",
        "env": [
            {
                "name": "Addr",
                "value": "24",
                "type": "num"
            }
        ],
        "x": 500,
        "y": 160,
        "wires": [
            [
                "688b808362a72dd9"
            ]
        ]
    },
    {
        "id": "7b56f5658c48aea8",
        "type": "subflow:ced4e951.6ccf58",
        "z": "fe1c0fd7eae8cc55",
        "name": "T25 sekundær /COM 3",
        "env": [
            {
                "name": "Addr",
                "value": "25",
                "type": "num"
            }
        ],
        "x": 520,
        "y": 220,
        "wires": [
            [
                "688b808362a72dd9"
            ]
        ]
    },
    {
        "id": "b23ad5509f2d558d",
        "type": "subflow:ced4e951.6ccf58",
        "z": "fe1c0fd7eae8cc55",
        "name": "T26 re-tur sekundær /COM 3",
        "env": [
            {
                "name": "Addr",
                "value": "26",
                "type": "num"
            }
        ],
        "x": 560,
        "y": 340,
        "wires": [
            [
                "688b808362a72dd9"
            ]
        ]
    },
    {
        "id": "888c4067bf91fc99",
        "type": "subflow:2abd223cc6fa0b71",
        "z": "fe1c0fd7eae8cc55",
        "name": "",
        "x": 160,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "bc9a0eb2ea313df5",
        "type": "subflow:5d34e663f4a3f527",
        "z": "fe1c0fd7eae8cc55",
        "name": "",
        "env": [
            {
                "name": "Lengdegrader",
                "value": "18.914347",
                "type": "num"
            },
            {
                "name": "Breddegrader",
                "value": "69.682021",
                "type": "num"
            },
            {
                "name": "Proxy",
                "value": "b12ed125c6c56174",
                "type": "conf-type"
            }
        ],
        "x": 300,
        "y": 360,
        "wires": [
            [
                "9a67e79d8d5b4d84"
            ]
        ]
    },
    {
        "id": "0c9d371337d3f850",
        "type": "subflow:ced4e951.6ccf58",
        "z": "fe1c0fd7eae8cc55",
        "name": "T27 tur prim /COM 3",
        "env": [
            {
                "name": "Addr",
                "value": "27",
                "type": "num"
            }
        ],
        "x": 530,
        "y": 400,
        "wires": [
            [
                "688b808362a72dd9"
            ]
        ]
    },
    {
        "id": "9a67e79d8d5b4d84",
        "type": "link out",
        "z": "fe1c0fd7eae8cc55",
        "name": "Felles",
        "mode": "link",
        "links": [
            "16f625e2f193be95",
            "1c40e4f8d2c2cc07",
            "36a5b84d14f2e89c",
            "393d8f99cbd880ad",
            "4780f3195b50f638",
            "a938c1d27e341268",
            "d4e7299e8bbf20a3",
            "dcadfa413a29a524",
            "f14d3ae48fe49ef1",
            "f297690f93b00abc",
            "f689207886e5a0a3"
        ],
        "x": 395,
        "y": 220,
        "wires": []
    },
    {
        "id": "16f625e2f193be95",
        "type": "link in",
        "z": "fe1c0fd7eae8cc55",
        "name": "19-3",
        "links": [
            "9a67e79d8d5b4d84",
            "7f8d4454529e8a9d"
        ],
        "x": 595,
        "y": 680,
        "wires": [
            [
                "0bb45edfebb60efd"
            ]
        ]
    },
    {
        "id": "15781135b804d854",
        "type": "comment",
        "z": "fe1c0fd7eae8cc55",
        "name": "Sone 3",
        "info": "",
        "x": 546.6666564941406,
        "y": 1097.3333129882812,
        "wires": []
    },
    {
        "id": "1c40e4f8d2c2cc07",
        "type": "link in",
        "z": "fe1c0fd7eae8cc55",
        "name": "link in 17",
        "links": [
            "9a67e79d8d5b4d84"
        ],
        "x": 635,
        "y": 460,
        "wires": [
            [
                "f4fcc6928805fd43"
            ]
        ]
    },
    {
        "id": "fb1c45e7bdd776c8",
        "type": "link out",
        "z": "fe1c0fd7eae8cc55",
        "name": "link out 32",
        "mode": "link",
        "links": [
            "cf8a6d22f01bcce2"
        ],
        "x": 1275,
        "y": 360,
        "wires": []
    },
    {
        "id": "aec6f55eec1a26a7",
        "type": "subflow:ced4e951.6ccf58",
        "z": "fe1c0fd7eae8cc55",
        "name": "T25 sekundær /COM 4",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "25",
                "type": "num"
            }
        ],
        "x": 900,
        "y": 300,
        "wires": [
            [
                "f4fcc6928805fd43"
            ]
        ]
    },
    {
        "id": "f5956e4b4ede3c8c",
        "type": "subflow:ced4e951.6ccf58",
        "z": "fe1c0fd7eae8cc55",
        "name": "T26 re-tur sekundær /COM 4",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "26",
                "type": "num"
            }
        ],
        "x": 860,
        "y": 400,
        "wires": [
            [
                "f4fcc6928805fd43"
            ]
        ]
    },
    {
        "id": "aa1878cac4769704",
        "type": "subflow:c799b015.2d937",
        "z": "fe1c0fd7eae8cc55",
        "name": "",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "29",
                "type": "num"
            }
        ],
        "x": 1020,
        "y": 440,
        "wires": [
            [
                "f4fcc6928805fd43"
            ]
        ]
    },
    {
        "id": "ca44058bae41e040",
        "type": "range",
        "z": "fe1c0fd7eae8cc55",
        "minin": "0",
        "maxin": "100",
        "minout": "20",
        "maxout": "100",
        "action": "scale",
        "round": false,
        "property": "payload",
        "name": "",
        "x": 1520,
        "y": 340,
        "wires": [
            [
                "51e4cffdc69b49e4"
            ]
        ]
    },
    {
        "id": "5496010d9da14b04",
        "type": "subflow:c5ddcc1d8ce4e760",
        "z": "fe1c0fd7eae8cc55",
        "name": "Landside",
        "env": [
            {
                "name": "LABEL",
                "value": "Landside",
                "type": "str"
            },
            {
                "name": "STANDBY",
                "type": "bool",
                "value": "true"
            },
            {
                "name": "GROUND_SETPOINT_STANDBY",
                "value": "3",
                "type": "num"
            },
            {
                "name": "START_DELAY",
                "value": "1",
                "type": "num"
            },
            {
                "name": "GROUP",
                "value": "Landside",
                "type": "str"
            }
        ],
        "x": 1920,
        "y": 1180,
        "wires": [
            [
                "34da4af2d10e8576"
            ],
            [
                "e8da200acc60c211"
            ]
        ]
    },
    {
        "id": "34da4af2d10e8576",
        "type": "link out",
        "z": "fe1c0fd7eae8cc55",
        "name": "link out 37",
        "mode": "link",
        "links": [
            "daee40f421bade3d"
        ],
        "x": 2155,
        "y": 1080,
        "wires": []
    },
    {
        "id": "f689207886e5a0a3",
        "type": "link in",
        "z": "fe1c0fd7eae8cc55",
        "name": "Ny sone",
        "links": [
            "9a67e79d8d5b4d84"
        ],
        "x": 1795,
        "y": 1120,
        "wires": [
            [
                "5496010d9da14b04"
            ]
        ]
    },
    {
        "id": "e8da200acc60c211",
        "type": "subflow:21c7cfcd902495f3",
        "z": "fe1c0fd7eae8cc55",
        "name": "",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "5",
                "type": "num"
            }
        ],
        "x": 2400,
        "y": 1060,
        "wires": [
            []
        ]
    },
    {
        "id": "688b808362a72dd9",
        "type": "subflow:d76e8ee33ccc284d",
        "z": "fe1c0fd7eae8cc55",
        "name": "0-sone",
        "env": [
            {
                "name": "FUNCTION",
                "value": "zerozone",
                "type": "str"
            },
            {
                "name": "DRIFTSTEMPERATUR",
                "value": "40",
                "type": "num"
            },
            {
                "name": "DRIFTSTEMPERATUR_RETUR",
                "value": "40",
                "type": "num"
            },
            {
                "name": "T25_MAX",
                "value": "70",
                "type": "num"
            },
            {
                "name": "START_DELAY",
                "value": "0",
                "type": "num"
            },
            {
                "name": "STARTUP_TIMEOUT",
                "value": "0",
                "type": "num"
            },
            {
                "name": "PID_CONFIG",
                "value": "{\"T24\":{\"setpoint\":6,\"prop_band\":-6,\"t_integral\":999999999999999,\"t_derivative\":0,\"integral_default\":0,\"smooth_factor\":3,\"max_interval\":600},\"T25\":{\"setpoint\":40,\"prop_band\":80,\"t_integral\":1000,\"t_derivative\":0,\"integral_default\":0,\"smooth_factor\":3,\"max_interval\":600},\"T26\":{\"setpoint\":40,\"prop_band\":20,\"t_integral\":14400,\"t_derivative\":0,\"integral_default\":0,\"smooth_factor\":3,\"max_interval\":600},\"POWER\":{\"setpoint\":1000,\"prop_band\":20,\"t_integral\":60,\"t_derivative\":0,\"integral_default\":0,\"smooth_factor\":3,\"max_interval\":600},\"T_GROUND\":{\"setpoint\":3,\"prop_band\":0.5,\"t_integral\":14400,\"t_derivative\":0,\"integral_default\":0,\"smooth_factor\":3,\"max_interval\":600}}",
                "type": "json"
            }
        ],
        "x": 910,
        "y": 140,
        "wires": [
            [],
            [
                "653d449b8803addc"
            ],
            [],
            [
                "ca44058bae41e040",
                "98a8246f86c58df4"
            ]
        ]
    },
    {
        "id": "535051672fdf7325",
        "type": "link in",
        "z": "fe1c0fd7eae8cc55",
        "name": "link in 2",
        "links": [],
        "x": 255,
        "y": 120,
        "wires": [
            [
                "9a67e79d8d5b4d84"
            ]
        ]
    },
    {
        "id": "98a8246f86c58df4",
        "type": "function",
        "z": "fe1c0fd7eae8cc55",
        "name": "Pådrag 0-100",
        "func": "node.status({text: msg.payload});\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1280,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "586c59e804868c3f",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "name": "Oppstillingsplass 18",
        "style": {
            "label": true
        },
        "nodes": [
            "bbc270ac750ecff0",
            "884ae2f119af34ba",
            "d5831e65172a69a2",
            "89c112e775673611",
            "4780f3195b50f638",
            "36a5b84d14f2e89c",
            "f14d3ae48fe49ef1",
            "6c8246cbd62466cd",
            "1d8e8ebffc6c3256",
            "2301dea98e60c9b3"
        ],
        "x": 1064,
        "y": 479,
        "w": 462,
        "h": 262
    },
    {
        "id": "bbc270ac750ecff0",
        "type": "subflow:c5ddcc1d8ce4e760",
        "z": "fe1c0fd7eae8cc55",
        "g": "586c59e804868c3f",
        "name": "Oppstillingsplass 18: Sone 1 ",
        "env": [
            {
                "name": "LABEL",
                "value": "Sone 1",
                "type": "str"
            },
            {
                "name": "STANDBY",
                "type": "bool",
                "value": "true"
            },
            {
                "name": "GROUND_SETPOINT_STANDBY",
                "value": "3",
                "type": "num"
            },
            {
                "name": "GROUP",
                "value": "Oppstillingsplass 18",
                "type": "str"
            }
        ],
        "x": 1280,
        "y": 560,
        "wires": [
            [
                "89c112e775673611"
            ],
            [
                "6c8246cbd62466cd"
            ]
        ]
    },
    {
        "id": "884ae2f119af34ba",
        "type": "subflow:c5ddcc1d8ce4e760",
        "z": "fe1c0fd7eae8cc55",
        "g": "586c59e804868c3f",
        "name": "Oppstillingsplass 18: Sone 2",
        "env": [
            {
                "name": "LABEL",
                "value": "Sone 2",
                "type": "str"
            },
            {
                "name": "STANDBY",
                "type": "bool",
                "value": "true"
            },
            {
                "name": "GROUND_SETPOINT_SNOW_PROB",
                "value": "3",
                "type": "num"
            },
            {
                "name": "START_DELAY",
                "value": "1",
                "type": "num"
            },
            {
                "name": "GROUP",
                "value": "Oppstillingsplass 18",
                "type": "str"
            }
        ],
        "x": 1280,
        "y": 620,
        "wires": [
            [
                "89c112e775673611"
            ],
            [
                "1d8e8ebffc6c3256"
            ]
        ]
    },
    {
        "id": "d5831e65172a69a2",
        "type": "subflow:c5ddcc1d8ce4e760",
        "z": "fe1c0fd7eae8cc55",
        "g": "586c59e804868c3f",
        "name": "Oppstillingsplass 18: Sone 3",
        "env": [
            {
                "name": "LABEL",
                "value": "Sone 3",
                "type": "str"
            },
            {
                "name": "STANDBY",
                "type": "bool",
                "value": "true"
            },
            {
                "name": "GROUND_SETPOINT_SNOW_PROB",
                "value": "3",
                "type": "num"
            },
            {
                "name": "START_DELAY",
                "value": "1",
                "type": "num"
            },
            {
                "name": "GROUP",
                "value": "Oppstillingsplass 18",
                "type": "str"
            }
        ],
        "x": 1280,
        "y": 680,
        "wires": [
            [
                "89c112e775673611"
            ],
            [
                "2301dea98e60c9b3"
            ]
        ]
    },
    {
        "id": "89c112e775673611",
        "type": "link out",
        "z": "fe1c0fd7eae8cc55",
        "g": "586c59e804868c3f",
        "name": "link out 11",
        "mode": "link",
        "links": [
            "daee40f421bade3d"
        ],
        "x": 1485,
        "y": 520,
        "wires": []
    },
    {
        "id": "4780f3195b50f638",
        "type": "link in",
        "z": "fe1c0fd7eae8cc55",
        "g": "586c59e804868c3f",
        "name": "18-2",
        "links": [
            "9a67e79d8d5b4d84",
            "7a9d4ec8c8586e14"
        ],
        "x": 1105,
        "y": 620,
        "wires": [
            [
                "884ae2f119af34ba"
            ]
        ]
    },
    {
        "id": "36a5b84d14f2e89c",
        "type": "link in",
        "z": "fe1c0fd7eae8cc55",
        "g": "586c59e804868c3f",
        "name": "18-1",
        "links": [
            "9a67e79d8d5b4d84",
            "64893dde8bd488bc"
        ],
        "x": 1105,
        "y": 560,
        "wires": [
            [
                "bbc270ac750ecff0"
            ]
        ]
    },
    {
        "id": "f14d3ae48fe49ef1",
        "type": "link in",
        "z": "fe1c0fd7eae8cc55",
        "g": "586c59e804868c3f",
        "name": "18-3",
        "links": [
            "9a67e79d8d5b4d84",
            "c99a7308eda3d005"
        ],
        "x": 1105,
        "y": 680,
        "wires": [
            [
                "d5831e65172a69a2"
            ]
        ]
    },
    {
        "id": "6c8246cbd62466cd",
        "type": "link out",
        "z": "fe1c0fd7eae8cc55",
        "g": "586c59e804868c3f",
        "name": "link out 29",
        "mode": "link",
        "links": [
            "b6f9304718026166"
        ],
        "x": 1485,
        "y": 580,
        "wires": []
    },
    {
        "id": "1d8e8ebffc6c3256",
        "type": "link out",
        "z": "fe1c0fd7eae8cc55",
        "g": "586c59e804868c3f",
        "name": "link out 30",
        "mode": "link",
        "links": [
            "6fb5b865dc1d1a5c"
        ],
        "x": 1485,
        "y": 640,
        "wires": []
    },
    {
        "id": "2301dea98e60c9b3",
        "type": "link out",
        "z": "fe1c0fd7eae8cc55",
        "g": "586c59e804868c3f",
        "name": "link out 31",
        "mode": "link",
        "links": [
            "068ee4a809495427"
        ],
        "x": 1485,
        "y": 700,
        "wires": []
    },
    {
        "id": "b463640385249e41",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "name": "Oppstillingsplass 19",
        "style": {
            "label": true
        },
        "nodes": [
            "b84bd80f13a3fb11",
            "214e6a66be02a9c2",
            "0bb45edfebb60efd",
            "fce678664daaedac",
            "dcadfa413a29a524",
            "a938c1d27e341268",
            "0bd5618b8b1b1511",
            "38b59be3016cc2dc",
            "2f480242c119e080"
        ],
        "x": 554,
        "y": 479,
        "w": 462,
        "h": 242
    },
    {
        "id": "b84bd80f13a3fb11",
        "type": "subflow:c5ddcc1d8ce4e760",
        "z": "fe1c0fd7eae8cc55",
        "g": "b463640385249e41",
        "name": "Oppstillingsplass 19: Sone 1 ",
        "env": [
            {
                "name": "LABEL",
                "value": "Sone 1",
                "type": "str"
            },
            {
                "name": "STANDBY",
                "type": "bool",
                "value": "true"
            },
            {
                "name": "GROUND_SETPOINT_SNOW_PROB",
                "value": "3",
                "type": "num"
            },
            {
                "name": "START_DELAY",
                "value": "1",
                "type": "num"
            },
            {
                "name": "GROUP",
                "value": "Oppstillingsplass 19",
                "type": "str"
            }
        ],
        "x": 780,
        "y": 560,
        "wires": [
            [
                "fce678664daaedac"
            ],
            [
                "0bd5618b8b1b1511"
            ]
        ]
    },
    {
        "id": "214e6a66be02a9c2",
        "type": "subflow:c5ddcc1d8ce4e760",
        "z": "fe1c0fd7eae8cc55",
        "g": "b463640385249e41",
        "name": "Oppstillingsplass 19: Sone 2",
        "env": [
            {
                "name": "LABEL",
                "value": "Sone 2",
                "type": "str"
            },
            {
                "name": "STANDBY",
                "type": "bool",
                "value": "true"
            },
            {
                "name": "GROUND_SETPOINT_SNOW_PROB",
                "value": "3",
                "type": "num"
            },
            {
                "name": "START_DELAY",
                "value": "1",
                "type": "num"
            },
            {
                "name": "GROUP",
                "value": "Oppstillingsplass 19",
                "type": "str"
            }
        ],
        "x": 780,
        "y": 620,
        "wires": [
            [
                "fce678664daaedac"
            ],
            [
                "38b59be3016cc2dc"
            ]
        ]
    },
    {
        "id": "0bb45edfebb60efd",
        "type": "subflow:c5ddcc1d8ce4e760",
        "z": "fe1c0fd7eae8cc55",
        "g": "b463640385249e41",
        "name": "Oppstillingsplass 19: Sone 3",
        "env": [
            {
                "name": "LABEL",
                "value": "Sone 3",
                "type": "str"
            },
            {
                "name": "STANDBY",
                "type": "bool",
                "value": "true"
            },
            {
                "name": "GROUND_SETPOINT_SNOW_PROB",
                "value": "3",
                "type": "num"
            },
            {
                "name": "START_DELAY",
                "value": "1",
                "type": "num"
            },
            {
                "name": "GROUP",
                "value": "Oppstillingsplass 19",
                "type": "str"
            }
        ],
        "x": 780,
        "y": 680,
        "wires": [
            [
                "fce678664daaedac"
            ],
            [
                "2f480242c119e080"
            ]
        ]
    },
    {
        "id": "fce678664daaedac",
        "type": "link out",
        "z": "fe1c0fd7eae8cc55",
        "g": "b463640385249e41",
        "name": "link out 12",
        "mode": "link",
        "links": [
            "daee40f421bade3d"
        ],
        "x": 965,
        "y": 520,
        "wires": []
    },
    {
        "id": "dcadfa413a29a524",
        "type": "link in",
        "z": "fe1c0fd7eae8cc55",
        "g": "b463640385249e41",
        "name": "19-1",
        "links": [
            "9a67e79d8d5b4d84",
            "bdfd65df34efd7ab"
        ],
        "x": 595,
        "y": 560,
        "wires": [
            [
                "b84bd80f13a3fb11"
            ]
        ]
    },
    {
        "id": "a938c1d27e341268",
        "type": "link in",
        "z": "fe1c0fd7eae8cc55",
        "g": "b463640385249e41",
        "name": "19-2",
        "links": [
            "9a67e79d8d5b4d84",
            "5b88277a5f5771b6"
        ],
        "x": 595,
        "y": 620,
        "wires": [
            [
                "214e6a66be02a9c2"
            ]
        ]
    },
    {
        "id": "0bd5618b8b1b1511",
        "type": "link out",
        "z": "fe1c0fd7eae8cc55",
        "g": "b463640385249e41",
        "name": "link out 26",
        "mode": "link",
        "links": [
            "ae4354290f30e0e6"
        ],
        "x": 975,
        "y": 580,
        "wires": []
    },
    {
        "id": "38b59be3016cc2dc",
        "type": "link out",
        "z": "fe1c0fd7eae8cc55",
        "g": "b463640385249e41",
        "name": "link out 27",
        "mode": "link",
        "links": [
            "4792e202058b1dda"
        ],
        "x": 975,
        "y": 620,
        "wires": []
    },
    {
        "id": "2f480242c119e080",
        "type": "link out",
        "z": "fe1c0fd7eae8cc55",
        "g": "b463640385249e41",
        "name": "link out 28",
        "mode": "link",
        "links": [
            "46a7b73bc156a960"
        ],
        "x": 975,
        "y": 680,
        "wires": []
    },
    {
        "id": "83e1ecd3d3f940ed",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "name": "Maxi adr 4",
        "style": {
            "label": true
        },
        "nodes": [
            "bc40a5e64f2c5ad9",
            "45c6bf30d0c1e246",
            "993feb2a28f338e0",
            "362d8fa0e812a15a",
            "ddc2e5baf49f7f63",
            "cb8d460ed5822c3f",
            "f88839799d9cb185",
            "64893dde8bd488bc",
            "7a9d4ec8c8586e14",
            "c99a7308eda3d005",
            "7d4e54cc7cd813fe",
            "9163eccc27996a11",
            "4620578976094b65",
            "4b9deeb4537e2d54"
        ],
        "x": 98,
        "y": 1213,
        "w": 774,
        "h": 454
    },
    {
        "id": "bc40a5e64f2c5ad9",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "g": "83e1ecd3d3f940ed",
        "name": "AO",
        "style": {
            "label": true
        },
        "nodes": [
            "46f50b5526bdcd93",
            "b60a09db649296a6",
            "6020afeb8540eb56",
            "b6f9304718026166",
            "6fb5b865dc1d1a5c",
            "068ee4a809495427"
        ],
        "x": 124,
        "y": 1439,
        "w": 262,
        "h": 202
    },
    {
        "id": "46f50b5526bdcd93",
        "type": "subflow:21c7cfcd902495f3",
        "z": "fe1c0fd7eae8cc55",
        "g": "bc40a5e64f2c5ad9",
        "name": "AO utgang C",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "4",
                "type": "num"
            },
            {
                "name": "AO",
                "value": "C",
                "type": "str"
            },
            {
                "name": "Label",
                "value": "Shunt sone 2",
                "type": "str"
            }
        ],
        "x": 290,
        "y": 1600,
        "wires": [
            []
        ]
    },
    {
        "id": "b60a09db649296a6",
        "type": "subflow:21c7cfcd902495f3",
        "z": "fe1c0fd7eae8cc55",
        "g": "bc40a5e64f2c5ad9",
        "name": "AO utgang A",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "4",
                "type": "num"
            },
            {
                "name": "Label",
                "value": "Shunt sone 1",
                "type": "str"
            }
        ],
        "x": 290,
        "y": 1480,
        "wires": [
            []
        ]
    },
    {
        "id": "6020afeb8540eb56",
        "type": "subflow:21c7cfcd902495f3",
        "z": "fe1c0fd7eae8cc55",
        "g": "bc40a5e64f2c5ad9",
        "name": "AO utgang B",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "4",
                "type": "num"
            },
            {
                "name": "AO",
                "value": "B",
                "type": "str"
            },
            {
                "name": "Label",
                "value": "Shunt sone 2",
                "type": "str"
            }
        ],
        "x": 290,
        "y": 1540,
        "wires": [
            []
        ]
    },
    {
        "id": "b6f9304718026166",
        "type": "link in",
        "z": "fe1c0fd7eae8cc55",
        "g": "bc40a5e64f2c5ad9",
        "name": "AO 4A",
        "links": [
            "6c8246cbd62466cd"
        ],
        "x": 165,
        "y": 1480,
        "wires": [
            [
                "b60a09db649296a6"
            ]
        ]
    },
    {
        "id": "6fb5b865dc1d1a5c",
        "type": "link in",
        "z": "fe1c0fd7eae8cc55",
        "g": "bc40a5e64f2c5ad9",
        "name": "AO 4B",
        "links": [
            "1d8e8ebffc6c3256"
        ],
        "x": 165,
        "y": 1540,
        "wires": [
            [
                "6020afeb8540eb56"
            ]
        ]
    },
    {
        "id": "068ee4a809495427",
        "type": "link in",
        "z": "fe1c0fd7eae8cc55",
        "g": "bc40a5e64f2c5ad9",
        "name": "AO 4C",
        "links": [
            "2301dea98e60c9b3"
        ],
        "x": 165,
        "y": 1600,
        "wires": [
            [
                "46f50b5526bdcd93"
            ]
        ]
    },
    {
        "id": "45c6bf30d0c1e246",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "g": "83e1ecd3d3f940ed",
        "name": "Sensor port B",
        "style": {
            "label": true
        },
        "nodes": [
            "bc13f7fb726a04dc",
            "db72cefd23b4db6f"
        ],
        "x": 334,
        "y": 1239,
        "w": 152,
        "h": 142
    },
    {
        "id": "a61c6b61c04900fe",
        "type": "subflow",
        "name": "SITemp",
        "info": "",
        "category": "Sensor Interface",
        "in": [],
        "out": [
            {
                "x": 1580,
                "y": 80,
                "wires": [
                    {
                        "id": "9a8aa358d868052b",
                        "port": 0
                    },
                    {
                        "id": "f7bf28ff162a2dda",
                        "port": 0
                    },
                    {
                        "id": "40c12132e98d22e9",
                        "port": 0
                    },
                    {
                        "id": "65df5f23ac4e52c7",
                        "port": 0
                    },
                    {
                        "id": "ed83f15bf7848eb2",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "Buss",
                "type": "str",
                "value": "COM3",
                "ui": {
                    "type": "select",
                    "opts": {
                        "opts": [
                            {
                                "l": {
                                    "en-US": "COM3"
                                },
                                "v": "COM3"
                            },
                            {
                                "l": {
                                    "en-US": "COM4"
                                },
                                "v": "COM4"
                            }
                        ]
                    }
                }
            },
            {
                "name": "Addr",
                "type": "num",
                "value": "11"
            },
            {
                "name": "Port",
                "type": "str",
                "value": "A",
                "ui": {
                    "type": "select",
                    "opts": {
                        "opts": [
                            {
                                "l": {
                                    "en-US": "A"
                                },
                                "v": "A"
                            },
                            {
                                "l": {
                                    "en-US": "B"
                                },
                                "v": "B"
                            },
                            {
                                "l": {
                                    "en-US": "C"
                                },
                                "v": "C"
                            },
                            {
                                "l": {
                                    "en-US": "D"
                                },
                                "v": "D"
                            },
                            {
                                "l": {
                                    "en-US": "E"
                                },
                                "v": "E"
                            },
                            {
                                "l": {
                                    "en-US": "F"
                                },
                                "v": "F"
                            }
                        ]
                    }
                }
            },
            {
                "name": "ID",
                "type": "num",
                "value": "77"
            },
            {
                "name": "TIMEOUT",
                "type": "num",
                "value": "15"
            }
        ],
        "meta": {},
        "color": "#A6BBCF",
        "icon": "font-awesome/fa-thermometer-three-quarters",
        "status": {
            "x": 1560,
            "y": 540,
            "wires": [
                {
                    "id": "40c12132e98d22e9",
                    "port": 0
                },
                {
                    "id": "01ca76bd5ebddc80",
                    "port": 0
                },
                {
                    "id": "1df21c249c5f8630",
                    "port": 0
                },
                {
                    "id": "51510bfc481fdf15",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "36d8c00ec810fc35",
        "type": "mqtt in",
        "z": "a61c6b61c04900fe",
        "name": "",
        "topic": "INIT",
        "qos": "2",
        "datatype": "utf8",
        "broker": "e649abf8.0e7988",
        "inputs": 0,
        "x": 130,
        "y": 60,
        "wires": [
            [
                "775127ecfe610652",
                "029d866450b45951"
            ]
        ]
    },
    {
        "id": "8888940f69298394",
        "type": "mqtt out",
        "z": "a61c6b61c04900fe",
        "name": "",
        "topic": "",
        "qos": "",
        "retain": "",
        "broker": "e649abf8.0e7988",
        "x": 570,
        "y": 200,
        "wires": []
    },
    {
        "id": "775127ecfe610652",
        "type": "function",
        "z": "a61c6b61c04900fe",
        "name": "",
        "func": "let buss = env.get(\"Buss\");\nlet addr = env.get(\"Addr\");\nlet port = env.get(\"Port\");\nlet id = env.get(\"ID\");\nmsg.topic = \"set/SI/\" + buss + \"/\" + addr + \"/\" + port + \"/\" + id + \"/Init/\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 200,
        "y": 140,
        "wires": [
            [
                "2521c444569f7bbc"
            ]
        ]
    },
    {
        "id": "b40d074c66338b8e",
        "type": "switch",
        "z": "a61c6b61c04900fe",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "$join([$env(\"Buss\"),'/SI/',$formatNumber($env(\"Addr\"),\"1\"),'/', $env(\"Port\"),'/',$formatNumber($env(\"ID\"),\"1\")])",
                "vt": "jsonata"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 230,
        "y": 420,
        "wires": [
            [
                "df78b8c2e5526c62"
            ]
        ]
    },
    {
        "id": "6b865882d2b39e2f",
        "type": "mqtt in",
        "z": "a61c6b61c04900fe",
        "name": "",
        "topic": "COM3/#",
        "qos": "2",
        "datatype": "auto",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 80,
        "y": 380,
        "wires": [
            [
                "b40d074c66338b8e"
            ]
        ]
    },
    {
        "id": "a894958ac9b6f9ae",
        "type": "mqtt in",
        "z": "a61c6b61c04900fe",
        "name": "",
        "topic": "COM4/#",
        "qos": "2",
        "datatype": "auto",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 80,
        "y": 460,
        "wires": [
            [
                "b40d074c66338b8e"
            ]
        ]
    },
    {
        "id": "d91f3ba347c9df29",
        "type": "change",
        "z": "a61c6b61c04900fe",
        "name": "temp",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.temp",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 560,
        "wires": [
            [
                "40c12132e98d22e9"
            ]
        ]
    },
    {
        "id": "40c12132e98d22e9",
        "type": "function",
        "z": "a61c6b61c04900fe",
        "name": "Number",
        "func": "if (isNaN(Number(msg.payload)) === false) {\n    msg.payload = Number(msg.payload);\n    let id = env.get(\"ID\");\n    if (Number(id) === 29)\n        msg.topic = 'T_GROUND';\n    else if (Number(id) === 30)\n        msg.topic = 'BETWEEN_PIPES';\n    else msg.topic = 'T' + id;\n    return msg;\n}\nelse return null;\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1020,
        "y": 580,
        "wires": [
            [
                "d56537d750e95473",
                "029d866450b45951"
            ]
        ]
    },
    {
        "id": "b456111dce669126",
        "type": "switch",
        "z": "a61c6b61c04900fe",
        "name": "",
        "property": "ID",
        "propertyType": "env",
        "rules": [
            {
                "t": "btwn",
                "v": "76",
                "vt": "num",
                "v2": "79",
                "v2t": "num"
            },
            {
                "t": "btwn",
                "v": "83",
                "vt": "num",
                "v2": "85",
                "v2t": "num"
            },
            {
                "t": "eq",
                "v": "82",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 4,
        "x": 330,
        "y": 560,
        "wires": [
            [
                "9f4aa987605fedca",
                "d5ac18ae0e6a87f2"
            ],
            [
                "9f4aa987605fedca",
                "d5ac18ae0e6a87f2"
            ],
            [
                "0cc04e023b1553aa",
                "029d866450b45951",
                "408c5e106f63eb27",
                "51510bfc481fdf15"
            ],
            [
                "d91f3ba347c9df29"
            ]
        ]
    },
    {
        "id": "8e4496942f3f6544",
        "type": "change",
        "z": "a61c6b61c04900fe",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0]",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 740,
        "y": 500,
        "wires": [
            [
                "f7bf28ff162a2dda"
            ]
        ]
    },
    {
        "id": "06a871a0ba7c375f",
        "type": "mqtt out",
        "z": "a61c6b61c04900fe",
        "name": "",
        "topic": "ADD_SENSOR",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e649abf8.0e7988",
        "x": 1060,
        "y": 920,
        "wires": []
    },
    {
        "id": "7c3696223b8b1816",
        "type": "function",
        "z": "a61c6b61c04900fe",
        "name": "",
        "func": "let type = \"Singelføler\";\nlet id = Number(env.get(\"ID\"));\nif (id === 77 || id === 76 || id === 78 || id === 79)\n    type = \"Rammeføler\"\nelse if (id === 82)\n    type = \"Multi\"\nmsg.payload = { type: type, \"Addr\": env.get(\"Buss\") + \"/SI/\" + env.get(\"Addr\") + \"/\" + env.get(\"Port\") + \"/\" + env.get(\"ID\")};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 860,
        "wires": [
            [
                "06a871a0ba7c375f"
            ]
        ]
    },
    {
        "id": "9bbc6bf5e1567946",
        "type": "mqtt in",
        "z": "a61c6b61c04900fe",
        "name": "",
        "topic": "READY_FOR_CONTENT",
        "qos": "2",
        "datatype": "auto",
        "broker": "e649abf8.0e7988",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 281,
        "y": 872,
        "wires": [
            [
                "7c3696223b8b1816"
            ]
        ]
    },
    {
        "id": "9fac4d8dee372685",
        "type": "inject",
        "z": "a61c6b61c04900fe",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payloadType": "date",
        "x": 290,
        "y": 940,
        "wires": [
            [
                "7c3696223b8b1816",
                "029d866450b45951"
            ]
        ]
    },
    {
        "id": "d56537d750e95473",
        "type": "function",
        "z": "a61c6b61c04900fe",
        "name": "",
        "func": "let type = \"Singelføler\";\nlet id = Number(env.get(\"ID\"));\nif (id === 77 || id === 76)\n    type = \"Rammeføler\"\nmsg.payload = { val: msg.payload, type: type, \"Addr\": env.get(\"Buss\") + \"/SI/\" + env.get(\"Addr\") + \"/\" + env.get(\"Port\") + \"/\" + env.get(\"ID\") };\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1400,
        "y": 720,
        "wires": [
            [
                "06a871a0ba7c375f"
            ]
        ]
    },
    {
        "id": "df78b8c2e5526c62",
        "type": "json",
        "z": "a61c6b61c04900fe",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 240,
        "y": 320,
        "wires": [
            [
                "b456111dce669126"
            ]
        ]
    },
    {
        "id": "9f4aa987605fedca",
        "type": "change",
        "z": "a61c6b61c04900fe",
        "name": "temp",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.temp",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "T_GROUND",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 500,
        "wires": [
            [
                "8e4496942f3f6544"
            ]
        ]
    },
    {
        "id": "d5ac18ae0e6a87f2",
        "type": "change",
        "z": "a61c6b61c04900fe",
        "name": "between",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.between_pipes",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "BETWEEN_PIPES",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 518,
        "y": 430,
        "wires": [
            [
                "287f91097cf54581"
            ]
        ]
    },
    {
        "id": "287f91097cf54581",
        "type": "change",
        "z": "a61c6b61c04900fe",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0]",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 740,
        "y": 340,
        "wires": [
            [
                "9a8aa358d868052b"
            ]
        ]
    },
    {
        "id": "9a8aa358d868052b",
        "type": "function",
        "z": "a61c6b61c04900fe",
        "name": "Number",
        "func": "if (isNaN(Number(msg.payload)) === false) {\n    msg.payload = Number(msg.payload);\n    return msg;\n}\nelse return null;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 400,
        "wires": [
            [
                "029d866450b45951",
                "4803983235a47afb"
            ]
        ]
    },
    {
        "id": "f7bf28ff162a2dda",
        "type": "function",
        "z": "a61c6b61c04900fe",
        "name": "Number",
        "func": "if (isNaN(Number(msg.payload)) === false) {\n    msg.payload = Number(msg.payload);\n    return msg;\n}\nelse return null;\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 957,
        "y": 488,
        "wires": [
            [
                "029d866450b45951",
                "4803983235a47afb"
            ]
        ]
    },
    {
        "id": "64902ab6243331a9",
        "type": "trigger",
        "z": "a61c6b61c04900fe",
        "name": "",
        "op1": "",
        "op2": "0",
        "op1type": "pay",
        "op2type": "str",
        "duration": "15",
        "extend": true,
        "overrideDelay": true,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 2,
        "x": 1050,
        "y": 40,
        "wires": [
            [],
            [
                "65df5f23ac4e52c7"
            ]
        ]
    },
    {
        "id": "65df5f23ac4e52c7",
        "type": "change",
        "z": "a61c6b61c04900fe",
        "name": "Error",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "327.67",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1530,
        "y": 240,
        "wires": [
            [
                "01ca76bd5ebddc80"
            ]
        ]
    },
    {
        "id": "01ca76bd5ebddc80",
        "type": "change",
        "z": "a61c6b61c04900fe",
        "name": "Kommunikasjonsfeil",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Kommunikasjonsfeil",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1460,
        "y": 360,
        "wires": [
            [
                "0b0acce792b481a4"
            ]
        ]
    },
    {
        "id": "029d866450b45951",
        "type": "function",
        "z": "a61c6b61c04900fe",
        "name": "delay",
        "func": "let addr = env.get(\"ID\");\nmsg.topic = \"T\" + addr;\nlet delay = env.get(\"TIMEOUT\");\nmsg.delay = Number(delay) * 1000 * 60;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1010,
        "y": 140,
        "wires": [
            [
                "64902ab6243331a9"
            ]
        ]
    },
    {
        "id": "700ae5222b94fc52",
        "type": "function",
        "z": "a61c6b61c04900fe",
        "name": "",
        "func": "let type = \"Rammeføler\";\nlet val = \"Bakke: \" + msg.payload['T_GROUND'] + \"\\nMellom rør: \" + msg.payload['BETWEEN_PIPES'];\nmsg.payload = { val: val, type: type, \"Addr\": env.get(\"Buss\") + \"/SI/\" + env.get(\"Addr\") + \"/\" + env.get(\"Port\") + \"/\" + env.get(\"ID\") };\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 740,
        "wires": [
            [
                "06a871a0ba7c375f"
            ]
        ]
    },
    {
        "id": "4803983235a47afb",
        "type": "join",
        "z": "a61c6b61c04900fe",
        "name": "",
        "mode": "custom",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": true,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 890,
        "y": 640,
        "wires": [
            [
                "700ae5222b94fc52",
                "1df21c249c5f8630"
            ]
        ]
    },
    {
        "id": "1df21c249c5f8630",
        "type": "function",
        "z": "a61c6b61c04900fe",
        "name": "function 43",
        "func": "msg.payload = [msg.payload['T_GROUND'], msg.payload['BETWEEN_PIPES']];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1090,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "7163521ca6a7feee",
        "type": "mqtt out",
        "z": "a61c6b61c04900fe",
        "name": "",
        "topic": "KOMMFEIL",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e649abf8.0e7988",
        "x": 1890,
        "y": 320,
        "wires": []
    },
    {
        "id": "0b0acce792b481a4",
        "type": "change",
        "z": "a61c6b61c04900fe",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "topic",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1700,
        "y": 400,
        "wires": [
            [
                "7163521ca6a7feee"
            ]
        ]
    },
    {
        "id": "0cc04e023b1553aa",
        "type": "split",
        "z": "a61c6b61c04900fe",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "topic",
        "x": 750,
        "y": 1060,
        "wires": [
            [
                "efe0ddba4d3c9c1e"
            ]
        ]
    },
    {
        "id": "51510bfc481fdf15",
        "type": "function",
        "z": "a61c6b61c04900fe",
        "name": "function 80",
        "func": "msg.payload = [msg.payload['T23'].temp.toFixed(1), msg.payload['T24'].temp.toFixed(1), msg.payload['T25'].temp.toFixed(1), msg.payload['T26'].temp.toFixed(1)];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1370,
        "y": 1160,
        "wires": [
            []
        ]
    },
    {
        "id": "408c5e106f63eb27",
        "type": "function",
        "z": "a61c6b61c04900fe",
        "name": "",
        "func": "let type = \"Multi\";\nlet val = \"T23: \" + msg.payload['T23'].temp.toFixed(2) + \"\\nT24: \" + msg.payload['T24'].temp.toFixed(2) + \"\\nT25: \" + msg.payload['T25'].temp.toFixed(2) + \"\\nT26: \" + msg.payload['T26'].temp.toFixed(2);\nmsg.payload = { val: val, type: type, \"Addr\": env.get(\"Buss\") + \"/SI/\" + env.get(\"Addr\") + \"/\" + env.get(\"Port\") + \"/\" + env.get(\"ID\") };\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1281,
        "y": 1026,
        "wires": [
            [
                "06a871a0ba7c375f"
            ]
        ]
    },
    {
        "id": "efe0ddba4d3c9c1e",
        "type": "change",
        "z": "a61c6b61c04900fe",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.temp",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1340,
        "y": 880,
        "wires": [
            [
                "4fb29259f625cbb2"
            ]
        ]
    },
    {
        "id": "ed83f15bf7848eb2",
        "type": "smooth",
        "z": "a61c6b61c04900fe",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "1",
        "round": "2",
        "mult": "multi",
        "reduce": false,
        "x": 1760,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "4fb29259f625cbb2",
        "type": "function",
        "z": "a61c6b61c04900fe",
        "name": "Number",
        "func": "if (isNaN(Number(msg.payload)) === false) {\n    msg.payload = Number(msg.payload);\n    return msg;\n}\nelse return null;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1600,
        "y": 800,
        "wires": [
            [
                "ed83f15bf7848eb2"
            ]
        ]
    },
    {
        "id": "2521c444569f7bbc",
        "type": "switch",
        "z": "a61c6b61c04900fe",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "INIT",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 390,
        "y": 180,
        "wires": [
            [
                "8888940f69298394"
            ]
        ]
    },
    {
        "id": "bc13f7fb726a04dc",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "g": "45c6bf30d0c1e246",
        "name": "T26",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "4",
                "type": "num"
            },
            {
                "name": "Port",
                "value": "B",
                "type": "str"
            },
            {
                "name": "ID",
                "value": "26",
                "type": "num"
            }
        ],
        "x": 410,
        "y": 1280,
        "wires": [
            [
                "c99a7308eda3d005"
            ]
        ]
    },
    {
        "id": "db72cefd23b4db6f",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "d": true,
        "g": "45c6bf30d0c1e246",
        "name": "T77",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "4",
                "type": "num"
            },
            {
                "name": "Port",
                "value": "B",
                "type": "str"
            }
        ],
        "x": 410,
        "y": 1340,
        "wires": [
            [
                "7a9d4ec8c8586e14",
                "64893dde8bd488bc"
            ]
        ]
    },
    {
        "id": "993feb2a28f338e0",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "g": "83e1ecd3d3f940ed",
        "name": "Sensor port C",
        "style": {
            "label": true
        },
        "nodes": [
            "554363f35eb7245a",
            "5b596cf70bd7d550"
        ],
        "x": 514,
        "y": 1239,
        "w": 152,
        "h": 142
    },
    {
        "id": "554363f35eb7245a",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "g": "993feb2a28f338e0",
        "name": "T25",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "4",
                "type": "num"
            },
            {
                "name": "Port",
                "value": "C",
                "type": "str"
            },
            {
                "name": "ID",
                "value": "25",
                "type": "num"
            }
        ],
        "x": 590,
        "y": 1280,
        "wires": [
            [
                "7a9d4ec8c8586e14"
            ]
        ]
    },
    {
        "id": "5b596cf70bd7d550",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "d": true,
        "g": "993feb2a28f338e0",
        "name": "T77",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "4",
                "type": "num"
            },
            {
                "name": "Port",
                "value": "C",
                "type": "str"
            }
        ],
        "x": 590,
        "y": 1340,
        "wires": [
            [
                "c99a7308eda3d005",
                "64893dde8bd488bc",
                "7a9d4ec8c8586e14"
            ]
        ]
    },
    {
        "id": "362d8fa0e812a15a",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "g": "83e1ecd3d3f940ed",
        "name": "Sensor port D",
        "style": {
            "label": true
        },
        "nodes": [
            "9c7418fed666d900"
        ],
        "x": 694,
        "y": 1239,
        "w": 152,
        "h": 82
    },
    {
        "id": "9c7418fed666d900",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "g": "362d8fa0e812a15a",
        "name": "T26",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "4",
                "type": "num"
            },
            {
                "name": "Port",
                "value": "D",
                "type": "str"
            },
            {
                "name": "ID",
                "value": "26",
                "type": "num"
            }
        ],
        "x": 770,
        "y": 1280,
        "wires": [
            [
                "7a9d4ec8c8586e14"
            ]
        ]
    },
    {
        "id": "ddc2e5baf49f7f63",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "g": "83e1ecd3d3f940ed",
        "name": "Sensor port E",
        "style": {
            "label": true
        },
        "nodes": [
            "baae5bbabed20f06"
        ],
        "x": 694,
        "y": 1339,
        "w": 152,
        "h": 82
    },
    {
        "id": "baae5bbabed20f06",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "g": "ddc2e5baf49f7f63",
        "name": "T25",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "4",
                "type": "num"
            },
            {
                "name": "Port",
                "value": "E",
                "type": "str"
            },
            {
                "name": "ID",
                "value": "25",
                "type": "num"
            }
        ],
        "x": 770,
        "y": 1380,
        "wires": [
            [
                "64893dde8bd488bc"
            ]
        ]
    },
    {
        "id": "cb8d460ed5822c3f",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "g": "83e1ecd3d3f940ed",
        "name": "Sensor port A",
        "style": {
            "label": true
        },
        "nodes": [
            "06d399e8a12173b1",
            "828074ff77e1be2c"
        ],
        "x": 134,
        "y": 1239,
        "w": 152,
        "h": 142
    },
    {
        "id": "06d399e8a12173b1",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "g": "cb8d460ed5822c3f",
        "name": "T25",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "4",
                "type": "num"
            },
            {
                "name": "ID",
                "value": "25",
                "type": "num"
            }
        ],
        "x": 210,
        "y": 1280,
        "wires": [
            [
                "c99a7308eda3d005"
            ]
        ]
    },
    {
        "id": "828074ff77e1be2c",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "d": true,
        "g": "cb8d460ed5822c3f",
        "name": "T77",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "4",
                "type": "num"
            }
        ],
        "x": 210,
        "y": 1340,
        "wires": [
            []
        ]
    },
    {
        "id": "f88839799d9cb185",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "g": "83e1ecd3d3f940ed",
        "name": "Sensor port F",
        "style": {
            "label": true
        },
        "nodes": [
            "2804d9b3991a4875"
        ],
        "x": 694,
        "y": 1439,
        "w": 152,
        "h": 82
    },
    {
        "id": "2804d9b3991a4875",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "g": "f88839799d9cb185",
        "name": "T26",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "4",
                "type": "num"
            },
            {
                "name": "Port",
                "value": "F",
                "type": "str"
            },
            {
                "name": "ID",
                "value": "26",
                "type": "num"
            }
        ],
        "x": 770,
        "y": 1480,
        "wires": [
            [
                "64893dde8bd488bc"
            ]
        ]
    },
    {
        "id": "64893dde8bd488bc",
        "type": "link out",
        "z": "fe1c0fd7eae8cc55",
        "g": "83e1ecd3d3f940ed",
        "name": "link out 20",
        "mode": "link",
        "links": [
            "36a5b84d14f2e89c"
        ],
        "x": 485,
        "y": 1460,
        "wires": []
    },
    {
        "id": "7a9d4ec8c8586e14",
        "type": "link out",
        "z": "fe1c0fd7eae8cc55",
        "g": "83e1ecd3d3f940ed",
        "name": "link out 21",
        "mode": "link",
        "links": [
            "4780f3195b50f638"
        ],
        "x": 485,
        "y": 1500,
        "wires": []
    },
    {
        "id": "c99a7308eda3d005",
        "type": "link out",
        "z": "fe1c0fd7eae8cc55",
        "g": "83e1ecd3d3f940ed",
        "name": "link out 22",
        "mode": "link",
        "links": [
            "f14d3ae48fe49ef1"
        ],
        "x": 485,
        "y": 1540,
        "wires": []
    },
    {
        "id": "7d4e54cc7cd813fe",
        "type": "comment",
        "z": "fe1c0fd7eae8cc55",
        "g": "83e1ecd3d3f940ed",
        "name": "Sone 1",
        "info": "",
        "x": 570,
        "y": 1460,
        "wires": []
    },
    {
        "id": "9163eccc27996a11",
        "type": "comment",
        "z": "fe1c0fd7eae8cc55",
        "g": "83e1ecd3d3f940ed",
        "name": "Sone 2",
        "info": "",
        "x": 570,
        "y": 1500,
        "wires": []
    },
    {
        "id": "4620578976094b65",
        "type": "comment",
        "z": "fe1c0fd7eae8cc55",
        "g": "83e1ecd3d3f940ed",
        "name": "Sone 3",
        "info": "",
        "x": 570,
        "y": 1540,
        "wires": []
    },
    {
        "id": "4b9deeb4537e2d54",
        "type": "link in",
        "z": "fe1c0fd7eae8cc55",
        "g": "83e1ecd3d3f940ed",
        "name": "maxi4",
        "links": [
            "a87bd32476731bb2"
        ],
        "x": 485,
        "y": 1600,
        "wires": [
            [
                "64893dde8bd488bc",
                "7a9d4ec8c8586e14",
                "c99a7308eda3d005"
            ]
        ]
    },
    {
        "id": "f6c7a09277162925",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "name": "Maxi adr 3",
        "style": {
            "label": true
        },
        "nodes": [
            "a7ab1984b6bc9ec3",
            "8ced1ee0f61b2a89",
            "d9ad96845cd15de4",
            "8ec7246a2c143385",
            "2eca71564a1c551f",
            "97aeabad0e842269",
            "83e15c34aeaa336e",
            "bdfd65df34efd7ab",
            "5b88277a5f5771b6",
            "7f8d4454529e8a9d",
            "50cd542289ee2eae",
            "15fe0274102dce62",
            "04c070eec644e46b",
            "a87bd32476731bb2",
            "c57563b65ec950c7",
            "b7568a54b3bc5730"
        ],
        "x": 888,
        "y": 753,
        "w": 744,
        "h": 508
    },
    {
        "id": "a7ab1984b6bc9ec3",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "g": "f6c7a09277162925",
        "name": "AO",
        "style": {
            "label": true
        },
        "nodes": [
            "542d755f85a8e4f5",
            "651ab1619a9e9ded",
            "d1a94bff475f0a90",
            "ae4354290f30e0e6",
            "4792e202058b1dda",
            "46a7b73bc156a960",
            "7e2d493cfd422454",
            "cf8a6d22f01bcce2"
        ],
        "x": 914,
        "y": 959,
        "w": 252,
        "h": 262
    },
    {
        "id": "542d755f85a8e4f5",
        "type": "subflow:21c7cfcd902495f3",
        "z": "fe1c0fd7eae8cc55",
        "g": "a7ab1984b6bc9ec3",
        "name": "AO utgang C",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "3",
                "type": "num"
            },
            {
                "name": "AO",
                "value": "C",
                "type": "str"
            },
            {
                "name": "Label",
                "value": "Shunt sone 2",
                "type": "str"
            }
        ],
        "x": 1070,
        "y": 1120,
        "wires": [
            []
        ]
    },
    {
        "id": "651ab1619a9e9ded",
        "type": "subflow:21c7cfcd902495f3",
        "z": "fe1c0fd7eae8cc55",
        "g": "a7ab1984b6bc9ec3",
        "name": "AO utgang A",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "3",
                "type": "num"
            },
            {
                "name": "Label",
                "value": "Shunt sone 1",
                "type": "str"
            }
        ],
        "x": 1070,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "d1a94bff475f0a90",
        "type": "subflow:21c7cfcd902495f3",
        "z": "fe1c0fd7eae8cc55",
        "g": "a7ab1984b6bc9ec3",
        "name": "AO utgang B",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "3",
                "type": "num"
            },
            {
                "name": "AO",
                "value": "B",
                "type": "str"
            },
            {
                "name": "Label",
                "value": "Shunt sone 2",
                "type": "str"
            }
        ],
        "x": 1070,
        "y": 1060,
        "wires": [
            []
        ]
    },
    {
        "id": "ae4354290f30e0e6",
        "type": "link in",
        "z": "fe1c0fd7eae8cc55",
        "g": "a7ab1984b6bc9ec3",
        "name": "AO 3A",
        "links": [
            "0bd5618b8b1b1511"
        ],
        "x": 955,
        "y": 1000,
        "wires": [
            [
                "651ab1619a9e9ded"
            ]
        ]
    },
    {
        "id": "4792e202058b1dda",
        "type": "link in",
        "z": "fe1c0fd7eae8cc55",
        "g": "a7ab1984b6bc9ec3",
        "name": "AO 3B",
        "links": [
            "38b59be3016cc2dc"
        ],
        "x": 955,
        "y": 1060,
        "wires": [
            [
                "d1a94bff475f0a90"
            ]
        ]
    },
    {
        "id": "46a7b73bc156a960",
        "type": "link in",
        "z": "fe1c0fd7eae8cc55",
        "g": "a7ab1984b6bc9ec3",
        "name": "AO 3C",
        "links": [
            "2f480242c119e080"
        ],
        "x": 955,
        "y": 1120,
        "wires": [
            [
                "542d755f85a8e4f5"
            ]
        ]
    },
    {
        "id": "7e2d493cfd422454",
        "type": "subflow:21c7cfcd902495f3",
        "z": "fe1c0fd7eae8cc55",
        "g": "a7ab1984b6bc9ec3",
        "name": "AO utgang D",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "3",
                "type": "num"
            },
            {
                "name": "AO",
                "value": "D",
                "type": "str"
            },
            {
                "name": "Label",
                "value": "Shunt sone 2",
                "type": "str"
            }
        ],
        "x": 1070,
        "y": 1180,
        "wires": [
            []
        ]
    },
    {
        "id": "cf8a6d22f01bcce2",
        "type": "link in",
        "z": "fe1c0fd7eae8cc55",
        "g": "a7ab1984b6bc9ec3",
        "name": "AO 3D",
        "links": [
            "fb1c45e7bdd776c8"
        ],
        "x": 955,
        "y": 1180,
        "wires": [
            [
                "7e2d493cfd422454"
            ]
        ]
    },
    {
        "id": "8ced1ee0f61b2a89",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "g": "f6c7a09277162925",
        "name": "Sensor port B",
        "style": {
            "label": true
        },
        "nodes": [
            "64379449fd31a21f",
            "abe51bcb7bbf9bc3"
        ],
        "x": 1094,
        "y": 779,
        "w": 152,
        "h": 142
    },
    {
        "id": "64379449fd31a21f",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "g": "8ced1ee0f61b2a89",
        "name": "T26",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "3",
                "type": "num"
            },
            {
                "name": "Port",
                "value": "B",
                "type": "str"
            },
            {
                "name": "ID",
                "value": "26",
                "type": "num"
            }
        ],
        "x": 1170,
        "y": 820,
        "wires": [
            [
                "7f8d4454529e8a9d"
            ]
        ]
    },
    {
        "id": "abe51bcb7bbf9bc3",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "g": "8ced1ee0f61b2a89",
        "name": "T77",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "3",
                "type": "num"
            },
            {
                "name": "Port",
                "value": "B",
                "type": "str"
            }
        ],
        "x": 1170,
        "y": 880,
        "wires": [
            [
                "5b88277a5f5771b6",
                "bdfd65df34efd7ab",
                "b7568a54b3bc5730"
            ]
        ]
    },
    {
        "id": "d9ad96845cd15de4",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "g": "f6c7a09277162925",
        "name": "Sensor port C",
        "style": {
            "label": true
        },
        "nodes": [
            "ae0755b04101a46f",
            "9bebebf45d1720fa"
        ],
        "x": 1274,
        "y": 779,
        "w": 152,
        "h": 142
    },
    {
        "id": "ae0755b04101a46f",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "g": "d9ad96845cd15de4",
        "name": "T25",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "3",
                "type": "num"
            },
            {
                "name": "Port",
                "value": "C",
                "type": "str"
            },
            {
                "name": "ID",
                "value": "25",
                "type": "num"
            }
        ],
        "x": 1350,
        "y": 820,
        "wires": [
            [
                "5b88277a5f5771b6"
            ]
        ]
    },
    {
        "id": "9bebebf45d1720fa",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "g": "d9ad96845cd15de4",
        "name": "T77",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "3",
                "type": "num"
            },
            {
                "name": "Port",
                "value": "C",
                "type": "str"
            }
        ],
        "x": 1350,
        "y": 880,
        "wires": [
            [
                "7f8d4454529e8a9d",
                "b7568a54b3bc5730"
            ]
        ]
    },
    {
        "id": "8ec7246a2c143385",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "g": "f6c7a09277162925",
        "name": "Sensor port D",
        "style": {
            "label": true
        },
        "nodes": [
            "9dbd049c7bfcc85f"
        ],
        "x": 1454,
        "y": 779,
        "w": 152,
        "h": 82
    },
    {
        "id": "9dbd049c7bfcc85f",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "g": "8ec7246a2c143385",
        "name": "T26",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "3",
                "type": "num"
            },
            {
                "name": "Port",
                "value": "D",
                "type": "str"
            },
            {
                "name": "ID",
                "value": "26",
                "type": "num"
            }
        ],
        "x": 1530,
        "y": 820,
        "wires": [
            [
                "5b88277a5f5771b6"
            ]
        ]
    },
    {
        "id": "2eca71564a1c551f",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "g": "f6c7a09277162925",
        "name": "Sensor port E",
        "style": {
            "label": true
        },
        "nodes": [
            "36ad407ce592e3fc"
        ],
        "x": 1454,
        "y": 879,
        "w": 152,
        "h": 82
    },
    {
        "id": "36ad407ce592e3fc",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "g": "2eca71564a1c551f",
        "name": "T25",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "3",
                "type": "num"
            },
            {
                "name": "Port",
                "value": "E",
                "type": "str"
            },
            {
                "name": "ID",
                "value": "25",
                "type": "num"
            }
        ],
        "x": 1530,
        "y": 920,
        "wires": [
            [
                "bdfd65df34efd7ab"
            ]
        ]
    },
    {
        "id": "97aeabad0e842269",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "g": "f6c7a09277162925",
        "name": "Sensor port A",
        "style": {
            "label": true
        },
        "nodes": [
            "c6125e068315e9ec",
            "c0772ac9db750e17"
        ],
        "x": 914,
        "y": 779,
        "w": 152,
        "h": 142
    },
    {
        "id": "c6125e068315e9ec",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "g": "97aeabad0e842269",
        "name": "T25",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "3",
                "type": "num"
            },
            {
                "name": "ID",
                "value": "25",
                "type": "num"
            }
        ],
        "x": 990,
        "y": 820,
        "wires": [
            [
                "7f8d4454529e8a9d"
            ]
        ]
    },
    {
        "id": "c0772ac9db750e17",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "d": true,
        "g": "97aeabad0e842269",
        "name": "T77",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "3",
                "type": "num"
            }
        ],
        "x": 990,
        "y": 880,
        "wires": [
            [
                "bdfd65df34efd7ab"
            ]
        ]
    },
    {
        "id": "83e15c34aeaa336e",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "g": "f6c7a09277162925",
        "name": "Sensor port F",
        "style": {
            "label": true
        },
        "nodes": [
            "6a49494a8bdc4548"
        ],
        "x": 1454,
        "y": 979,
        "w": 152,
        "h": 82
    },
    {
        "id": "6a49494a8bdc4548",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "g": "83e15c34aeaa336e",
        "name": "T26",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "3",
                "type": "num"
            },
            {
                "name": "Port",
                "value": "F",
                "type": "str"
            },
            {
                "name": "ID",
                "value": "26",
                "type": "num"
            }
        ],
        "x": 1530,
        "y": 1020,
        "wires": [
            [
                "bdfd65df34efd7ab"
            ]
        ]
    },
    {
        "id": "bdfd65df34efd7ab",
        "type": "link out",
        "z": "fe1c0fd7eae8cc55",
        "g": "f6c7a09277162925",
        "name": "link out 17",
        "mode": "link",
        "links": [
            "dcadfa413a29a524"
        ],
        "x": 1245,
        "y": 980,
        "wires": []
    },
    {
        "id": "5b88277a5f5771b6",
        "type": "link out",
        "z": "fe1c0fd7eae8cc55",
        "g": "f6c7a09277162925",
        "name": "link out 18",
        "mode": "link",
        "links": [
            "a938c1d27e341268"
        ],
        "x": 1245,
        "y": 1020,
        "wires": []
    },
    {
        "id": "7f8d4454529e8a9d",
        "type": "link out",
        "z": "fe1c0fd7eae8cc55",
        "g": "f6c7a09277162925",
        "name": "link out 19",
        "mode": "link",
        "links": [
            "16f625e2f193be95"
        ],
        "x": 1245,
        "y": 1060,
        "wires": []
    },
    {
        "id": "50cd542289ee2eae",
        "type": "comment",
        "z": "fe1c0fd7eae8cc55",
        "g": "f6c7a09277162925",
        "name": "Sone 1",
        "info": "",
        "x": 1330,
        "y": 980,
        "wires": []
    },
    {
        "id": "15fe0274102dce62",
        "type": "comment",
        "z": "fe1c0fd7eae8cc55",
        "g": "f6c7a09277162925",
        "name": "Sone 2",
        "info": "",
        "x": 1330,
        "y": 1020,
        "wires": []
    },
    {
        "id": "04c070eec644e46b",
        "type": "comment",
        "z": "fe1c0fd7eae8cc55",
        "g": "f6c7a09277162925",
        "name": "Sone 3",
        "info": "",
        "x": 1330,
        "y": 1060,
        "wires": []
    },
    {
        "id": "a87bd32476731bb2",
        "type": "link out",
        "z": "fe1c0fd7eae8cc55",
        "g": "f6c7a09277162925",
        "name": "link out 36",
        "mode": "link",
        "links": [
            "4b9deeb4537e2d54",
            "cd3e42bc9fdd65a6"
        ],
        "x": 1385,
        "y": 1220,
        "wires": []
    },
    {
        "id": "c57563b65ec950c7",
        "type": "smooth",
        "z": "fe1c0fd7eae8cc55",
        "g": "f6c7a09277162925",
        "name": "",
        "property": "payload",
        "action": "low",
        "count": "10",
        "round": "",
        "mult": "multi",
        "reduce": false,
        "x": 1380,
        "y": 1180,
        "wires": [
            [
                "a87bd32476731bb2"
            ]
        ]
    },
    {
        "id": "b7568a54b3bc5730",
        "type": "smooth",
        "z": "fe1c0fd7eae8cc55",
        "g": "f6c7a09277162925",
        "name": "",
        "property": "payload",
        "action": "min",
        "count": "10",
        "round": "",
        "mult": "multi",
        "reduce": false,
        "x": 1320,
        "y": 1120,
        "wires": [
            [
                "c57563b65ec950c7"
            ]
        ]
    },
    {
        "id": "84667e48263fe412",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "name": "Maxi adr 2 Plass 20",
        "style": {
            "label": true
        },
        "nodes": [
            "98fd3c8fa7f41f60",
            "b2e9f806fccca595",
            "46c3554f52f88580",
            "029429700b71f63a",
            "755493467b942245",
            "a46f35ca652d124f",
            "a86e27047787b6f8",
            "593cb049cef01c05",
            "3bc84c5f8d5dc527",
            "ac16d6a5cf340ce5",
            "a95f4aca497ae0a1",
            "28a7b8044e3672b3",
            "cd3e42bc9fdd65a6"
        ],
        "x": 88,
        "y": 753,
        "w": 764,
        "h": 448
    },
    {
        "id": "98fd3c8fa7f41f60",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "g": "84667e48263fe412",
        "name": "AO",
        "style": {
            "label": true
        },
        "nodes": [
            "0c9af3fc56750375",
            "22b7a5a728df7c91",
            "545669199b83e208",
            "0dc6e689a1b8a598",
            "e1951d9eb7bbe42e",
            "d16ccd5f92031126"
        ],
        "x": 114,
        "y": 959,
        "w": 252,
        "h": 202
    },
    {
        "id": "0c9af3fc56750375",
        "type": "subflow:21c7cfcd902495f3",
        "z": "fe1c0fd7eae8cc55",
        "g": "98fd3c8fa7f41f60",
        "name": "AO utgang C",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "2",
                "type": "num"
            },
            {
                "name": "AO",
                "value": "C",
                "type": "str"
            },
            {
                "name": "Label",
                "value": "Shunt sone 2",
                "type": "str"
            }
        ],
        "x": 270,
        "y": 1120,
        "wires": [
            []
        ]
    },
    {
        "id": "22b7a5a728df7c91",
        "type": "subflow:21c7cfcd902495f3",
        "z": "fe1c0fd7eae8cc55",
        "g": "98fd3c8fa7f41f60",
        "name": "AO utgang A",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "2",
                "type": "num"
            },
            {
                "name": "Label",
                "value": "Shunt sone 1",
                "type": "str"
            }
        ],
        "x": 270,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "545669199b83e208",
        "type": "subflow:21c7cfcd902495f3",
        "z": "fe1c0fd7eae8cc55",
        "g": "98fd3c8fa7f41f60",
        "name": "AO utgang B",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "2",
                "type": "num"
            },
            {
                "name": "AO",
                "value": "B",
                "type": "str"
            },
            {
                "name": "Label",
                "value": "Shunt sone 2",
                "type": "str"
            }
        ],
        "x": 270,
        "y": 1060,
        "wires": [
            []
        ]
    },
    {
        "id": "0dc6e689a1b8a598",
        "type": "link in",
        "z": "fe1c0fd7eae8cc55",
        "g": "98fd3c8fa7f41f60",
        "name": "AO 2A",
        "links": [
            "fb491aed863a8d23"
        ],
        "x": 155,
        "y": 1000,
        "wires": [
            [
                "22b7a5a728df7c91"
            ]
        ]
    },
    {
        "id": "e1951d9eb7bbe42e",
        "type": "link in",
        "z": "fe1c0fd7eae8cc55",
        "g": "98fd3c8fa7f41f60",
        "name": "AO 2B",
        "links": [
            "b3f5c3c37f5a615d"
        ],
        "x": 155,
        "y": 1060,
        "wires": [
            [
                "545669199b83e208"
            ]
        ]
    },
    {
        "id": "d16ccd5f92031126",
        "type": "link in",
        "z": "fe1c0fd7eae8cc55",
        "g": "98fd3c8fa7f41f60",
        "name": "AO 2C",
        "links": [
            "30819f2ad6d7982c"
        ],
        "x": 155,
        "y": 1120,
        "wires": [
            [
                "0c9af3fc56750375"
            ]
        ]
    },
    {
        "id": "b2e9f806fccca595",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "g": "84667e48263fe412",
        "name": "Sensor port B",
        "style": {
            "label": true
        },
        "nodes": [
            "dd307c98c0407dba",
            "174661891f9ee691"
        ],
        "x": 314,
        "y": 779,
        "w": 152,
        "h": 142
    },
    {
        "id": "dd307c98c0407dba",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "g": "b2e9f806fccca595",
        "name": "T26",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "2",
                "type": "num"
            },
            {
                "name": "Port",
                "value": "B",
                "type": "str"
            },
            {
                "name": "ID",
                "value": "26",
                "type": "num"
            }
        ],
        "x": 390,
        "y": 820,
        "wires": [
            [
                "593cb049cef01c05"
            ]
        ]
    },
    {
        "id": "174661891f9ee691",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "d": true,
        "g": "b2e9f806fccca595",
        "name": "T77",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "2",
                "type": "num"
            },
            {
                "name": "Port",
                "value": "B",
                "type": "str"
            }
        ],
        "x": 390,
        "y": 880,
        "wires": [
            []
        ]
    },
    {
        "id": "46c3554f52f88580",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "g": "84667e48263fe412",
        "name": "Sensor port C",
        "style": {
            "label": true
        },
        "nodes": [
            "9e0147f93fc98c40",
            "fbbf0466cea510ac"
        ],
        "x": 494,
        "y": 779,
        "w": 152,
        "h": 142
    },
    {
        "id": "9e0147f93fc98c40",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "g": "46c3554f52f88580",
        "name": "T25",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "2",
                "type": "num"
            },
            {
                "name": "Port",
                "value": "C",
                "type": "str"
            },
            {
                "name": "ID",
                "value": "25",
                "type": "num"
            }
        ],
        "x": 570,
        "y": 820,
        "wires": [
            [
                "3bc84c5f8d5dc527"
            ]
        ]
    },
    {
        "id": "fbbf0466cea510ac",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "g": "46c3554f52f88580",
        "name": "T77",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "2",
                "type": "num"
            },
            {
                "name": "Port",
                "value": "C",
                "type": "str"
            }
        ],
        "x": 570,
        "y": 880,
        "wires": [
            [
                "ac16d6a5cf340ce5",
                "593cb049cef01c05",
                "3bc84c5f8d5dc527"
            ]
        ]
    },
    {
        "id": "029429700b71f63a",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "g": "84667e48263fe412",
        "name": "Sensor port D",
        "style": {
            "label": true
        },
        "nodes": [
            "9fd2f7b0db324ad6"
        ],
        "x": 674,
        "y": 779,
        "w": 152,
        "h": 82
    },
    {
        "id": "9fd2f7b0db324ad6",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "g": "029429700b71f63a",
        "name": "T26",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "2",
                "type": "num"
            },
            {
                "name": "Port",
                "value": "D",
                "type": "str"
            },
            {
                "name": "ID",
                "value": "26",
                "type": "num"
            }
        ],
        "x": 750,
        "y": 820,
        "wires": [
            [
                "3bc84c5f8d5dc527"
            ]
        ]
    },
    {
        "id": "755493467b942245",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "g": "84667e48263fe412",
        "name": "Sensor port E",
        "style": {
            "label": true
        },
        "nodes": [
            "d3ee45b95843bcba"
        ],
        "x": 674,
        "y": 879,
        "w": 152,
        "h": 82
    },
    {
        "id": "d3ee45b95843bcba",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "g": "755493467b942245",
        "name": "T25",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "2",
                "type": "num"
            },
            {
                "name": "Port",
                "value": "E",
                "type": "str"
            },
            {
                "name": "ID",
                "value": "25",
                "type": "num"
            }
        ],
        "x": 750,
        "y": 920,
        "wires": [
            [
                "ac16d6a5cf340ce5"
            ]
        ]
    },
    {
        "id": "a46f35ca652d124f",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "g": "84667e48263fe412",
        "name": "Sensor port A",
        "style": {
            "label": true
        },
        "nodes": [
            "0185ff9379834c72",
            "68b69f4c61cd5a26"
        ],
        "x": 134,
        "y": 779,
        "w": 152,
        "h": 142
    },
    {
        "id": "0185ff9379834c72",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "g": "a46f35ca652d124f",
        "name": "T25",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "2",
                "type": "num"
            },
            {
                "name": "ID",
                "value": "25",
                "type": "num"
            }
        ],
        "x": 210,
        "y": 820,
        "wires": [
            [
                "593cb049cef01c05"
            ]
        ]
    },
    {
        "id": "68b69f4c61cd5a26",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "d": true,
        "g": "a46f35ca652d124f",
        "name": "T77",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "2",
                "type": "num"
            }
        ],
        "x": 210,
        "y": 880,
        "wires": [
            [
                "593cb049cef01c05",
                "3bc84c5f8d5dc527"
            ]
        ]
    },
    {
        "id": "a86e27047787b6f8",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "g": "84667e48263fe412",
        "name": "Sensor port F",
        "style": {
            "label": true
        },
        "nodes": [
            "a1bc8e24799a4d94"
        ],
        "x": 674,
        "y": 979,
        "w": 152,
        "h": 82
    },
    {
        "id": "a1bc8e24799a4d94",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "g": "a86e27047787b6f8",
        "name": "T26",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "2",
                "type": "num"
            },
            {
                "name": "Port",
                "value": "F",
                "type": "str"
            },
            {
                "name": "ID",
                "value": "26",
                "type": "num"
            }
        ],
        "x": 750,
        "y": 1020,
        "wires": [
            [
                "ac16d6a5cf340ce5"
            ]
        ]
    },
    {
        "id": "593cb049cef01c05",
        "type": "link out",
        "z": "fe1c0fd7eae8cc55",
        "g": "84667e48263fe412",
        "name": "link out 14",
        "mode": "link",
        "links": [
            "f297690f93b00abc"
        ],
        "x": 475,
        "y": 980,
        "wires": []
    },
    {
        "id": "3bc84c5f8d5dc527",
        "type": "link out",
        "z": "fe1c0fd7eae8cc55",
        "g": "84667e48263fe412",
        "name": "link out 15",
        "mode": "link",
        "links": [
            "d4e7299e8bbf20a3"
        ],
        "x": 475,
        "y": 1040,
        "wires": []
    },
    {
        "id": "ac16d6a5cf340ce5",
        "type": "link out",
        "z": "fe1c0fd7eae8cc55",
        "g": "84667e48263fe412",
        "name": "link out 16",
        "mode": "link",
        "links": [
            "393d8f99cbd880ad"
        ],
        "x": 475,
        "y": 1100,
        "wires": []
    },
    {
        "id": "a95f4aca497ae0a1",
        "type": "comment",
        "z": "fe1c0fd7eae8cc55",
        "g": "84667e48263fe412",
        "name": "Sone 1",
        "info": "",
        "x": 550,
        "y": 980,
        "wires": []
    },
    {
        "id": "28a7b8044e3672b3",
        "type": "comment",
        "z": "fe1c0fd7eae8cc55",
        "g": "84667e48263fe412",
        "name": "Sone 2",
        "info": "",
        "x": 550,
        "y": 1040,
        "wires": []
    },
    {
        "id": "cd3e42bc9fdd65a6",
        "type": "link in",
        "z": "fe1c0fd7eae8cc55",
        "g": "84667e48263fe412",
        "name": "maxi4",
        "links": [
            "a87bd32476731bb2"
        ],
        "x": 435,
        "y": 1160,
        "wires": [
            [
                "ac16d6a5cf340ce5",
                "3bc84c5f8d5dc527",
                "593cb049cef01c05"
            ]
        ]
    },
    {
        "id": "f0f3746d07c16dc6",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "name": "Oppstillingsplass 20",
        "style": {
            "label": true
        },
        "nodes": [
            "01df6e31c1fd7980",
            "458345588f67dce7",
            "bf759c531bd78d00",
            "f172e34b39aa5fc6",
            "f297690f93b00abc",
            "d4e7299e8bbf20a3",
            "393d8f99cbd880ad",
            "fb491aed863a8d23",
            "b3f5c3c37f5a615d",
            "30819f2ad6d7982c"
        ],
        "x": 84,
        "y": 479,
        "w": 452,
        "h": 242
    },
    {
        "id": "01df6e31c1fd7980",
        "type": "subflow:c5ddcc1d8ce4e760",
        "z": "fe1c0fd7eae8cc55",
        "g": "f0f3746d07c16dc6",
        "name": "Oppstillingsplass 20: Sone 1 ",
        "env": [
            {
                "name": "LABEL",
                "value": "Sone 1",
                "type": "str"
            },
            {
                "name": "STANDBY",
                "type": "bool",
                "value": "true"
            },
            {
                "name": "GROUND_SETPOINT_SNOW_PROB",
                "value": "3",
                "type": "num"
            },
            {
                "name": "START_DELAY",
                "value": "1",
                "type": "num"
            },
            {
                "name": "GROUP",
                "value": "Oppstillingsplass 20",
                "type": "str"
            }
        ],
        "x": 300,
        "y": 560,
        "wires": [
            [
                "f172e34b39aa5fc6"
            ],
            [
                "fb491aed863a8d23"
            ]
        ]
    },
    {
        "id": "458345588f67dce7",
        "type": "subflow:c5ddcc1d8ce4e760",
        "z": "fe1c0fd7eae8cc55",
        "g": "f0f3746d07c16dc6",
        "name": "Oppstillingsplass 20: Sone 2",
        "env": [
            {
                "name": "LABEL",
                "value": "Sone 2",
                "type": "str"
            },
            {
                "name": "STANDBY",
                "type": "bool",
                "value": "true"
            },
            {
                "name": "GROUND_SETPOINT_SNOW_PROB",
                "value": "3",
                "type": "num"
            },
            {
                "name": "START_DELAY",
                "value": "1",
                "type": "num"
            },
            {
                "name": "GROUP",
                "value": "Oppstillingsplass 20",
                "type": "str"
            }
        ],
        "x": 300,
        "y": 620,
        "wires": [
            [
                "f172e34b39aa5fc6"
            ],
            [
                "b3f5c3c37f5a615d"
            ]
        ]
    },
    {
        "id": "bf759c531bd78d00",
        "type": "subflow:c5ddcc1d8ce4e760",
        "z": "fe1c0fd7eae8cc55",
        "g": "f0f3746d07c16dc6",
        "name": "Oppstillingsplass 20: Sone 3",
        "env": [
            {
                "name": "LABEL",
                "value": "Sone 3",
                "type": "str"
            },
            {
                "name": "STANDBY",
                "type": "bool",
                "value": "true"
            },
            {
                "name": "GROUND_SETPOINT_SNOW_PROB",
                "value": "3",
                "type": "num"
            },
            {
                "name": "START_DELAY",
                "value": "1",
                "type": "num"
            },
            {
                "name": "GROUP",
                "value": "Oppstillingsplass 20",
                "type": "str"
            }
        ],
        "x": 300,
        "y": 680,
        "wires": [
            [
                "f172e34b39aa5fc6"
            ],
            [
                "30819f2ad6d7982c"
            ]
        ]
    },
    {
        "id": "f172e34b39aa5fc6",
        "type": "link out",
        "z": "fe1c0fd7eae8cc55",
        "g": "f0f3746d07c16dc6",
        "name": "link out 10",
        "mode": "link",
        "links": [
            "daee40f421bade3d"
        ],
        "x": 495,
        "y": 520,
        "wires": []
    },
    {
        "id": "f297690f93b00abc",
        "type": "link in",
        "z": "fe1c0fd7eae8cc55",
        "g": "f0f3746d07c16dc6",
        "name": "20-1",
        "links": [
            "593cb049cef01c05",
            "9a67e79d8d5b4d84"
        ],
        "x": 125,
        "y": 560,
        "wires": [
            [
                "01df6e31c1fd7980"
            ]
        ]
    },
    {
        "id": "d4e7299e8bbf20a3",
        "type": "link in",
        "z": "fe1c0fd7eae8cc55",
        "g": "f0f3746d07c16dc6",
        "name": "20-2",
        "links": [
            "3bc84c5f8d5dc527",
            "9a67e79d8d5b4d84"
        ],
        "x": 125,
        "y": 620,
        "wires": [
            [
                "458345588f67dce7"
            ]
        ]
    },
    {
        "id": "393d8f99cbd880ad",
        "type": "link in",
        "z": "fe1c0fd7eae8cc55",
        "g": "f0f3746d07c16dc6",
        "name": "20-3",
        "links": [
            "9a67e79d8d5b4d84",
            "ac16d6a5cf340ce5"
        ],
        "x": 125,
        "y": 680,
        "wires": [
            [
                "bf759c531bd78d00"
            ]
        ]
    },
    {
        "id": "fb491aed863a8d23",
        "type": "link out",
        "z": "fe1c0fd7eae8cc55",
        "g": "f0f3746d07c16dc6",
        "name": "link out 23",
        "mode": "link",
        "links": [
            "0dc6e689a1b8a598"
        ],
        "x": 495,
        "y": 580,
        "wires": []
    },
    {
        "id": "b3f5c3c37f5a615d",
        "type": "link out",
        "z": "fe1c0fd7eae8cc55",
        "g": "f0f3746d07c16dc6",
        "name": "link out 24",
        "mode": "link",
        "links": [
            "e1951d9eb7bbe42e"
        ],
        "x": 495,
        "y": 640,
        "wires": []
    },
    {
        "id": "30819f2ad6d7982c",
        "type": "link out",
        "z": "fe1c0fd7eae8cc55",
        "g": "f0f3746d07c16dc6",
        "name": "link out 25",
        "mode": "link",
        "links": [
            "d16ccd5f92031126"
        ],
        "x": 485,
        "y": 680,
        "wires": []
    },
    {
        "id": "0d1cdd903fe332ae",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "name": "Maxi adr 5",
        "style": {
            "label": true
        },
        "nodes": [
            "85ecc4e1952e671d",
            "72ad8fe8a96114da",
            "6ab99cf65cd553a2"
        ],
        "x": 1308,
        "y": 1313,
        "w": 564,
        "h": 194
    },
    {
        "id": "85ecc4e1952e671d",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "g": "0d1cdd903fe332ae",
        "name": "Sensor port B",
        "style": {
            "label": true
        },
        "nodes": [
            "340237ef4fb5453d"
        ],
        "x": 1534,
        "y": 1399,
        "w": 152,
        "h": 82
    },
    {
        "id": "340237ef4fb5453d",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "g": "85ecc4e1952e671d",
        "name": "T77",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "5",
                "type": "num"
            },
            {
                "name": "Port",
                "value": "B",
                "type": "str"
            }
        ],
        "x": 1610,
        "y": 1440,
        "wires": [
            [
                "5496010d9da14b04"
            ]
        ]
    },
    {
        "id": "72ad8fe8a96114da",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "g": "0d1cdd903fe332ae",
        "name": "Sensor port C",
        "style": {
            "label": true
        },
        "nodes": [
            "04c7e50b1bc0c86c"
        ],
        "x": 1694,
        "y": 1379,
        "w": 152,
        "h": 82
    },
    {
        "id": "04c7e50b1bc0c86c",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "g": "72ad8fe8a96114da",
        "name": "T26",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "5",
                "type": "num"
            },
            {
                "name": "Port",
                "value": "C",
                "type": "str"
            },
            {
                "name": "ID",
                "value": "26",
                "type": "num"
            }
        ],
        "x": 1770,
        "y": 1420,
        "wires": [
            [
                "5496010d9da14b04"
            ]
        ]
    },
    {
        "id": "6ab99cf65cd553a2",
        "type": "group",
        "z": "fe1c0fd7eae8cc55",
        "g": "0d1cdd903fe332ae",
        "name": "Sensor port A",
        "style": {
            "label": true
        },
        "nodes": [
            "f7d532b793536be2"
        ],
        "x": 1334,
        "y": 1339,
        "w": 152,
        "h": 82
    },
    {
        "id": "f7d532b793536be2",
        "type": "subflow:a61c6b61c04900fe",
        "z": "fe1c0fd7eae8cc55",
        "g": "6ab99cf65cd553a2",
        "name": "T25",
        "env": [
            {
                "name": "Buss",
                "value": "COM4",
                "type": "str"
            },
            {
                "name": "Addr",
                "value": "5",
                "type": "num"
            },
            {
                "name": "ID",
                "value": "25",
                "type": "num"
            }
        ],
        "x": 1410,
        "y": 1380,
        "wires": [
            [
                "5496010d9da14b04"
            ]
        ]
    },
    {
        "id": "e55b80ce9b892b5e",
        "type": "global-config",
        "env": [],
        "modules": {
            "node-red-node-rbe": "0.5.0",
            "node-red-contrib-uibuilder": "7.4.3",
            "@aiwell-ac5000/nodered-stm": "1.7.11",
            "@aiwell-ac5000/ac5000-nodes": "1.4.0",
            "@aiwell-ac5000/pid-controller": "4.2.1",
            "node-red-node-smooth": "0.1.2",
            "node-red-dashboard": "3.6.6"
        }
    }
]